
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://code.deepsynoptic.org/dsa110-contimg/analysis/VAST_TOOLS_DSA110_DETAILED_COMPARISON/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.31" name="generator"/>
<title>VAST Tools → DSA-110 Detailed Comparison and Adoption Plan - DSA-110 Continuum Imaging Pipeline</title>
<link href="../../assets/stylesheets/main.3cba04c6.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#vast-tools-dsa-110-detailed-comparison-and-adoption-plan">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DSA-110 Continuum Imaging Pipeline
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              VAST Tools → DSA-110 Detailed Comparison and Adoption Plan
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DSA-110 Continuum Imaging Pipeline
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../DOCUMENTATION_QUICK_REFERENCE/">
<span class="md-ellipsis">
    Documentation Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../concepts/">
<span class="md-ellipsis">
    Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/DIRECTORY_ARCHITECTURE/">
<span class="md-ellipsis">
    Directory Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/modules/">
<span class="md-ellipsis">
    Modules
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/control-panel/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/aoflagger/">
<span class="md-ellipsis">
    AOFlagger
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/frontend_design/">
<span class="md-ellipsis">
    Frontend Design
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_8">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/dashboard_mockups/">
<span class="md-ellipsis">
    Mockups
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../SKYVIEW_IMPLEMENTATION_PLAN/">
<span class="md-ellipsis">
    Sky View
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/GLOSSARY/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
<span class="md-ellipsis">
    Pipeline
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
            Pipeline
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_stage_architecture/">
<span class="md-ellipsis">
    Stage Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_workflow_visualization/">
<span class="md-ellipsis">
    Workflow Visualization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_production_features/">
<span class="md-ellipsis">
    Production Features
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_patterns/">
<span class="md-ellipsis">
    Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
<span class="md-ellipsis">
    Science
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
            Science
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/science/photometry_normalization/">
<span class="md-ellipsis">
    Photometry Normalization
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/mcp_browser_server_setup/">
<span class="md-ellipsis">
    Browser MCP Server
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Tutorials
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/HDF5_TO_MS_TUTORIAL/">
<span class="md-ellipsis">
    HDF5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/simulation-tutorial/">
<span class="md-ellipsis">
    Simulation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/calibrate-apply/">
<span class="md-ellipsis">
    Calibrate and Apply
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/convert-standalone/">
<span class="md-ellipsis">
    Convert Standalone
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/streaming/">
<span class="md-ellipsis">
    Streaming
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-ellipsis">
    Notebooks
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/bandpass_calibration_test.ipynb">
<span class="md-ellipsis">
    Bandpass Calibration Test
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/calibrator_helper.py">
<span class="md-ellipsis">
    Calibrator Helper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/CalibratorSearch.ipynb">
<span class="md-ellipsis">
    Calibrator Search
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/ms_staging_workflow.ipynb">
<span class="md-ellipsis">
    MS Staging Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    How-To Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/github_pages_walkthrough/">
<span class="md-ellipsis">
    GitHub Pages Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    Quickstarts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            Quickstarts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/quickstart/">
<span class="md-ellipsis">
    General
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/control-panel-quickstart/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/LINEAR_SETUP_QUICKSTART/">
<span class="md-ellipsis">
    Linear Setup
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
<span class="md-ellipsis">
    Testing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            Testing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/FAST_TESTING/">
<span class="md-ellipsis">
    Fast Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/PIPELINE_TESTING_GUIDE/">
<span class="md-ellipsis">
    Pipeline Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/TEST_FLAG_SUBCOMMAND/">
<span class="md-ellipsis">
    Flag Subcommand
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/build-vp-from-h5/">
<span class="md-ellipsis">
    Build VP from h5
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
<span class="md-ellipsis">
    Calibration
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_5">
<span class="md-nav__icon md-icon"></span>
            Calibration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/CALIBRATION_DETAILED_PROCEDURE/">
<span class="md-ellipsis">
    Detailed Procedure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/FIND_CALIBRATOR_TRANSIT_DATA/">
<span class="md-ellipsis">
    Find Calibrator Transit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/IMAGE_0834_TRANSIT_5MIN/">
<span class="md-ellipsis">
    Image 0834 Transit 5min
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
<span class="md-ellipsis">
    Mosaic
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
            Mosaic
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/mosaic_quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/mosaic/">
<span class="md-ellipsis">
    Complete Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
<span class="md-ellipsis">
    Quality Assurance
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_8">
<span class="md-nav__icon md-icon"></span>
            Quality Assurance
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/QUALITY_ASSURANCE_SETUP/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/quicklook/">
<span class="md-ellipsis">
    Quick Look
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/reprocess/">
<span class="md-ellipsis">
    Reprocess
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/USING_ORCHESTRATOR_CLI/">
<span class="md-ellipsis">
    Using Orchestrator CLI
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_11">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/dashboard-development/">
<span class="md-ellipsis">
    Development
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/dashboard-quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/dashboard_testing/">
<span class="md-ellipsis">
    Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/dashboard_development_workflow/">
<span class="md-ellipsis">
    Development Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/LINEAR_INTEGRATION/">
<span class="md-ellipsis">
    Linear Integration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/frontend-initial-setup/">
<span class="md-ellipsis">
    Frontend Initial Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/PARAMETER_OPTIMIZATION_GUIDE/">
<span class="md-ellipsis">
    AOFlagger Parameter Optimization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/downsampling_guide/">
<span class="md-ellipsis">
    Downsampling Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_16_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_16">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/uvh5_to_ms_conversion/">
<span class="md-ellipsis">
    UVH5 to MS
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/streaming_converter_guide/">
<span class="md-ellipsis">
    Streaming Converter
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-to/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
<span class="md-ellipsis">
    API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_1_2">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/dashboard_backend_api/">
<span class="md-ellipsis">
    API Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/dashboard_pages_and_features/">
<span class="md-ellipsis">
    Pages &amp; Features
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/backend_integration_snippets/">
<span class="md-ellipsis">
    Integration Snippets
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/calibration-overview/">
<span class="md-ellipsis">
    Calibration Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/cli/">
<span class="md-ellipsis">
    CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/control-panel-cheatsheet/">
<span class="md-ellipsis">
    Control Panel Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/database_schema/">
<span class="md-ellipsis">
    Database Schema
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/env/">
<span class="md-ellipsis">
    Environment Variables
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/CRITICAL_PYTHON_ENVIRONMENT/">
<span class="md-ellipsis">
    Critical Python Environment
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
<span class="md-ellipsis">
    Optimizations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
            Optimizations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/optimizations/OPTIMIZATION_API/">
<span class="md-ellipsis">
    API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/optimizations/PROFILING_GUIDE/">
<span class="md-ellipsis">
    Profiling Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Operations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-ellipsis">
    Deployment
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/deploy-docker/">
<span class="md-ellipsis">
    Docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/deploy-systemd/">
<span class="md-ellipsis">
    systemd
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/port-management/">
<span class="md-ellipsis">
    Port Management
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/refant_quick_reference/">
<span class="md-ellipsis">
    Refant Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/service_restart_fix/">
<span class="md-ellipsis">
    Service Restart Fix
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/systemd-migration/">
<span class="md-ellipsis">
    Systemd Migration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Archive
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/archive/CONTRIBUTING_TODO/">
<span class="md-ellipsis">
    Contributing to TODO
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/archive/rules/">
<span class="md-ellipsis">
    Rules
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#executive-summary">
<span class="md-ellipsis">
      Executive Summary
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#1-current-state-comparison">
<span class="md-ellipsis">
      1. Current State Comparison
    </span>
</a>
<nav aria-label="1. Current State Comparison" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#11-dsa-110-current-capabilities">
<span class="md-ellipsis">
      1.1 DSA-110 Current Capabilities
    </span>
</a>
<nav aria-label="1.1 DSA-110 Current Capabilities" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#photometry-normalization">
<span class="md-ellipsis">
      Photometry &amp; Normalization ✅
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variability-analysis-partial">
<span class="md-ellipsis">
      Variability Analysis ⚠️ Partial
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-representation-missing">
<span class="md-ellipsis">
      Source Representation ❌ Missing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#light-curve-plotting-missing">
<span class="md-ellipsis">
      Light Curve Plotting ❌ Missing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#postage-stamps-missing">
<span class="md-ellipsis">
      Postage Stamps ❌ Missing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#external-catalog-integration-partial">
<span class="md-ellipsis">
      External Catalog Integration ⚠️ Partial
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#12-vast-tools-capabilities">
<span class="md-ellipsis">
      1.2 VAST Tools Capabilities
    </span>
</a>
<nav aria-label="1.2 VAST Tools Capabilities" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#source-class">
<span class="md-ellipsis">
      Source Class ✅
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#light-curve-plotting">
<span class="md-ellipsis">
      Light Curve Plotting ✅
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variability-metrics">
<span class="md-ellipsis">
      Variability Metrics ✅
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#postage-stamps">
<span class="md-ellipsis">
      Postage Stamps ✅
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#external-catalog-integration">
<span class="md-ellipsis">
      External Catalog Integration ✅
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-detailed-feature-comparison">
<span class="md-ellipsis">
      2. Detailed Feature Comparison
    </span>
</a>
<nav aria-label="2. Detailed Feature Comparison" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#21-source-representation">
<span class="md-ellipsis">
      2.1 Source Representation
    </span>
</a>
<nav aria-label="2.1 Source Representation" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-tools-pattern">
<span class="md-ellipsis">
      VAST Tools Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dsa-110-current-state">
<span class="md-ellipsis">
      DSA-110 Current State
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#recommendation-adopt-source-class-pattern">
<span class="md-ellipsis">
      Recommendation: Adopt Source Class Pattern
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#22-light-curve-plotting">
<span class="md-ellipsis">
      2.2 Light Curve Plotting
    </span>
</a>
<nav aria-label="2.2 Light Curve Plotting" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-tools-features">
<span class="md-ellipsis">
      VAST Tools Features
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dsa-110-current-state_1">
<span class="md-ellipsis">
      DSA-110 Current State
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#recommendation-adopt-light-curve-plotting">
<span class="md-ellipsis">
      Recommendation: Adopt Light Curve Plotting
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#23-variability-metrics">
<span class="md-ellipsis">
      2.3 Variability Metrics
    </span>
</a>
<nav aria-label="2.3 Variability Metrics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-tools-metrics">
<span class="md-ellipsis">
      VAST Tools Metrics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dsa-110-current-metrics">
<span class="md-ellipsis">
      DSA-110 Current Metrics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#recommendation-add-missing-metrics">
<span class="md-ellipsis">
      Recommendation: Add Missing Metrics
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#24-postage-stamp-visualization">
<span class="md-ellipsis">
      2.4 Postage Stamp Visualization
    </span>
</a>
<nav aria-label="2.4 Postage Stamp Visualization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-tools-features_1">
<span class="md-ellipsis">
      VAST Tools Features
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dsa-110-current-state_2">
<span class="md-ellipsis">
      DSA-110 Current State
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#recommendation-add-postage-stamps">
<span class="md-ellipsis">
      Recommendation: Add Postage Stamps
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#25-external-catalog-integration">
<span class="md-ellipsis">
      2.5 External Catalog Integration
    </span>
</a>
<nav aria-label="2.5 External Catalog Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-tools-integration">
<span class="md-ellipsis">
      VAST Tools Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dsa-110-current-integration">
<span class="md-ellipsis">
      DSA-110 Current Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#recommendation-expand-catalog-integration">
<span class="md-ellipsis">
      Recommendation: Expand Catalog Integration
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-detailed-adoption-plan">
<span class="md-ellipsis">
      3. Detailed Adoption Plan
    </span>
</a>
<nav aria-label="3. Detailed Adoption Plan" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#31-high-priority-source-class-pattern">
<span class="md-ellipsis">
      3.1 High Priority: Source Class Pattern
    </span>
</a>
<nav aria-label="3.1 High Priority: Source Class Pattern" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-adopt">
<span class="md-ellipsis">
      Why Adopt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-strategy">
<span class="md-ellipsis">
      Implementation Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#32-medium-priority-postage-stamp-visualization">
<span class="md-ellipsis">
      3.2 Medium Priority: Postage Stamp Visualization
    </span>
</a>
<nav aria-label="3.2 Medium Priority: Postage Stamp Visualization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-adopt_1">
<span class="md-ellipsis">
      Why Adopt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-strategy_1">
<span class="md-ellipsis">
      Implementation Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#33-low-medium-priority-external-catalog-integration">
<span class="md-ellipsis">
      3.3 Low-Medium Priority: External Catalog Integration
    </span>
</a>
<nav aria-label="3.3 Low-Medium Priority: External Catalog Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-adopt_2">
<span class="md-ellipsis">
      Why Adopt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-strategy_2">
<span class="md-ellipsis">
      Implementation Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-implementation-roadmap">
<span class="md-ellipsis">
      4. Implementation Roadmap
    </span>
</a>
<nav aria-label="4. Implementation Roadmap" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-1-core-source-class-high-priority">
<span class="md-ellipsis">
      Phase 1: Core Source Class (High Priority)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-visualization-tools-medium-priority">
<span class="md-ellipsis">
      Phase 2: Visualization Tools (Medium Priority)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-3-external-catalog-integration-low-medium-priority">
<span class="md-ellipsis">
      Phase 3: External Catalog Integration (Low-Medium Priority)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-code-examples-before-and-after">
<span class="md-ellipsis">
      5. Code Examples: Before and After
    </span>
</a>
<nav aria-label="5. Code Examples: Before and After" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#before-current-dsa-110">
<span class="md-ellipsis">
      Before (Current DSA-110)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#after-with-vast-patterns">
<span class="md-ellipsis">
      After (With VAST Patterns)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-integration-points">
<span class="md-ellipsis">
      6. Integration Points
    </span>
</a>
<nav aria-label="6. Integration Points" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#61-api-integration">
<span class="md-ellipsis">
      6.1 API Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#62-ese-detection-integration">
<span class="md-ellipsis">
      6.2 ESE Detection Integration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7-testing-strategy">
<span class="md-ellipsis">
      7. Testing Strategy
    </span>
</a>
<nav aria-label="7. Testing Strategy" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#unit-tests">
<span class="md-ellipsis">
      Unit Tests
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-tests">
<span class="md-ellipsis">
      Integration Tests
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8-dependencies">
<span class="md-ellipsis">
      8. Dependencies
    </span>
</a>
<nav aria-label="8. Dependencies" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#new-dependencies-required">
<span class="md-ellipsis">
      New Dependencies Required
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-dependencies">
<span class="md-ellipsis">
      Optional Dependencies
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9-migration-path">
<span class="md-ellipsis">
      9. Migration Path
    </span>
</a>
<nav aria-label="9. Migration Path" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-add-source-class-non-breaking">
<span class="md-ellipsis">
      Step 1: Add Source Class (Non-Breaking)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-update-variability-stats-database-migration">
<span class="md-ellipsis">
      Step 2: Update Variability Stats (Database Migration)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-add-visualization-new-features">
<span class="md-ellipsis">
      Step 3: Add Visualization (New Features)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-4-external-catalogs-optional-enhancement">
<span class="md-ellipsis">
      Step 4: External Catalogs (Optional Enhancement)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10-success-metrics">
<span class="md-ellipsis">
      10. Success Metrics
    </span>
</a>
<nav aria-label="10. Success Metrics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#quantitative">
<span class="md-ellipsis">
      Quantitative
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#qualitative">
<span class="md-ellipsis">
      Qualitative
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#11-conclusion">
<span class="md-ellipsis">
      11. Conclusion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="vast-tools-dsa-110-detailed-comparison-and-adoption-plan">VAST Tools → DSA-110 Detailed Comparison and Adoption Plan<a class="headerlink" href="#vast-tools-dsa-110-detailed-comparison-and-adoption-plan" title="Permanent link">¶</a></h1>
<p><strong>Date:</strong> 2025-11-12<br/>
<strong>Purpose:</strong> Comprehensive comparison of VAST Tools and DSA-110 pipeline, with detailed recommendations for adopting VAST patterns<br/>
<strong>Reference:</strong> <code>/data/dsa110-contimg/archive/references/vast-tools</code></p>
<hr/>
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">¶</a></h2>
<p>This document provides a detailed comparison between VAST Tools and the DSA-110 continuum imaging pipeline, identifying specific features, patterns, and capabilities that can be adopted from VAST to enhance DSA-110's ESE detection and source analysis capabilities.</p>
<p><strong>Key Finding:</strong> DSA-110 has strong foundations (photometry, normalization, database) but lacks the rich source analysis interface and visualization tools that VAST Tools provides. Adopting VAST patterns would significantly improve ESE candidate analysis workflows.</p>
<hr/>
<h2 id="1-current-state-comparison">1. Current State Comparison<a class="headerlink" href="#1-current-state-comparison" title="Permanent link">¶</a></h2>
<h3 id="11-dsa-110-current-capabilities">1.1 DSA-110 Current Capabilities<a class="headerlink" href="#11-dsa-110-current-capabilities" title="Permanent link">¶</a></h3>
<h4 id="photometry-normalization"><strong>Photometry &amp; Normalization</strong> ✅<a class="headerlink" href="#photometry-normalization" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>src/dsa110_contimg/photometry/</code></li>
<li><strong>Status:</strong> Well-implemented</li>
<li><strong>Features:</strong></li>
<li>Forced photometry (<code>forced.py</code>)</li>
<li>Differential normalization (<code>normalize.py</code>)</li>
<li>Reference source ensemble correction</li>
<li>1-2% relative flux precision achieved</li>
<li><strong>Database:</strong> <code>photometry_timeseries</code> table with normalized fluxes</li>
</ul>
<h4 id="variability-analysis-partial"><strong>Variability Analysis</strong> ⚠️ Partial<a class="headerlink" href="#variability-analysis-partial" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>database/schema_evolution.py</code>, <code>api/data_access.py</code></li>
<li><strong>Status:</strong> Basic implementation</li>
<li><strong>Features:</strong></li>
<li><code>variability_stats</code> table with:<ul>
<li><code>chi2_reduced</code></li>
<li><code>fractional_variability</code> (V metric)</li>
<li><code>ese_score</code></li>
<li><code>significance</code></li>
</ul>
</li>
<li>Missing: η metric, two-epoch metrics (Vs, m)</li>
</ul>
<h4 id="source-representation-missing"><strong>Source Representation</strong> ❌ Missing<a class="headerlink" href="#source-representation-missing" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Status:</strong> No Source class pattern</li>
<li><strong>Current:</strong> Database queries only (<code>fetch_source_timeseries()</code>)</li>
<li><strong>Limitation:</strong> No object-oriented interface for source analysis</li>
</ul>
<h4 id="light-curve-plotting-missing"><strong>Light Curve Plotting</strong> ❌ Missing<a class="headerlink" href="#light-curve-plotting-missing" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Status:</strong> No dedicated light curve plotting</li>
<li><strong>Current:</strong> Only validation plots (<code>qa/validation_plots.py</code>)</li>
<li><strong>Limitation:</strong> No ESE candidate visualization</li>
</ul>
<h4 id="postage-stamps-missing"><strong>Postage Stamps</strong> ❌ Missing<a class="headerlink" href="#postage-stamps-missing" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Status:</strong> No image cutout visualization</li>
<li><strong>Current:</strong> Only full image QA plots</li>
<li><strong>Limitation:</strong> Cannot visualize individual sources across epochs</li>
</ul>
<h4 id="external-catalog-integration-partial"><strong>External Catalog Integration</strong> ⚠️ Partial<a class="headerlink" href="#external-catalog-integration-partial" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>catalog/query.py</code>, <code>imaging/nvss_tools.py</code></li>
<li><strong>Status:</strong> NVSS/VLASS only</li>
<li><strong>Missing:</strong> SIMBAD, NED, CASDA, Gaia integration</li>
</ul>
<h3 id="12-vast-tools-capabilities">1.2 VAST Tools Capabilities<a class="headerlink" href="#12-vast-tools-capabilities" title="Permanent link">¶</a></h3>
<h4 id="source-class"><strong>Source Class</strong> ✅<a class="headerlink" href="#source-class" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>vasttools/source.py</code> (~2,800 lines)</li>
<li><strong>Features:</strong></li>
<li>Rich Source object with measurements, coordinates, epochs</li>
<li>Built-in plotting methods</li>
<li>Crossmatching capabilities</li>
<li>Variability metric calculations</li>
</ul>
<h4 id="light-curve-plotting"><strong>Light Curve Plotting</strong> ✅<a class="headerlink" href="#light-curve-plotting" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>vasttools/source.py::Source.plot_lightcurve()</code></li>
<li><strong>Features:</strong></li>
<li>Peak and integrated flux support</li>
<li>Upper limits visualization</li>
<li>Multiple time axes (datetime, MJD, days from start)</li>
<li>Customizable styling</li>
<li>Error bars and detection/limit distinction</li>
<li>Bokeh interactive plots</li>
</ul>
<h4 id="variability-metrics"><strong>Variability Metrics</strong> ✅<a class="headerlink" href="#variability-metrics" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>vasttools/utils.py</code></li>
<li><strong>Metrics:</strong></li>
<li>η metric (weighted variance)</li>
<li>V metric (coefficient of variation)</li>
<li>Vs metric (two-epoch t-statistic)</li>
<li>m metric (modulation index)</li>
</ul>
<h4 id="postage-stamps"><strong>Postage Stamps</strong> ✅<a class="headerlink" href="#postage-stamps" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>vasttools/source.py::Source.show_png_cutout()</code></li>
<li><strong>Features:</strong></li>
<li>Individual epoch cutouts</li>
<li>All-epoch grid visualization</li>
<li>Selavy overlay options</li>
<li>SkyView contour overlays</li>
</ul>
<h4 id="external-catalog-integration"><strong>External Catalog Integration</strong> ✅<a class="headerlink" href="#external-catalog-integration" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Location:</strong> <code>vasttools/source.py</code></li>
<li><strong>Services:</strong></li>
<li>SIMBAD (object identification)</li>
<li>NED (extragalactic database)</li>
<li>CASDA (ASKAP archive)</li>
<li>Gaia (astrometry)</li>
<li>Vizier (catalog queries)</li>
</ul>
<hr/>
<h2 id="2-detailed-feature-comparison">2. Detailed Feature Comparison<a class="headerlink" href="#2-detailed-feature-comparison" title="Permanent link">¶</a></h2>
<h3 id="21-source-representation">2.1 Source Representation<a class="headerlink" href="#21-source-representation" title="Permanent link">¶</a></h3>
<h4 id="vast-tools-pattern">VAST Tools Pattern<a class="headerlink" href="#vast-tools-pattern" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Source</span><span class="p">:</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">SkyCoord</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">epochs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">fields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">measurements</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
    <span class="n">detections</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">limits</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">plot_lightcurve</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Figure</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">show_png_cutout</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Figure</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">calc_eta_and_v_metrics</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">simbad_search</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">casda_search</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Table</span>
</code></pre></div>
<h4 id="dsa-110-current-state">DSA-110 Current State<a class="headerlink" href="#dsa-110-current-state" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># No Source class - only database queries</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fetch_source_timeseries</span><span class="p">(</span><span class="n">products_db</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
    <span class="c1"># Returns dictionary with flux points</span>
    <span class="c1"># No methods for plotting or analysis</span>
</code></pre></div>
<h4 id="recommendation-adopt-source-class-pattern"><strong>Recommendation: Adopt Source Class Pattern</strong><a class="headerlink" href="#recommendation-adopt-source-class-pattern" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Priority:</strong> High</li>
<li><strong>Benefit:</strong> Clean interface for ESE candidate analysis</li>
<li><strong>Implementation:</strong> Create <code>src/dsa110_contimg/photometry/source.py</code></li>
</ul>
<h3 id="22-light-curve-plotting">2.2 Light Curve Plotting<a class="headerlink" href="#22-light-curve-plotting" title="Permanent link">¶</a></h3>
<h4 id="vast-tools-features">VAST Tools Features<a class="headerlink" href="#vast-tools-features" title="Permanent link">¶</a></h4>
<ul>
<li>Handles both peak and integrated flux</li>
<li>Upper limits visualization (sigma threshold)</li>
<li>Multiple time axis options</li>
<li>Customizable figure size, DPI, grid, legend</li>
<li>Error bars and detection/limit distinction</li>
<li>Bokeh interactive plots</li>
</ul>
<h4 id="dsa-110-current-state_1">DSA-110 Current State<a class="headerlink" href="#dsa-110-current-state_1" title="Permanent link">¶</a></h4>
<ul>
<li>No dedicated light curve plotting</li>
<li>Only validation plots (<code>plot_flux_ratio_histogram</code>, <code>plot_flux_vs_offset</code>)</li>
</ul>
<h4 id="recommendation-adopt-light-curve-plotting"><strong>Recommendation: Adopt Light Curve Plotting</strong><a class="headerlink" href="#recommendation-adopt-light-curve-plotting" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Priority:</strong> High</li>
<li><strong>Benefit:</strong> Essential for ESE candidate visualization</li>
<li><strong>Implementation:</strong> Create <code>src/dsa110_contimg/qa/lightcurves.py</code></li>
</ul>
<h3 id="23-variability-metrics">2.3 Variability Metrics<a class="headerlink" href="#23-variability-metrics" title="Permanent link">¶</a></h3>
<h4 id="vast-tools-metrics">VAST Tools Metrics<a class="headerlink" href="#vast-tools-metrics" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># η metric (weighted variance)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pipeline_get_eta_metric</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">peak</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="sa">f</span><span class="s1">'flux_</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s1">_err'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">fluxes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="sa">f</span><span class="s1">'flux_</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s1">'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">eta</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">weights</span> <span class="o">*</span> <span class="n">fluxes</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">weights</span> <span class="o">*</span> <span class="n">fluxes</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="n">weights</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">eta</span>

<span class="c1"># V metric (coefficient of variation)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'flux'</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">'flux'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># Vs metric (two-epoch t-statistic)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_vs_metric</span><span class="p">(</span><span class="n">flux_a</span><span class="p">,</span> <span class="n">flux_b</span><span class="p">,</span> <span class="n">flux_err_a</span><span class="p">,</span> <span class="n">flux_err_b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">flux_err_a</span><span class="p">,</span> <span class="n">flux_err_b</span><span class="p">)</span>

<span class="c1"># m metric (modulation index)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_m_metric</span><span class="p">(</span><span class="n">flux_a</span><span class="p">,</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">+</span> <span class="n">flux_b</span><span class="p">))</span>
</code></pre></div>
<h4 id="dsa-110-current-metrics">DSA-110 Current Metrics<a class="headerlink" href="#dsa-110-current-metrics" title="Permanent link">¶</a></h4>
<ul>
<li><code>fractional_variability</code> (V metric) ✅</li>
<li><code>chi2_reduced</code> ✅</li>
<li>Missing: η metric, Vs metric, m metric</li>
</ul>
<h4 id="recommendation-add-missing-metrics"><strong>Recommendation: Add Missing Metrics</strong><a class="headerlink" href="#recommendation-add-missing-metrics" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Priority:</strong> Medium</li>
<li><strong>Benefit:</strong> Complementary to χ² for variability detection</li>
<li><strong>Implementation:</strong> Extend <code>src/dsa110_contimg/photometry/variability.py</code></li>
</ul>
<h3 id="24-postage-stamp-visualization">2.4 Postage Stamp Visualization<a class="headerlink" href="#24-postage-stamp-visualization" title="Permanent link">¶</a></h3>
<h4 id="vast-tools-features_1">VAST Tools Features<a class="headerlink" href="#vast-tools-features_1" title="Permanent link">¶</a></h4>
<ul>
<li>Individual epoch cutouts (<code>show_png_cutout()</code>)</li>
<li>All-epoch grid (<code>show_all_png_cutouts()</code>)</li>
<li>Selavy overlay options</li>
<li>SkyView contour overlays</li>
<li>Customizable size, columns, figure size</li>
</ul>
<h4 id="dsa-110-current-state_2">DSA-110 Current State<a class="headerlink" href="#dsa-110-current-state_2" title="Permanent link">¶</a></h4>
<ul>
<li>No postage stamp visualization</li>
<li>Only full image QA plots</li>
</ul>
<h4 id="recommendation-add-postage-stamps"><strong>Recommendation: Add Postage Stamps</strong><a class="headerlink" href="#recommendation-add-postage-stamps" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Priority:</strong> Medium</li>
<li><strong>Benefit:</strong> Visual verification of ESE candidates</li>
<li><strong>Implementation:</strong> Create <code>src/dsa110_contimg/qa/postage_stamps.py</code></li>
</ul>
<h3 id="25-external-catalog-integration">2.5 External Catalog Integration<a class="headerlink" href="#25-external-catalog-integration" title="Permanent link">¶</a></h3>
<h4 id="vast-tools-integration">VAST Tools Integration<a class="headerlink" href="#vast-tools-integration" title="Permanent link">¶</a></h4>
<ul>
<li>SIMBAD: Object identification</li>
<li>NED: Extragalactic database</li>
<li>CASDA: ASKAP archive</li>
<li>Gaia: Astrometry</li>
<li>Vizier: Catalog queries</li>
</ul>
<h4 id="dsa-110-current-integration">DSA-110 Current Integration<a class="headerlink" href="#dsa-110-current-integration" title="Permanent link">¶</a></h4>
<ul>
<li>NVSS: ✅ (<code>catalog/query.py</code>, <code>imaging/nvss_tools.py</code>)</li>
<li>VLASS: ✅ (<code>catalog/query.py</code>)</li>
<li>Missing: SIMBAD, NED, CASDA, Gaia</li>
</ul>
<h4 id="recommendation-expand-catalog-integration"><strong>Recommendation: Expand Catalog Integration</strong><a class="headerlink" href="#recommendation-expand-catalog-integration" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Priority:</strong> Low-Medium</li>
<li><strong>Benefit:</strong> Better source identification and crossmatching</li>
<li><strong>Implementation:</strong> Extend <code>src/dsa110_contimg/catalog/query.py</code></li>
</ul>
<hr/>
<h2 id="3-detailed-adoption-plan">3. Detailed Adoption Plan<a class="headerlink" href="#3-detailed-adoption-plan" title="Permanent link">¶</a></h2>
<h3 id="31-high-priority-source-class-pattern">3.1 High Priority: Source Class Pattern<a class="headerlink" href="#31-high-priority-source-class-pattern" title="Permanent link">¶</a></h3>
<h4 id="why-adopt"><strong>Why Adopt</strong><a class="headerlink" href="#why-adopt" title="Permanent link">¶</a></h4>
<ul>
<li>Clean interface for ESE candidate analysis</li>
<li>Encapsulates measurements, plotting, crossmatching</li>
<li>Enables method chaining and workflow automation</li>
<li>Improves code organization and reusability</li>
</ul>
<h4 id="implementation-strategy"><strong>Implementation Strategy</strong><a class="headerlink" href="#implementation-strategy" title="Permanent link">¶</a></h4>
<p><strong>Step 1: Create Source Class</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/photometry/source.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.coordinates</span><span class="w"> </span><span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy</span><span class="w"> </span><span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Source</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Represents a single source with measurements across epochs."""</span>
    <span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">ra_deg</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">dec_deg</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">products_db</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Load measurements from database."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">products_db</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_measurements</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_measurements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Load photometry measurements from database."""</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">products_db</span><span class="p">))</span>
        <span class="n">query</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">            SELECT </span>
<span class="s2">                mjd, normalized_flux_jy, normalized_flux_err_jy,</span>
<span class="s2">                peak_jyb, peak_err_jyb, image_path, measured_at</span>
<span class="s2">            FROM photometry_timeseries</span>
<span class="s2">            WHERE source_id = ?</span>
<span class="s2">            ORDER BY mjd ASC</span>
<span class="s2">        """</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">source_id</span><span class="p">,))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">df</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">coord</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SkyCoord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Source coordinates as SkyCoord."""</span>
        <span class="k">return</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ra_deg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dec_deg</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">n_epochs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Number of epochs with measurements."""</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">detections</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Number of detections (SNR &gt; 5)."""</span>
        <span class="k">if</span> <span class="s1">'snr'</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="s1">'snr'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">plot_lightcurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Plot light curve (adopt from VAST)."""</span>
        <span class="c1"># Implementation below</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calc_variability_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Calculate variability metrics."""</span>
        <span class="c1"># Implementation below</span>
</code></pre></div></p>
<p><strong>Step 2: Adopt Light Curve Plotting</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot_lightcurve</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">use_normalized</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">figsize</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">min_points</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">mjd</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">grid</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">yaxis_start</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"auto"</span><span class="p">,</span>
    <span class="n">highlight_baseline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">highlight_ese_period</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">save</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">outfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">plot_dpi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">150</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Plot light curve with ESE-specific features.</span>

<span class="sd">    Args:</span>
<span class="sd">        use_normalized: Use normalized flux (default) or raw flux</span>
<span class="sd">        highlight_baseline: Highlight first 10 epochs as baseline</span>
<span class="sd">        highlight_ese_period: Highlight 14-180 day ESE candidate period</span>
<span class="sd">        ... (other args from VAST)</span>
<span class="sd">    """</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">min_points</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Need at least </span><span class="si">{</span><span class="n">min_points</span><span class="si">}</span><span class="s2"> measurements"</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">plot_dpi</span><span class="p">)</span>

    <span class="c1"># Select flux column</span>
    <span class="n">flux_col</span> <span class="o">=</span> <span class="s1">'normalized_flux_jy'</span> <span class="k">if</span> <span class="n">use_normalized</span> <span class="k">else</span> <span class="s1">'peak_jyb'</span>
    <span class="n">err_col</span> <span class="o">=</span> <span class="s1">'normalized_flux_err_jy'</span> <span class="k">if</span> <span class="n">use_normalized</span> <span class="k">else</span> <span class="s1">'peak_err_jyb'</span>

    <span class="c1"># Time axis</span>
    <span class="k">if</span> <span class="n">mjd</span><span class="p">:</span>
        <span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="s1">'mjd'</span><span class="p">]</span>
        <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">'MJD'</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="s1">'measured_at'</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'s'</span><span class="p">)</span>
        <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">'Date'</span>

    <span class="c1"># Plot flux with error bars</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span>
        <span class="n">time</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="n">flux_col</span><span class="p">],</span> 
        <span class="n">yerr</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="n">err_col</span><span class="p">],</span>
        <span class="n">fmt</span><span class="o">=</span><span class="s1">'o'</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">capthick</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">'Normalized Flux'</span> <span class="k">if</span> <span class="n">use_normalized</span> <span class="k">else</span> <span class="s1">'Peak Flux'</span>
    <span class="p">)</span>

    <span class="c1"># Highlight baseline period (first 10 epochs)</span>
    <span class="k">if</span> <span class="n">highlight_baseline</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="n">baseline_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">baseline_flux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="n">flux_col</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span>
            <span class="n">baseline_time</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">baseline_time</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
            <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'green'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'Baseline Period'</span>
        <span class="p">)</span>
        <span class="c1"># Plot baseline median</span>
        <span class="n">baseline_median</span> <span class="o">=</span> <span class="n">baseline_flux</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span>
            <span class="n">baseline_median</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'green'</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">'--'</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">'Baseline Median: </span><span class="si">{</span><span class="n">baseline_median</span><span class="si">:</span><span class="s1">.4f</span><span class="si">}</span><span class="s1"> Jy'</span>
        <span class="p">)</span>

    <span class="c1"># Highlight ESE candidate period (14-180 days)</span>
    <span class="k">if</span> <span class="n">highlight_ese_period</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">time_range_days</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">/</span> <span class="mi">86400</span>
        <span class="k">if</span> <span class="mi">14</span> <span class="o">&lt;=</span> <span class="n">time_range_days</span> <span class="o">&lt;=</span> <span class="mi">180</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span>
                <span class="n">time</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">time</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
                <span class="n">alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'red'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'ESE Candidate Period'</span>
            <span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">'Flux (Jy)'</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">use_normalized</span> <span class="k">else</span> <span class="s1">'Normalized Flux'</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Light Curve: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">source_id</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">yaxis_start</span> <span class="o">==</span> <span class="s2">"0"</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">save</span> <span class="ow">and</span> <span class="n">outfile</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">plot_dpi</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">'tight'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></p>
<p><strong>Step 3: Add Variability Metrics</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calc_variability_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Calculate variability metrics (adopt from VAST)."""</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">dsa110_contimg.photometry.variability</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">calculate_eta_metric</span><span class="p">,</span>
        <span class="n">calculate_vs_metric</span><span class="p">,</span>
        <span class="n">calculate_m_metric</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">'v'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s1">'eta'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s1">'n_epochs'</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="n">flux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="s1">'normalized_flux_jy'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">flux_err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[</span><span class="s1">'normalized_flux_err_jy'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

    <span class="c1"># V metric (coefficient of variation)</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">flux</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">flux</span><span class="p">)</span>

    <span class="c1"># η metric (weighted variance)</span>
    <span class="n">eta</span> <span class="o">=</span> <span class="n">calculate_eta_metric</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">[[</span><span class="s1">'normalized_flux_jy'</span><span class="p">,</span> <span class="s1">'normalized_flux_err_jy'</span><span class="p">]]</span>
    <span class="p">)</span>

    <span class="c1"># Two-epoch metrics (if applicable)</span>
    <span class="n">vs_metrics</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">m_metrics</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">flux</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flux</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="n">calculate_vs_metric</span><span class="p">(</span>
                <span class="n">flux</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">flux</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">flux_err</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">flux_err</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">calculate_m_metric</span><span class="p">(</span><span class="n">flux</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">flux</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">vs_metrics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span>
            <span class="n">m_metrics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">'v'</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">),</span>
        <span class="s1">'eta'</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">eta</span><span class="p">),</span>
        <span class="s1">'vs_mean'</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">vs_metrics</span><span class="p">))</span> <span class="k">if</span> <span class="n">vs_metrics</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">'m_mean'</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">m_metrics</span><span class="p">))</span> <span class="k">if</span> <span class="n">m_metrics</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">'n_epochs'</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></p>
<p><strong>Step 4: Create Variability Utilities Module</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/photometry/variability.py</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_eta_metric</span><span class="p">(</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">flux_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'normalized_flux_jy'</span><span class="p">,</span>
    <span class="n">err_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'normalized_flux_err_jy'</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Calculate η metric (weighted variance) - adopted from VAST.</span>

<span class="sd">    See VAST Tools: vasttools/utils.py::pipeline_get_eta_metric()</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

    <span class="n">weights</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="n">err_col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">fluxes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">flux_col</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

    <span class="n">eta</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">weights</span> <span class="o">*</span> <span class="n">fluxes</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">weights</span> <span class="o">*</span> <span class="n">fluxes</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="n">weights</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">eta</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_vs_metric</span><span class="p">(</span>
    <span class="n">flux_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">flux_b</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">flux_err_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">flux_err_b</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Calculate Vs metric (two-epoch t-statistic) - adopted from VAST.</span>

<span class="sd">    See VAST Tools: vasttools/utils.py::calculate_vs_metric()</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">flux_err_a</span><span class="p">,</span> <span class="n">flux_err_b</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_m_metric</span><span class="p">(</span><span class="n">flux_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">flux_b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Calculate m metric (modulation index) - adopted from VAST.</span>

<span class="sd">    See VAST Tools: vasttools/utils.py::calculate_m_metric()</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">+</span> <span class="n">flux_b</span><span class="p">))</span>
</code></pre></div></p>
<h3 id="32-medium-priority-postage-stamp-visualization">3.2 Medium Priority: Postage Stamp Visualization<a class="headerlink" href="#32-medium-priority-postage-stamp-visualization" title="Permanent link">¶</a></h3>
<h4 id="why-adopt_1"><strong>Why Adopt</strong><a class="headerlink" href="#why-adopt_1" title="Permanent link">¶</a></h4>
<ul>
<li>Visual verification of ESE candidates</li>
<li>Quality assessment of measurements</li>
<li>Useful for publication figures</li>
</ul>
<h4 id="implementation-strategy_1"><strong>Implementation Strategy</strong><a class="headerlink" href="#implementation-strategy_1" title="Permanent link">¶</a></h4>
<p><strong>Create Postage Stamp Module</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/qa/postage_stamps.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">fits</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.wcs</span><span class="w"> </span><span class="kn">import</span> <span class="n">WCS</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.nddata.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cutout2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.coordinates</span><span class="w"> </span><span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy</span><span class="w"> </span><span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.visualization</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZScaleInterval</span><span class="p">,</span> <span class="n">ImageNormalize</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_cutout</span><span class="p">(</span>
    <span class="n">fits_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">ra_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">dec_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">size_arcmin</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">WCS</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Create image cutout around source position."""</span>
    <span class="n">coord</span> <span class="o">=</span> <span class="n">SkyCoord</span><span class="p">(</span><span class="n">ra_deg</span><span class="p">,</span> <span class="n">dec_deg</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">))</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">size_arcmin</span> <span class="o">*</span> <span class="n">u</span><span class="o">.</span><span class="n">arcmin</span>

    <span class="k">with</span> <span class="n">fits</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">fits_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">hdul</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">hdul</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
        <span class="n">wcs</span> <span class="o">=</span> <span class="n">WCS</span><span class="p">(</span><span class="n">hdul</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">header</span><span class="p">)</span><span class="o">.</span><span class="n">celestial</span>

    <span class="n">cutout</span> <span class="o">=</span> <span class="n">Cutout2D</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">wcs</span><span class="o">=</span><span class="n">wcs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cutout</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">cutout</span><span class="o">.</span><span class="n">wcs_celestial</span>

<span class="k">def</span><span class="w"> </span><span class="nf">show_all_cutouts</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="s1">'Source'</span><span class="p">,</span>  <span class="c1"># From photometry/source.py</span>
    <span class="n">size_arcmin</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="n">columns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">figsize</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">save</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">outfile</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Show all epoch cutouts in a grid - adopted from VAST.</span>

<span class="sd">    See VAST Tools: vasttools/source.py::Source.show_all_png_cutouts()</span>
<span class="sd">    """</span>
    <span class="n">n_epochs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">n_epochs</span> <span class="o">+</span> <span class="n">columns</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">columns</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span> <span class="k">if</span> <span class="n">n_epochs</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="n">axes</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">measurements</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">):</span>
            <span class="k">break</span>

        <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">image_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'image_path'</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">image_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">'Image not found'</span><span class="p">,</span> 
                   <span class="n">ha</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>
            <span class="k">continue</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">wcs</span> <span class="o">=</span> <span class="n">create_cutout</span><span class="p">(</span>
                <span class="n">image_path</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">ra_deg</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">dec_deg</span><span class="p">,</span> <span class="n">size_arcmin</span>
            <span class="p">)</span>

            <span class="c1"># Z-scale normalization</span>
            <span class="n">interval</span> <span class="o">=</span> <span class="n">ZScaleInterval</span><span class="p">()</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">interval</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">ImageNormalize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>

            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">'lower'</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'gray'</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Epoch </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="se">\n</span><span class="s2">MJD: </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">'mjd'</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">'RA'</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">'Dec'</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="sa">f</span><span class="s1">'Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> 
                   <span class="n">ha</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">'center'</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

    <span class="c1"># Hide unused axes</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_epochs</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s1">'Postage Stamps: </span><span class="si">{</span><span class="n">source</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">source</span><span class="o">.</span><span class="n">source_id</span><span class="si">}</span><span class="s1">'</span><span class="p">,</span> 
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">save</span> <span class="ow">and</span> <span class="n">outfile</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">'tight'</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></p>
<h3 id="33-low-medium-priority-external-catalog-integration">3.3 Low-Medium Priority: External Catalog Integration<a class="headerlink" href="#33-low-medium-priority-external-catalog-integration" title="Permanent link">¶</a></h3>
<h4 id="why-adopt_2"><strong>Why Adopt</strong><a class="headerlink" href="#why-adopt_2" title="Permanent link">¶</a></h4>
<ul>
<li>Better source identification</li>
<li>Crossmatching with external surveys</li>
<li>Proper motion handling</li>
</ul>
<h4 id="implementation-strategy_2"><strong>Implementation Strategy</strong><a class="headerlink" href="#implementation-strategy_2" title="Permanent link">¶</a></h4>
<p><strong>Extend Catalog Query Module</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/catalog/external.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">astroquery.simbad</span><span class="w"> </span><span class="kn">import</span> <span class="n">Simbad</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astroquery.ipac.ned</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ned</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astroquery.gaia</span><span class="w"> </span><span class="kn">import</span> <span class="n">Gaia</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy.coordinates</span><span class="w"> </span><span class="kn">import</span> <span class="n">SkyCoord</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astropy</span><span class="w"> </span><span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">simbad_search</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">SkyCoord</span><span class="p">,</span>
    <span class="n">radius_arcsec</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Search SIMBAD for object at coordinates - adopted from VAST.</span>

<span class="sd">    See VAST Tools: vasttools/utils.py::simbad_search()</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">Simbad</span><span class="o">.</span><span class="n">add_votable_fields</span><span class="p">(</span><span class="s1">'ra(d)'</span><span class="p">,</span> <span class="s1">'dec(d)'</span><span class="p">,</span> <span class="s1">'typed_id'</span><span class="p">,</span> <span class="s1">'main_id'</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Simbad</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">radius_arcsec</span><span class="si">}</span><span class="s2">s"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"SIMBAD search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ned_search</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">SkyCoord</span><span class="p">,</span>
    <span class="n">radius_arcsec</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Search NED for object at coordinates."""</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Ned</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">radius_arcsec</span><span class="si">}</span><span class="s2">s"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"NED search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">gaia_search</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">SkyCoord</span><span class="p">,</span>
    <span class="n">radius_arcsec</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Search Gaia for astrometric data."""</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Convert to degrees</span>
        <span class="n">radius_deg</span> <span class="o">=</span> <span class="n">radius_arcsec</span> <span class="o">/</span> <span class="mf">3600.0</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">Gaia</span><span class="o">.</span><span class="n">launch_job_async</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"""</span>
<span class="s2">            SELECT *</span>
<span class="s2">            FROM gaiadr3.gaia_source</span>
<span class="s2">            WHERE 1=CONTAINS(</span>
<span class="s2">                POINT('ICRS', </span><span class="si">{</span><span class="n">coord</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">deg</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">coord</span><span class="o">.</span><span class="n">dec</span><span class="o">.</span><span class="n">deg</span><span class="si">}</span><span class="s2">),</span>
<span class="s2">                CIRCLE('ICRS', ra, dec, </span><span class="si">{</span><span class="n">radius_deg</span><span class="si">}</span><span class="s2">)</span>
<span class="s2">            )</span>
<span class="s2">            """</span>
        <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">get_results</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Gaia search failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="c1"># Add to Source class</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Source</span><span class="p">:</span>
    <span class="c1"># ... existing methods ...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">crossmatch_external</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""Crossmatch with external catalogs."""</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">results</span><span class="p">[</span><span class="s1">'simbad'</span><span class="p">]</span> <span class="o">=</span> <span class="n">simbad_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="s1">'ned'</span><span class="p">]</span> <span class="o">=</span> <span class="n">ned_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">)</span>
        <span class="n">results</span><span class="p">[</span><span class="s1">'gaia'</span><span class="p">]</span> <span class="o">=</span> <span class="n">gaia_search</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coord</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>
</code></pre></div></p>
<hr/>
<h2 id="4-implementation-roadmap">4. Implementation Roadmap<a class="headerlink" href="#4-implementation-roadmap" title="Permanent link">¶</a></h2>
<h3 id="phase-1-core-source-class-high-priority">Phase 1: Core Source Class (High Priority)<a class="headerlink" href="#phase-1-core-source-class-high-priority" title="Permanent link">¶</a></h3>
<p><strong>Timeline:</strong> 2-3 weeks</p>
<ol>
<li><strong>Week 1:</strong></li>
<li>Create <code>src/dsa110_contimg/photometry/source.py</code></li>
<li>Implement basic Source class with database loading</li>
<li>Add <code>coord</code>, <code>n_epochs</code>, <code>detections</code> properties</li>
<li>
<p>Unit tests</p>
</li>
<li>
<p><strong>Week 2:</strong></p>
</li>
<li>Adopt light curve plotting from VAST</li>
<li>Add ESE-specific features (baseline highlighting, ESE period highlighting)</li>
<li>
<p>Integration tests with real data</p>
</li>
<li>
<p><strong>Week 3:</strong></p>
</li>
<li>Add variability metrics calculation</li>
<li>Create <code>src/dsa110_contimg/photometry/variability.py</code></li>
<li>Update <code>variability_stats</code> table to include η metric</li>
<li>Documentation</li>
</ol>
<h3 id="phase-2-visualization-tools-medium-priority">Phase 2: Visualization Tools (Medium Priority)<a class="headerlink" href="#phase-2-visualization-tools-medium-priority" title="Permanent link">¶</a></h3>
<p><strong>Timeline:</strong> 2 weeks</p>
<ol>
<li><strong>Week 1:</strong></li>
<li>Create <code>src/dsa110_contimg/qa/postage_stamps.py</code></li>
<li>Implement cutout creation and grid visualization</li>
<li>
<p>Integration with Source class</p>
</li>
<li>
<p><strong>Week 2:</strong></p>
</li>
<li>Add to QA module</li>
<li>Create API endpoints for postage stamps</li>
<li>Documentation and examples</li>
</ol>
<h3 id="phase-3-external-catalog-integration-low-medium-priority">Phase 3: External Catalog Integration (Low-Medium Priority)<a class="headerlink" href="#phase-3-external-catalog-integration-low-medium-priority" title="Permanent link">¶</a></h3>
<p><strong>Timeline:</strong> 1-2 weeks</p>
<ol>
<li><strong>Week 1:</strong></li>
<li>Create <code>src/dsa110_contimg/catalog/external.py</code></li>
<li>Implement SIMBAD, NED, Gaia queries</li>
<li>
<p>Add to Source class</p>
</li>
<li>
<p><strong>Week 2:</strong></p>
</li>
<li>Integration tests</li>
<li>Documentation</li>
<li>API endpoints (optional)</li>
</ol>
<hr/>
<h2 id="5-code-examples-before-and-after">5. Code Examples: Before and After<a class="headerlink" href="#5-code-examples-before-and-after" title="Permanent link">¶</a></h2>
<h3 id="before-current-dsa-110">Before (Current DSA-110)<a class="headerlink" href="#before-current-dsa-110" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Current: Database queries only</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dsa110_contimg.api.data_access</span><span class="w"> </span><span class="kn">import</span> <span class="n">fetch_source_timeseries</span>

<span class="n">timeseries</span> <span class="o">=</span> <span class="n">fetch_source_timeseries</span><span class="p">(</span><span class="n">products_db</span><span class="p">,</span> <span class="s2">"NVSS J123456+420312"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">timeseries</span><span class="p">:</span>
    <span class="c1"># Manual plotting required</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">timeseries</span><span class="p">[</span><span class="s1">'mjd'</span><span class="p">],</span> <span class="n">timeseries</span><span class="p">[</span><span class="s1">'flux_jy'</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># Manual variability calculation</span>
    <span class="n">fluxes</span> <span class="o">=</span> <span class="n">timeseries</span><span class="p">[</span><span class="s1">'flux_jy'</span><span class="p">]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">fluxes</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">fluxes</span><span class="p">)</span>
</code></pre></div>
<h3 id="after-with-vast-patterns">After (With VAST Patterns)<a class="headerlink" href="#after-with-vast-patterns" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># New: Rich Source object</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dsa110_contimg.photometry.source</span><span class="w"> </span><span class="kn">import</span> <span class="n">Source</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span>
    <span class="n">source_id</span><span class="o">=</span><span class="s2">"NVSS J123456+420312"</span><span class="p">,</span>
    <span class="n">ra_deg</span><span class="o">=</span><span class="mf">123.456</span><span class="p">,</span>
    <span class="n">dec_deg</span><span class="o">=</span><span class="mf">42.0312</span><span class="p">,</span>
    <span class="n">products_db</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">"state/products.sqlite3"</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Automatic light curve plotting</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">plot_lightcurve</span><span class="p">(</span>
    <span class="n">highlight_baseline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">highlight_ese_period</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">"lightcurve.png"</span><span class="p">)</span>

<span class="c1"># Automatic variability metrics</span>
<span class="n">metrics</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">calc_variability_metrics</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"V: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">'v'</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">, η: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">'eta'</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># Postage stamps</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">show_all_cutouts</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">"postage_stamps.png"</span><span class="p">)</span>

<span class="c1"># External catalog crossmatch</span>
<span class="n">external</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">crossmatch_external</span><span class="p">()</span>
<span class="k">if</span> <span class="n">external</span><span class="p">[</span><span class="s1">'simbad'</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"SIMBAD name: </span><span class="si">{</span><span class="n">external</span><span class="p">[</span><span class="s1">'simbad'</span><span class="p">][</span><span class="s1">'MAIN_ID'</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>
<hr/>
<h2 id="6-integration-points">6. Integration Points<a class="headerlink" href="#6-integration-points" title="Permanent link">¶</a></h2>
<h3 id="61-api-integration">6.1 API Integration<a class="headerlink" href="#61-api-integration" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/api/routes.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dsa110_contimg.photometry.source</span><span class="w"> </span><span class="kn">import</span> <span class="n">Source</span>

<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/api/sources/</span><span class="si">{source_id}</span><span class="s2">/lightcurve"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_source_lightcurve</span><span class="p">(</span><span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Get light curve plot for a source."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">products_db</span><span class="o">=</span><span class="n">products_db</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">plot_lightcurve</span><span class="p">()</span>
    <span class="c1"># Convert to base64 or save to file</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">"image_url"</span><span class="p">:</span> <span class="s2">"/static/lightcurves/</span><span class="si">{source_id}</span><span class="s2">.png"</span><span class="p">}</span>

<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/api/sources/</span><span class="si">{source_id}</span><span class="s2">/postage_stamps"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_source_postage_stamps</span><span class="p">(</span><span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Get postage stamp grid for a source."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">products_db</span><span class="o">=</span><span class="n">products_db</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">show_all_cutouts</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">"image_url"</span><span class="p">:</span> <span class="s2">"/static/postage_stamps/</span><span class="si">{source_id}</span><span class="s2">.png"</span><span class="p">}</span>

<span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"/api/sources/</span><span class="si">{source_id}</span><span class="s2">/variability"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_source_variability</span><span class="p">(</span><span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Get variability metrics for a source."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">products_db</span><span class="o">=</span><span class="n">products_db</span><span class="p">)</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">calc_variability_metrics</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div>
<h3 id="62-ese-detection-integration">6.2 ESE Detection Integration<a class="headerlink" href="#62-ese-detection-integration" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/science/ese_detection.py</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dsa110_contimg.photometry.source</span><span class="w"> </span><span class="kn">import</span> <span class="n">Source</span>

<span class="k">def</span><span class="w"> </span><span class="nf">analyze_ese_candidate</span><span class="p">(</span><span class="n">source_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">products_db</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Analyze an ESE candidate using Source class."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">source_id</span><span class="p">,</span> <span class="n">products_db</span><span class="o">=</span><span class="n">products_db</span><span class="p">)</span>

    <span class="c1"># Get variability metrics</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">calc_variability_metrics</span><span class="p">()</span>

    <span class="c1"># Generate visualizations</span>
    <span class="n">lightcurve_fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">plot_lightcurve</span><span class="p">(</span>
        <span class="n">highlight_baseline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">highlight_ese_period</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">postage_fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">show_all_cutouts</span><span class="p">()</span>

    <span class="c1"># Crossmatch with external catalogs</span>
    <span class="n">external</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">crossmatch_external</span><span class="p">()</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">'metrics'</span><span class="p">:</span> <span class="n">metrics</span><span class="p">,</span>
        <span class="s1">'lightcurve_path'</span><span class="p">:</span> <span class="n">save_figure</span><span class="p">(</span><span class="n">lightcurve_fig</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2">_lc.png"</span><span class="p">),</span>
        <span class="s1">'postage_path'</span><span class="p">:</span> <span class="n">save_figure</span><span class="p">(</span><span class="n">postage_fig</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">source_id</span><span class="si">}</span><span class="s2">_stamps.png"</span><span class="p">),</span>
        <span class="s1">'external_catalogs'</span><span class="p">:</span> <span class="n">external</span>
    <span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="7-testing-strategy">7. Testing Strategy<a class="headerlink" href="#7-testing-strategy" title="Permanent link">¶</a></h2>
<h3 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># tests/unit/test_source.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_source_creation</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Test Source object creation."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span>
        <span class="n">source_id</span><span class="o">=</span><span class="s2">"TEST001"</span><span class="p">,</span>
        <span class="n">ra_deg</span><span class="o">=</span><span class="mf">123.0</span><span class="p">,</span>
        <span class="n">dec_deg</span><span class="o">=</span><span class="mf">45.0</span><span class="p">,</span>
        <span class="n">products_db</span><span class="o">=</span><span class="n">test_db</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">source</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">deg</span> <span class="o">==</span> <span class="mf">123.0</span>
    <span class="k">assert</span> <span class="n">source</span><span class="o">.</span><span class="n">coord</span><span class="o">.</span><span class="n">dec</span><span class="o">.</span><span class="n">deg</span> <span class="o">==</span> <span class="mf">45.0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_lightcurve_plotting</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Test light curve plotting."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">create_test_source_with_measurements</span><span class="p">()</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">plot_lightcurve</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">fig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_variability_metrics</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Test variability metric calculation."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">create_test_source_with_measurements</span><span class="p">()</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">calc_variability_metrics</span><span class="p">()</span>
    <span class="k">assert</span> <span class="s1">'v'</span> <span class="ow">in</span> <span class="n">metrics</span>
    <span class="k">assert</span> <span class="s1">'eta'</span> <span class="ow">in</span> <span class="n">metrics</span>
    <span class="k">assert</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">'n_epochs'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># tests/integration/test_source_integration.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_source_with_real_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">"""Test Source class with real products database."""</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span>
        <span class="n">source_id</span><span class="o">=</span><span class="s2">"NVSS J123456+420312"</span><span class="p">,</span>
        <span class="n">ra_deg</span><span class="o">=</span><span class="mf">123.456</span><span class="p">,</span>
        <span class="n">dec_deg</span><span class="o">=</span><span class="mf">42.0312</span><span class="p">,</span>
        <span class="n">products_db</span><span class="o">=</span><span class="n">real_products_db</span>
    <span class="p">)</span>

    <span class="c1"># Should load measurements</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">measurements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="c1"># Should generate plots</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">plot_lightcurve</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">fig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div>
<hr/>
<h2 id="8-dependencies">8. Dependencies<a class="headerlink" href="#8-dependencies" title="Permanent link">¶</a></h2>
<h3 id="new-dependencies-required">New Dependencies Required<a class="headerlink" href="#new-dependencies-required" title="Permanent link">¶</a></h3>
<ul>
<li><strong>astroquery</strong>: External catalog queries (SIMBAD, NED, Gaia)</li>
<li>Already used by VAST Tools</li>
<li>Add to <code>requirements.txt</code> or <code>pyproject.toml</code></li>
</ul>
<h3 id="optional-dependencies">Optional Dependencies<a class="headerlink" href="#optional-dependencies" title="Permanent link">¶</a></h3>
<ul>
<li><strong>bokeh</strong>: Interactive plots (if adopting Bokeh light curves)</li>
<li>VAST Tools uses Bokeh for interactive plots</li>
<li>Can start with matplotlib, add Bokeh later</li>
</ul>
<hr/>
<h2 id="9-migration-path">9. Migration Path<a class="headerlink" href="#9-migration-path" title="Permanent link">¶</a></h2>
<h3 id="step-1-add-source-class-non-breaking">Step 1: Add Source Class (Non-Breaking)<a class="headerlink" href="#step-1-add-source-class-non-breaking" title="Permanent link">¶</a></h3>
<ul>
<li>Create new <code>photometry/source.py</code> module</li>
<li>No changes to existing code</li>
<li>Can be used alongside existing database queries</li>
</ul>
<h3 id="step-2-update-variability-stats-database-migration">Step 2: Update Variability Stats (Database Migration)<a class="headerlink" href="#step-2-update-variability-stats-database-migration" title="Permanent link">¶</a></h3>
<ul>
<li>Add <code>eta_metric</code> column to <code>variability_stats</code> table</li>
<li>Update calculation code to include η metric</li>
<li>Backfill existing records</li>
</ul>
<h3 id="step-3-add-visualization-new-features">Step 3: Add Visualization (New Features)<a class="headerlink" href="#step-3-add-visualization-new-features" title="Permanent link">¶</a></h3>
<ul>
<li>Create <code>qa/postage_stamps.py</code></li>
<li>Add API endpoints</li>
<li>No breaking changes</li>
</ul>
<h3 id="step-4-external-catalogs-optional-enhancement">Step 4: External Catalogs (Optional Enhancement)<a class="headerlink" href="#step-4-external-catalogs-optional-enhancement" title="Permanent link">¶</a></h3>
<ul>
<li>Create <code>catalog/external.py</code></li>
<li>Add to Source class</li>
<li>No breaking changes</li>
</ul>
<hr/>
<h2 id="10-success-metrics">10. Success Metrics<a class="headerlink" href="#10-success-metrics" title="Permanent link">¶</a></h2>
<h3 id="quantitative">Quantitative<a class="headerlink" href="#quantitative" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Source Class Usage</strong>: Track adoption in codebase</li>
<li><strong>API Endpoint Usage</strong>: Monitor <code>/api/sources/*</code> endpoints</li>
<li><strong>Visualization Generation</strong>: Count light curve/postage stamp requests</li>
<li><strong>Variability Metrics</strong>: Track η metric usage vs. χ²</li>
</ul>
<h3 id="qualitative">Qualitative<a class="headerlink" href="#qualitative" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Developer Experience</strong>: Feedback on Source class usability</li>
<li><strong>ESE Analysis Workflow</strong>: Time saved in candidate analysis</li>
<li><strong>Code Quality</strong>: Reduction in duplicate plotting code</li>
</ul>
<hr/>
<h2 id="11-conclusion">11. Conclusion<a class="headerlink" href="#11-conclusion" title="Permanent link">¶</a></h2>
<p>Adopting VAST Tools patterns would significantly enhance DSA-110's ESE detection and source analysis capabilities. The Source class pattern provides a clean, object-oriented interface that encapsulates measurements, plotting, and analysis methods. Light curve plotting and postage stamp visualization are essential for ESE candidate verification and publication.</p>
<p><strong>Recommended Priority:</strong>
1. <strong>High</strong>: Source class + light curve plotting
2. <strong>Medium</strong>: Postage stamps + variability metrics
3. <strong>Low-Medium</strong>: External catalog integration</p>
<p><strong>Estimated Effort:</strong>
- Phase 1 (Core): 2-3 weeks
- Phase 2 (Visualization): 2 weeks
- Phase 3 (External Catalogs): 1-2 weeks
- <strong>Total</strong>: 5-7 weeks</p>
<p><strong>Risk Assessment:</strong>
- <strong>Low Risk</strong>: Adopting well-tested patterns from VAST Tools
- <strong>Non-Breaking</strong>: Can be added incrementally without breaking existing code
- <strong>High Value</strong>: Significantly improves ESE analysis workflow</p>
<hr/>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">¶</a></h2>
<ul>
<li>VAST Tools Repository: <code>/data/dsa110-contimg/archive/references/vast-tools</code></li>
<li>VAST Tools Review: <code>archive/references/vast-tools/VAST_TOOLS_CODEBASE_REVIEW.md</code></li>
<li>VAST Tools Analysis: <code>docs/analysis/VAST_TOOLS_REFERENCE_ANALYSIS.md</code></li>
<li>DSA-110 Database Schema: <code>docs/reference/database_schema.md</code></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.indexes", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
<script src="../../javascripts/mathjax.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../javascripts/mermaid-zoom.js"></script>
</body>
</html>