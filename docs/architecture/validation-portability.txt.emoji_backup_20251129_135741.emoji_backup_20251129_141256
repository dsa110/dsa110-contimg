```
Portability Architecture
========================

┌─────────────────────────────────────────────────────────────────┐
│                     Execution Environments                      │
├─────────────┬─────────────┬─────────────┬──────────────────────┤
│  VS Code    │   Terminal  │     CI      │      Docker          │
│  Tasks      │   (any dir) │   Pipeline  │      Container       │
└──────┬──────┴──────┬──────┴──────┬──────┴───────┬──────────────┘
       │             │              │              │
       │             │              │              │
       └─────────────┴──────────────┴──────────────┘
                          │
                          ▼
       ┌──────────────────────────────────────────┐
       │     Auto-Detection Logic                 │
       │  ┌────────────────────────────────────┐  │
       │  │ SCRIPT_DIR = $(dirname $0)         │  │
       │  │ PROJECT_ROOT = dirname(SCRIPT_DIR) │  │
       │  └────────────────────────────────────┘  │
       │         or use $1 if provided            │
       └──────────────────┬───────────────────────┘
                          │
                          ▼
       ┌──────────────────────────────────────────┐
       │      Validation Scripts                  │
       │  ┌────────────────────────────────────┐  │
       │  │ preflight-check.sh                 │  │
       │  │ validate-script-refs.sh            │  │
       │  │ check-environment.sh               │  │
       │  └────────────────────────────────────┘  │
       │  All use $PROJECT_ROOT variable          │
       └──────────────────┬───────────────────────┘
                          │
                          ▼
       ┌──────────────────────────────────────────┐
       │      Project Structure                   │
       │  ┌────────────────────────────────────┐  │
       │  │ $PROJECT_ROOT/                     │  │
       │  │ ├── frontend/                      │  │
       │  │ │   ├── node_modules/              │  │
       │  │ │   ├── package.json               │  │
       │  │ │   └── scripts/                   │  │
       │  │ ├── backend/                       │  │
       │  │ │   └── src/                       │  │
       │  │ ├── ops/systemd/                   │  │
       │  │ └── scripts/                       │  │
       │  └────────────────────────────────────┘  │
       └──────────────────────────────────────────┘


Key Features
============

:check_mark: No hardcoded paths
:check_mark: Works from any working directory
:check_mark: Accepts explicit PROJECT_ROOT parameter
:check_mark: Auto-detects from script location
:check_mark: Backward compatible


Usage Patterns
==============

1. Auto-detection (from anywhere):
   $ /path/to/scripts/preflight-check.sh

2. Explicit root:
   $ /path/to/scripts/preflight-check.sh /custom/root

3. From project directory:
   $ ./scripts/preflight-check.sh

4. In CI:
   $ scripts/validate-script-refs.sh

5. In Docker:
   COPY scripts/ /app/scripts/
   RUN /app/scripts/preflight-check.sh /app
```
