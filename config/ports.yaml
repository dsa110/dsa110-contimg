# DSA-110 Port Configuration Example
# Copy this file to ports.yaml and customize for your environment

ports:
  # Core Application Services (8000-8099)
  api:
    default: 8000
    env_var: CONTIMG_API_PORT
    description: "Backend FastAPI server"
    range: [8000, 8009]

  docs:
    default: 8001
    env_var: CONTIMG_DOCS_PORT
    description: "MkDocs documentation server"
    range: [8001, 8001]

  # Development Servers (5000-5199)
  frontend_dev:
    default: 3210
    env_var: CONTIMG_FRONTEND_DEV_PORT
    description: "Vite development server (primary)"
    range: [3210, 3210]

  # Dashboard Services (3200-3299)
  dashboard:
    default: 3210
    env_var: CONTIMG_DASHBOARD_PORT
    description: "Script-managed dashboard"
    range: [3210, 3220] # Auto-fallback range

  dashboard_docker:
    default: 3000
    env_var: CONTIMG_DASHBOARD_DOCKER_PORT
    description: "Docker production dashboard"
    range: [3000, 3000]
    conflict_check: true # Warn if Grafana detected

  # External Integrations (9000-9099)
  mcp_http:
    default: 3111
    env_var: CONTIMG_MCP_HTTP_PORT
    description: "Browser MCP HTTP server"
    range: [3111, 3111]

  mcp_ws:
    default: 9009
    env_var: null # Hardcoded in extension
    description: "Browser MCP WebSocket (hardcoded)"
    range: [9009, 9009]
    immutable: true

  # Optional Services (6000-6099)
  redis:
    default: 6379
    env_var: REDIS_PORT
    description: "Redis cache backend"
    range: [6379, 6379]
    optional: true

# Reserved ports (external services)
reserved:
  - port: 3000
    service: "Grafana (external)"
    note: "Check before using dashboard_docker"
  - port: 8080
    service: "Pipeline (external Docker)"
    note: "External service, not managed"
