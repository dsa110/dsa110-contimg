@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   GitHub-inspired Dark Theme (from legacy.frontend)
   Optimized for astronomers working at night
   ============================================ */

/* Custom CSS Variables for theme colors */
:root {
  /* Background colors */
  --color-bg-default: #0d1117;
  --color-bg-paper: #161b22;
  --color-bg-surface: #21262d;
  --color-border: #30363d;

  /* Primary - Blue */
  --color-primary: #58a6ff;
  --color-primary-light: #79c0ff;
  --color-primary-dark: #1f6feb;

  /* Secondary */
  --color-secondary: #a5d6ff;

  /* Status colors */
  --color-success: #3fb950;
  --color-success-light: #7ee787;
  --color-success-dark: #238636;

  --color-warning: #d29922;
  --color-warning-light: #ffa657;
  --color-warning-dark: #9e6a03;

  --color-error: #f85149;
  --color-error-light: #ff7b72;
  --color-error-dark: #da3633;

  --color-info: #79c0ff;

  /* Text colors */
  --color-text-primary: #c9d1d9;
  --color-text-secondary: #8b949e;
  --color-text-disabled: #6e7681;

  /* Shadows */
  --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  --card-shadow-hover: 0 8px 16px rgba(0, 0, 0, 0.4);
}

/* Custom component classes */
@layer base {
  body {
    background-color: var(--color-bg-default);
    color: var(--color-text-primary);
    font-family: "Inter", "Roboto", "Helvetica", "Arial", sans-serif;
  }

  /* Default link color */
  a {
    color: var(--color-primary);
  }

  a:hover {
    color: var(--color-primary-light);
  }
}

@layer components {
  /* ============================================
     BUTTONS - GitHub-inspired dark theme
     ============================================ */
  .btn {
    @apply px-4 py-2 font-medium transition-all duration-200 border;
    border-radius: 6px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .btn:focus {
    @apply outline-none ring-2 ring-offset-2;
    --tw-ring-offset-color: var(--color-bg-default);
  }

  .btn:active {
    transform: translateY(1px);
    box-shadow: none;
  }

  /* Primary - Blue */
  .btn-primary {
    background-color: var(--color-primary-dark);
    border-color: var(--color-primary-dark);
    color: white;
  }

  .btn-primary:hover {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .btn-primary:focus {
    --tw-ring-color: var(--color-primary);
  }

  /* Secondary - Subtle dark */
  .btn-secondary {
    background-color: var(--color-bg-surface);
    border-color: var(--color-border);
    color: var(--color-text-primary);
  }

  .btn-secondary:hover {
    background-color: var(--color-border);
    border-color: var(--color-border);
  }

  .btn-secondary:focus {
    --tw-ring-color: var(--color-border);
  }

  /* Success - Green */
  .btn-success {
    background-color: var(--color-success-dark);
    border-color: var(--color-success-dark);
    color: white;
  }

  .btn-success:hover {
    background-color: var(--color-success);
    border-color: var(--color-success);
  }

  .btn-success:focus {
    --tw-ring-color: var(--color-success);
  }

  /* Danger - Red */
  .btn-danger {
    background-color: var(--color-error-dark);
    border-color: var(--color-error-dark);
    color: white;
  }

  .btn-danger:hover {
    background-color: var(--color-error);
    border-color: var(--color-error);
  }

  .btn-danger:focus {
    --tw-ring-color: var(--color-error);
  }

  /* Info - Light Blue */
  .btn-info {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-bg-default);
  }

  .btn-info:hover {
    background-color: var(--color-primary-light);
    border-color: var(--color-primary-light);
  }

  /* Warning - Yellow/Orange */
  .btn-warning {
    background-color: var(--color-warning-dark);
    border-color: var(--color-warning-dark);
    color: white;
  }

  .btn-warning:hover {
    background-color: var(--color-warning);
    border-color: var(--color-warning);
  }

  /* Outline variants */
  .btn-outline-primary {
    background-color: transparent;
    border-color: var(--color-primary);
    color: var(--color-primary);
  }

  .btn-outline-primary:hover {
    background-color: var(--color-primary);
    color: white;
  }

  .btn-outline-secondary {
    background-color: transparent;
    border-color: var(--color-border);
    color: var(--color-text-primary);
  }

  .btn-outline-secondary:hover {
    background-color: var(--color-bg-surface);
  }

  /* Small button */
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  /* Large button */
  .btn-lg {
    @apply px-6 py-3 text-lg;
  }

  /* ============================================
     CARDS - GitHub dark theme style (borderless)
     ============================================ */
  .card {
    background-color: var(--color-bg-paper);
    border: none;
    border-radius: 8px;
    box-shadow: var(--card-shadow);
    transition: box-shadow 0.2s ease-in-out;
  }

  .card:hover {
    box-shadow: var(--card-shadow-hover);
  }

  .card-header {
    @apply px-4 py-3 font-semibold;
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
    border-bottom: none;
    border-radius: 8px 8px 0 0;
  }

  .card-header-alt {
    @apply px-4 py-3 font-semibold;
    background-color: var(--color-primary-dark);
    color: white;
    border-radius: 8px 8px 0 0;
  }

  .card-body {
    @apply p-4;
    color: var(--color-text-primary);
  }

  .card-footer {
    @apply px-4 py-3;
    background-color: var(--color-bg-surface);
    border-top: none;
    border-radius: 0 0 8px 8px;
  }

  /* ============================================
     TEXT UTILITY CLASSES - Semantic naming for common patterns
     Reduces duplication of dark mode aware text styles
     ============================================ */

  /** Muted text - for secondary/supporting content */
  .text-muted {
    @apply text-gray-600 dark:text-gray-400;
  }

  /** Hint text - for descriptions, captions, metadata */
  .text-hint {
    @apply text-sm text-gray-500 dark:text-gray-400;
  }

  /** Label text - for form labels and section headers */
  .label-text {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300;
  }

  /** Caption text - for timestamps, counts, minor details */
  .text-caption {
    @apply text-xs text-gray-500 dark:text-gray-400;
  }

  /** Disabled text - for inactive/disabled states */
  .text-disabled {
    @apply text-gray-400 dark:text-gray-500;
  }

  /* ============================================
     BADGES/TAGS - GitHub dark theme
     ============================================ */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }

  /* Success - Green */
  .badge-success,
  .badge-final {
    background-color: var(--color-success-dark);
    color: white;
  }

  /* Info - Blue */
  .badge-info,
  .badge-chi2 {
    background-color: var(--color-primary-dark);
    color: white;
  }

  /* Error - Red */
  .badge-error,
  .badge-peak {
    background-color: var(--color-error-dark);
    color: white;
  }

  /* Warning - Yellow */
  .badge-warning {
    background-color: var(--color-warning-dark);
    color: white;
  }

  /* Gray/default */
  .badge-gray,
  .badge-secondary {
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  /* Primary badge - Blue */
  .badge-primary {
    background-color: var(--color-primary-dark);
    color: white;
  }

  /* Dark badge */
  .badge-dark {
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  /* Outline badges */
  .badge-outline-success {
    background-color: transparent;
    border: 1px solid var(--color-success);
    color: var(--color-success);
  }

  .badge-outline-info {
    background-color: transparent;
    border: 1px solid var(--color-primary);
    color: var(--color-primary);
  }

  .badge-outline-error {
    background-color: transparent;
    border: 1px solid var(--color-error);
    color: var(--color-error);
  }

  /* ============================================
     TABLES - GitHub dark theme
     ============================================ */
  .table {
    @apply min-w-full border-collapse;
    border: 1px solid var(--color-border);
  }

  .table th {
    @apply px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider;
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  /* Alternating header accent */
  .table th:nth-child(even) {
    background-color: var(--color-bg-paper);
  }

  .table td {
    @apply px-4 py-3 text-sm;
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
  }

  /* Striped rows */
  .table tbody tr:nth-child(odd) {
    background-color: var(--color-bg-paper);
  }

  .table tbody tr:nth-child(even) {
    background-color: var(--color-bg-default);
  }

  /* Hover effect */
  .table tbody tr:hover {
    background-color: var(--color-bg-surface);
  }

  /* Table variants */
  .table-compact th,
  .table-compact td {
    @apply px-3 py-2 text-xs;
  }

  .table-borderless,
  .table-borderless th,
  .table-borderless td {
    border: none;
  }

  /* ============================================
     FORMS - GitHub dark theme
     ============================================ */
  .form-container {
    @apply mx-auto rounded-lg p-6;
    width: 85%;
    max-width: 800px;
    background-color: var(--color-bg-paper);
    border: 1px solid var(--color-border);
    box-shadow: var(--card-shadow);
  }

  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium mb-1;
    color: var(--color-text-primary);
  }

  .form-control,
  .input {
    @apply block w-full px-3 py-2 rounded-md border text-sm;
    background-color: var(--color-bg-default);
    border-color: var(--color-border);
    color: var(--color-text-primary);
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }

  .form-control::placeholder,
  .input::placeholder {
    color: var(--color-text-disabled);
  }

  .form-control:focus,
  .input:focus {
    @apply outline-none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.25);
  }

  .form-control:disabled,
  .input:disabled {
    background-color: var(--color-bg-surface);
    color: var(--color-text-disabled);
    cursor: not-allowed;
  }

  .form-select {
    @apply block w-full px-3 py-2 rounded-md border text-sm;
    background-color: var(--color-bg-default);
    border-color: var(--color-border);
    color: var(--color-text-primary);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%238B949E' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  .form-select:focus {
    @apply outline-none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.25);
  }

  .form-check {
    @apply flex items-center gap-2;
  }

  .form-check-input {
    @apply w-4 h-4 rounded;
    border-color: var(--color-border);
    accent-color: var(--color-primary);
  }

  .form-text {
    @apply text-xs mt-1;
    color: var(--color-text-secondary);
  }

  /* Invalid state */
  .is-invalid {
    border-color: var(--color-error) !important;
  }

  .is-invalid:focus {
    border-color: var(--color-error);
    box-shadow: 0 0 0 3px rgba(248, 81, 73, 0.25);
  }

  .invalid-feedback {
    @apply text-xs mt-1;
    color: var(--color-error);
  }

  /* ============================================
     HEADERS - GitHub dark theme
     ============================================ */
  .page-header {
    @apply py-4 px-6 mb-6;
    background-color: var(--color-bg-paper);
    border-bottom: 1px solid var(--color-border);
    color: var(--color-text-primary);
  }

  .page-header-alt {
    @apply py-4 px-6 mb-6;
    background-color: var(--color-primary-dark);
    color: white;
  }

  .section-header {
    @apply text-lg font-semibold py-2 px-4 rounded-t;
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border);
    border-bottom: none;
  }

  .section-header-alt {
    @apply text-lg font-semibold py-2 px-4 rounded-t;
    background-color: var(--color-primary-dark);
    color: white;
  }

  /* ============================================
     LINKS - GitHub dark theme
     ============================================ */
  .link {
    color: var(--color-primary);
    @apply hover:underline;
  }

  .link:hover {
    color: var(--color-primary-light);
  }

  /* External link with icon */
  .external-link {
    @apply inline-flex items-center gap-1;
    color: var(--color-primary);
  }

  .external-link:hover {
    color: var(--color-primary-light);
    @apply underline;
  }

  .external-link::after {
    content: "";
    @apply inline-block w-3 h-3 bg-current;
    -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'/%3E%3C/svg%3E")
      center/contain no-repeat;
    mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'/%3E%3C/svg%3E")
      center/contain no-repeat;
  }

  /* ============================================
     ALERTS - GitHub dark theme
     ============================================ */
  .alert {
    @apply px-4 py-3 rounded-lg border mb-4;
  }

  .alert-success {
    background-color: rgba(63, 185, 80, 0.15);
    border-color: var(--color-success-dark);
    color: var(--color-success-light);
  }

  .alert-danger {
    background-color: rgba(248, 81, 73, 0.15);
    border-color: var(--color-error-dark);
    color: var(--color-error-light);
  }

  .alert-warning {
    background-color: rgba(210, 153, 34, 0.15);
    border-color: var(--color-warning-dark);
    color: var(--color-warning-light);
  }

  .alert-info {
    background-color: rgba(88, 166, 255, 0.15);
    border-color: var(--color-primary-dark);
    color: var(--color-primary-light);
  }

  /* ============================================
     SIDEBAR / NAVIGATION - GitHub dark theme
     ============================================ */
  .sticky-sidebar {
    @apply space-y-6;
  }

  .nav-pills {
    @apply flex flex-col gap-1;
  }

  .nav-pills .nav-link {
    @apply px-3 py-2 rounded text-sm;
    color: var(--color-text-secondary);
  }

  .nav-pills .nav-link:hover {
    background-color: var(--color-bg-surface);
    color: var(--color-text-primary);
  }

  .nav-pills .nav-link.active {
    background-color: var(--color-primary-dark);
    color: white;
  }
}

/* Custom utility classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* ============================================
     TEXT UTILITIES - Consolidated styling patterns
     Reduces repeated className strings throughout components
     ============================================ */

  /* Muted text - secondary information */
  .text-muted {
    @apply text-gray-600 dark:text-gray-400;
  }

  /* Hint text - small secondary text for descriptions */
  .text-hint {
    @apply text-sm text-gray-500 dark:text-gray-400;
  }

  /* Label text - form labels and small headings */
  .label-text {
    @apply text-sm font-medium text-gray-700 dark:text-gray-300;
  }

  /* Section title - subsection headings */
  .section-title {
    @apply text-lg font-semibold text-gray-900 dark:text-gray-100;
  }

  /* Stat value - large numeric displays */
  .stat-value {
    @apply text-2xl font-bold text-gray-900 dark:text-gray-100;
  }

  /* Stat label - labels for stat values */
  .stat-label {
    @apply text-sm text-gray-500 dark:text-gray-400;
  }

  /* Code/mono text - for paths, IDs, technical values */
  .text-mono {
    @apply font-mono text-sm text-gray-600 dark:text-gray-400;
  }

  /* Truncate with ellipsis */
  .text-truncate {
    @apply truncate;
  }

  /* Interactive text link style */
  .text-link {
    @apply text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 cursor-pointer;
  }
}

/* Sticky sidebar behavior - responsive */
@media (min-width: 1024px) {
  .sticky-sidebar {
    position: sticky;
    top: 1.5rem;
    max-height: calc(100vh - 3rem);
    overflow-y: auto;
  }
}

/* Rating/Action card responsive behavior */
/* Desktop (â‰¥1059px): Rating card sticky on right */
@media (min-width: 1059px) {
  .rating-side-card {
    position: sticky;
    top: 1rem;
    max-width: 350px;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
  }
}

/* Mobile (<1059px): Rating card moves to top, full width */
@media (max-width: 1058px) {
  .rating-card-container {
    order: -1;
    position: sticky;
    top: 0;
    z-index: 50;
    width: 100%;
    background: var(--color-bg-paper);
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--color-border);
  }
}

/* Loading spinner animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 0.75s linear infinite;
}

/* Widget styles - GitHub dark theme */
.widget-container {
  background-color: var(--color-bg-paper);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  box-shadow: var(--card-shadow);
  overflow: hidden;
}

.widget-header {
  @apply px-4 py-3 flex items-center justify-between;
  background-color: var(--color-bg-surface);
  border-bottom: 1px solid var(--color-border);
}

.widget-title {
  @apply text-sm font-medium;
  color: var(--color-text-primary);
}

.widget-body {
  @apply p-4;
  color: var(--color-text-primary);
}

/* Aladin Lite overrides */
.aladin-container .aladin-fov,
.aladin-container .aladin-location {
  font-size: 11px !important;
}

/* Range slider track */
input[type="range"]::-webkit-slider-runnable-track {
  @apply bg-transparent;
}

input[type="range"]::-moz-range-track {
  @apply bg-transparent;
}
