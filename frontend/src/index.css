@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   VASTER-inspired Visual Design System
   Colors: Green (#4fc3a1), Dark Blue (#324960)
   ============================================ */

/* Custom CSS Variables for theme colors */
:root {
  --color-primary-green: #4fc3a1;
  --color-primary-green-dark: #3da88a;
  --color-primary-blue: #324960;
  --color-primary-blue-dark: #263a4d;
  --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  --card-shadow-hover: 0 6px 12px rgba(0, 0, 0, 0.25);
}

/* Custom component classes */
@layer base {
  body {
    @apply bg-gray-100 text-gray-900;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
      sans-serif;
  }
}

@layer components {
  /* ============================================
     BUTTONS - Bootstrap-style variants
     ============================================ */
  .btn {
    @apply px-4 py-2 rounded font-medium transition-all duration-200 border;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .btn:focus {
    @apply outline-none ring-2 ring-offset-2;
  }

  .btn:active {
    transform: translateY(1px);
    box-shadow: none;
  }

  /* Primary - Green */
  .btn-primary {
    background-color: var(--color-primary-green);
    border-color: var(--color-primary-green);
    @apply text-white;
  }

  .btn-primary:hover {
    background-color: var(--color-primary-green-dark);
    border-color: var(--color-primary-green-dark);
  }

  .btn-primary:focus {
    --tw-ring-color: var(--color-primary-green);
  }

  /* Secondary - Dark Blue */
  .btn-secondary {
    background-color: var(--color-primary-blue);
    border-color: var(--color-primary-blue);
    @apply text-white;
  }

  .btn-secondary:hover {
    background-color: var(--color-primary-blue-dark);
    border-color: var(--color-primary-blue-dark);
  }

  .btn-secondary:focus {
    --tw-ring-color: var(--color-primary-blue);
  }

  /* Success - Green variant */
  .btn-success {
    @apply bg-green-600 border-green-600 text-white hover:bg-green-700 hover:border-green-700;
  }

  .btn-success:focus {
    @apply ring-green-500;
  }

  /* Danger - Red */
  .btn-danger {
    @apply bg-red-600 border-red-600 text-white hover:bg-red-700 hover:border-red-700;
  }

  .btn-danger:focus {
    @apply ring-red-500;
  }

  /* Info - Blue */
  .btn-info {
    @apply bg-blue-500 border-blue-500 text-white hover:bg-blue-600 hover:border-blue-600;
  }

  /* Warning - Yellow/Orange */
  .btn-warning {
    @apply bg-yellow-500 border-yellow-500 text-white hover:bg-yellow-600 hover:border-yellow-600;
  }

  /* Outline variants */
  .btn-outline-primary {
    background-color: transparent;
    border-color: var(--color-primary-green);
    color: var(--color-primary-green);
  }

  .btn-outline-primary:hover {
    background-color: var(--color-primary-green);
    @apply text-white;
  }

  .btn-outline-secondary {
    background-color: transparent;
    border-color: var(--color-primary-blue);
    color: var(--color-primary-blue);
  }

  .btn-outline-secondary:hover {
    background-color: var(--color-primary-blue);
    @apply text-white;
  }

  /* Small button */
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  /* Large button */
  .btn-lg {
    @apply px-6 py-3 text-lg;
  }

  /* ============================================
     CARDS - Box shadow style from VASTER
     ============================================ */
  .card {
    @apply bg-white rounded-lg border border-gray-200;
    box-shadow: var(--card-shadow);
    transition: box-shadow 0.2s ease-in-out;
  }

  .card:hover {
    box-shadow: var(--card-shadow-hover);
  }

  .card-header {
    @apply px-4 py-3 border-b border-gray-200 font-semibold;
    background-color: var(--color-primary-blue);
    color: white;
    border-radius: 0.5rem 0.5rem 0 0;
  }

  .card-header-alt {
    @apply px-4 py-3 border-b border-gray-200 font-semibold;
    background-color: var(--color-primary-green);
    color: white;
    border-radius: 0.5rem 0.5rem 0 0;
  }

  .card-body {
    @apply p-4;
  }

  .card-footer {
    @apply px-4 py-3 border-t border-gray-200 bg-gray-50;
    border-radius: 0 0 0.5rem 0.5rem;
  }

  /* ============================================
     BADGES/TAGS - Colored by type
     ============================================ */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }

  /* Final - Green */
  .badge-success,
  .badge-final {
    @apply bg-green-500 text-white;
  }

  /* Chi² - Blue */
  .badge-info,
  .badge-chi2 {
    @apply bg-blue-500 text-white;
  }

  /* Peak - Red */
  .badge-error,
  .badge-peak {
    @apply bg-red-500 text-white;
  }

  /* Warning - Yellow */
  .badge-warning {
    @apply bg-yellow-500 text-white;
  }

  /* Gray/default */
  .badge-gray,
  .badge-secondary {
    @apply bg-gray-500 text-white;
  }

  /* Primary badge - Green */
  .badge-primary {
    background-color: var(--color-primary-green);
    @apply text-white;
  }

  /* Dark badge - Blue */
  .badge-dark {
    background-color: var(--color-primary-blue);
    @apply text-white;
  }

  /* Outline badges */
  .badge-outline-success {
    @apply bg-transparent border border-green-500 text-green-600;
  }

  .badge-outline-info {
    @apply bg-transparent border border-blue-500 text-blue-600;
  }

  .badge-outline-error {
    @apply bg-transparent border border-red-500 text-red-600;
  }

  /* ============================================
     TABLES - Bootstrap striped + bordered + hover
     ============================================ */
  .table {
    @apply min-w-full border-collapse;
    border: 1px solid #dee2e6;
  }

  .table th {
    @apply px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider;
    background-color: var(--color-primary-blue);
    color: white;
    border: 1px solid #dee2e6;
  }

  /* Alternating header colors */
  .table th:nth-child(even) {
    background-color: var(--color-primary-green);
  }

  .table td {
    @apply px-4 py-3 text-sm text-gray-900;
    border: 1px solid #dee2e6;
  }

  /* Striped rows */
  .table tbody tr:nth-child(odd) {
    @apply bg-white;
  }

  .table tbody tr:nth-child(even) {
    @apply bg-gray-50;
  }

  /* Hover effect */
  .table tbody tr:hover {
    @apply bg-blue-50;
  }

  /* Table variants */
  .table-compact th,
  .table-compact td {
    @apply px-3 py-2 text-xs;
  }

  .table-borderless,
  .table-borderless th,
  .table-borderless td {
    border: none;
  }

  /* ============================================
     FORMS - 85% width, light gray bg, rounded
     ============================================ */
  .form-container {
    @apply mx-auto rounded-lg p-6;
    width: 85%;
    max-width: 800px;
    background-color: #f8f9fa;
    box-shadow: var(--card-shadow);
  }

  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  .form-control,
  .input {
    @apply block w-full px-3 py-2 rounded-md border border-gray-300 text-sm;
    background-color: white;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }

  .form-control:focus,
  .input:focus {
    @apply outline-none;
    border-color: var(--color-primary-green);
    box-shadow: 0 0 0 3px rgba(79, 195, 161, 0.25);
  }

  .form-control:disabled,
  .input:disabled {
    @apply bg-gray-100 cursor-not-allowed;
  }

  .form-select {
    @apply block w-full px-3 py-2 rounded-md border border-gray-300 text-sm bg-white;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  .form-select:focus {
    @apply outline-none;
    border-color: var(--color-primary-green);
    box-shadow: 0 0 0 3px rgba(79, 195, 161, 0.25);
  }

  .form-check {
    @apply flex items-center gap-2;
  }

  .form-check-input {
    @apply w-4 h-4 rounded border-gray-300;
    accent-color: var(--color-primary-green);
  }

  .form-text {
    @apply text-xs text-gray-500 mt-1;
  }

  /* Invalid state */
  .is-invalid {
    @apply border-red-500;
  }

  .is-invalid:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.25);
  }

  .invalid-feedback {
    @apply text-xs text-red-600 mt-1;
  }

  /* ============================================
     HEADERS - Theme colors
     ============================================ */
  .page-header {
    @apply py-4 px-6 mb-6;
    background-color: var(--color-primary-blue);
    color: white;
  }

  .page-header-alt {
    @apply py-4 px-6 mb-6;
    background-color: var(--color-primary-green);
    color: white;
  }

  .section-header {
    @apply text-lg font-semibold py-2 px-4 rounded-t;
    background-color: var(--color-primary-blue);
    color: white;
  }

  .section-header-alt {
    @apply text-lg font-semibold py-2 px-4 rounded-t;
    background-color: var(--color-primary-green);
    color: white;
  }

  /* ============================================
     LINKS
     ============================================ */
  .link {
    color: var(--color-primary-green);
    @apply hover:underline;
  }

  .link:hover {
    color: var(--color-primary-green-dark);
  }

  /* External link with icon */
  .external-link {
    @apply inline-flex items-center gap-1;
    color: var(--color-primary-green);
  }

  .external-link:hover {
    color: var(--color-primary-green-dark);
    @apply underline;
  }

  .external-link::after {
    content: "";
    @apply inline-block w-3 h-3 bg-current;
    -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'/%3E%3C/svg%3E")
      center/contain no-repeat;
    mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14'/%3E%3C/svg%3E")
      center/contain no-repeat;
  }

  /* ============================================
     ALERTS
     ============================================ */
  .alert {
    @apply px-4 py-3 rounded-lg border mb-4;
  }

  .alert-success {
    @apply bg-green-50 border-green-200 text-green-800;
  }

  .alert-danger {
    @apply bg-red-50 border-red-200 text-red-800;
  }

  .alert-warning {
    @apply bg-yellow-50 border-yellow-200 text-yellow-800;
  }

  .alert-info {
    @apply bg-blue-50 border-blue-200 text-blue-800;
  }

  /* ============================================
     SIDEBAR / NAVIGATION
     ============================================ */
  .sticky-sidebar {
    @apply space-y-6;
  }

  .nav-pills {
    @apply flex flex-col gap-1;
  }

  .nav-pills .nav-link {
    @apply px-3 py-2 rounded text-sm text-gray-700 hover:bg-gray-100;
  }

  .nav-pills .nav-link.active {
    background-color: var(--color-primary-green);
    @apply text-white;
  }
}

/* Custom utility classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* Sticky sidebar behavior - responsive */
@media (min-width: 1024px) {
  .sticky-sidebar {
    position: sticky;
    top: 1.5rem;
    max-height: calc(100vh - 3rem);
    overflow-y: auto;
  }
}

/* Rating/Action card responsive behavior */
/* Desktop (≥1059px): Rating card sticky on right */
@media (min-width: 1059px) {
  .rating-side-card {
    position: sticky;
    top: 1rem;
    max-width: 350px;
    max-height: calc(100vh - 2rem);
    overflow-y: auto;
  }
}

/* Mobile (<1059px): Rating card moves to top, full width */
@media (max-width: 1058px) {
  .rating-card-container {
    order: -1;
    position: sticky;
    top: 0;
    z-index: 50;
    width: 100%;
    background: white;
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid theme("colors.gray.200");
  }
}

/* Loading spinner animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.animate-spin {
  animation: spin 0.75s linear infinite;
}

/* Widget styles */
.widget-container {
  @apply bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden;
}

.widget-header {
  @apply px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between;
}

.widget-title {
  @apply text-sm font-medium text-gray-700;
}

.widget-body {
  @apply p-4;
}

/* Aladin Lite overrides */
.aladin-container .aladin-fov,
.aladin-container .aladin-location {
  font-size: 11px !important;
}

/* Range slider track */
input[type="range"]::-webkit-slider-runnable-track {
  @apply bg-transparent;
}

input[type="range"]::-moz-range-track {
  @apply bg-transparent;
}
