<!DOCTYPE html>
<html>
<head>
    <title>Mermaid Debug Test</title>
    <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
    <h1>Mermaid Debug Test</h1>
    <div class="mermaid">
flowchart TB
    A[Start] --> B[End]
    </div>
    
    <script>
        console.log('1. Script start - mermaid available?', typeof window.mermaid);
        console.log('2. mermaid.run available?', typeof window.mermaid?.run);
        console.log('3. mermaid.init available?', typeof window.mermaid?.init);
        
        // Simulate plugin initialize
        if (window.mermaid) {
            mermaid.initialize({
                theme: "default"
            });
            console.log('4. After initialize - mermaid.run available?', typeof window.mermaid?.run);
            
            // Try to render
            setTimeout(() => {
                const elements = document.querySelectorAll('.mermaid');
                console.log('5. Found elements:', elements.length);
                
                if (typeof mermaid.run === 'function') {
                    console.log('6. Calling mermaid.run()...');
                    mermaid.run({
                        nodes: Array.from(elements)
                    }).then(() => {
                        console.log('7. SUCCESS: mermaid.run() completed');
                        const svgs = document.querySelectorAll('svg.mermaid');
                        console.log('8. SVGs rendered:', svgs.length);
                    }).catch(err => {
                        console.error('9. ERROR in mermaid.run():', err);
                    });
                } else {
                    console.error('10. mermaid.run() not available');
                }
            }, 500);
        }
    </script>
</body>
</html>

