import{u as x,j as e,L as i}from"./index-QIbW7jSm.js";import{E as g,C as t,P as p,a as h}from"./CoordinateDisplay-n0AKJp6D.js";import{Q as j}from"./QAMetrics-C91q5VRH.js";import{a as b}from"./provenanceMappers-Dk7u1RY2.js";import{r as u}from"./relativeTime-Dp84ug83.js";import{d as _}from"./useQueries-DXoBdv9i.js";const C=()=>{const{"*":s}=x(),{data:a,isLoading:l,error:n,refetch:c}=_(s);if(l)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-pulse text-gray-500",children:"Loading Measurement Set details..."})});if(n)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(g,{error:n,onRetry:()=>c()})});if(!a||!s)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs(t,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Measurement Set not found."}),e.jsx(i,{to:"/images",className:"link",children:"Back to Images"})]})});const d=b({path:a.path,pointing_ra_deg:a.pointing_ra_deg,pointing_dec_deg:a.pointing_dec_deg,created_at:a.created_at,qa_grade:a.qa_grade,calibrator_matches:a.calibrator_matches}),o=a.path.split("/").pop()||s;return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(i,{to:"/images",className:"text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block",children:"Back to Images"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:o}),e.jsx(p,{...d})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.qa_grade&&e.jsx(t,{title:"Quality",children:e.jsx(j,{grade:a.qa_grade,summary:a.qa_summary,compact:!0})}),e.jsx(t,{title:"Actions",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>window.open(`https://ronnie-unsectarian-antone.ngrok-free.dev/api/ms/${encodeURIComponent(s??"")}/download`,"_blank"),children:"Download MS"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.open(`/viewer/carta?ms=${encodeURIComponent(s??"")}`,"_blank"),children:"Open in CARTA"}),a.qa_grade&&e.jsx(i,{to:`/qa/ms/${encodeURIComponent(s??"")}`,className:"btn btn-secondary text-center",children:"View QA Report"})]})}),e.jsx(t,{title:"Quick Info",children:e.jsxs("dl",{className:"space-y-3",children:[a.created_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Created"}),e.jsxs("dd",{className:"text-sm text-gray-900",children:[u(a.created_at),e.jsx("span",{className:"text-gray-500 block text-xs",children:new Date(a.created_at).toLocaleString()})]})]}),a.run_id&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pipeline Run"}),e.jsx("dd",{className:"text-sm",children:e.jsx(i,{to:`/jobs/${a.run_id}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:a.run_id})})]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.pointing_ra_deg!==void 0&&a.pointing_ra_deg!==null&&a.pointing_dec_deg!==void 0&&a.pointing_dec_deg!==null&&e.jsx(t,{title:"Pointing",children:e.jsx(h,{raDeg:a.pointing_ra_deg,decDeg:a.pointing_dec_deg,showDecimal:!0})}),a.calibrator_matches&&a.calibrator_matches.length>0&&e.jsx(t,{title:"Calibration Applied",subtitle:`${a.calibrator_matches.length} calibration table${a.calibrator_matches.length!==1?"s":""}`,children:e.jsx("div",{className:"space-y-3",children:a.calibrator_matches.map((r,m)=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsx("div",{children:e.jsx("span",{className:`badge ${r.type==="bandpass"?"badge-info":r.type==="gain"?"badge-success":"badge-gray"}`,children:r.type})})}),e.jsx("div",{className:"mt-2 font-mono text-xs text-gray-600 break-all",children:r.cal_table})]},m))})}),(!a.calibrator_matches||a.calibrator_matches.length===0)&&e.jsx(t,{title:"Calibration",children:e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{children:"No calibration tables applied yet."})]})}),e.jsx(t,{title:"Metadata",children:e.jsx("dl",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Full Path"}),e.jsx("dd",{className:"font-mono text-sm text-gray-900 break-all",children:a.path})]})})})]})]})]})};export{C as default};
//# sourceMappingURL=MSDetailPage-FM0PYcgM.js.map
