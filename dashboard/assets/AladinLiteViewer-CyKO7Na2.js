import{r,j as e}from"./index-DGIdaq_y.js";const S="https://aladin.cds.unistra.fr/AladinLite/api/v3/latest/aladin.js",V=({raDeg:a,decDeg:n,fov:g=.25,height:u=400,survey:y="P/DSS2/color",sourceName:M,className:h="",showFullscreen:m=!0})=>{const x=r.useRef(null),t=r.useRef(null),[j,f]=r.useState(!0),[c,k]=r.useState(null),[L,b]=r.useState(g),[w,N]=r.useState(!1),p=r.useCallback(()=>{t.current&&typeof t.current.destroy=="function"&&t.current.destroy(),t.current=null},[]);r.useEffect(()=>{let s=!1;return(async()=>{if(!w||c||!x.current)return;const E=`${a.toFixed(6)} ${n>=0?"+":""}${n.toFixed(6)}`;try{if(f(!0),p(),window.A||await new Promise((l,v)=>{let o=document.querySelector('script[data-aladin-lite="true"]');if(o){o.onload=()=>l(),o.onerror=()=>v(new Error("Failed to load Aladin Lite"));return}o=document.createElement("script"),o.src=S,o.async=!0,o.dataset.aladinLite="true",o.onload=()=>l(),o.onerror=()=>v(new Error("Failed to load Aladin Lite")),document.head.appendChild(o)}),s)return;if(!window.A?.aladin)throw new Error("Aladin Lite library unavailable");t.current=window.A.aladin(x.current,{target:E,fov:L,survey:y,showReticle:!0,showZoomControl:!0,showFullscreenControl:m,showLayersControl:!0,showGotoControl:!1,showShareControl:!1,showCatalog:!0,showFrame:!0}),f(!1)}catch(l){s||(k(l instanceof Error?l.message:"Failed to load sky viewer"),f(!1))}})(),()=>{s=!0,p()}},[p,c,a,n,y,m,w]),r.useEffect(()=>{t.current&&t.current.gotoRaDec(a,n)},[a,n]);const C=r.useCallback(()=>{t.current&&(t.current.increaseZoom(),b(s=>{const i=Math.max(.001,s/2);return typeof t.current.setFoV=="function"&&t.current.setFoV(i),i}))},[]),F=r.useCallback(()=>{t.current&&(t.current.decreaseZoom(),b(s=>{const i=Math.min(180,s*2);return typeof t.current.setFoV=="function"&&t.current.setFoV(i),i}))},[]),A=r.useCallback(()=>{t.current&&t.current.toggleFullscreen()},[]),d=typeof u=="number"?`${u}px`:u;return w?c?e.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${h}`,style:{height:d},children:e.jsxs("div",{className:"text-center text-gray-500 p-4",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"text-sm",children:c})]})}):e.jsxs("div",{className:`relative ${h}`,children:[j&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 rounded-lg flex items-center justify-center z-10",style:{height:d},children:e.jsxs("div",{className:"flex flex-col items-center text-gray-500",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mb-2"}),e.jsx("span",{className:"text-sm",children:"Loading sky viewer..."})]})}),e.jsx("div",{ref:x,className:"rounded-lg overflow-hidden",style:{height:d,width:"100%"}}),e.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[e.jsx("button",{type:"button",onClick:C,className:"bg-white/90 hover:bg-white p-1.5 rounded shadow text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom in",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v12m6-6H6"})})}),e.jsx("button",{type:"button",onClick:F,className:"bg-white/90 hover:bg-white p-1.5 rounded shadow text-gray-700 hover:text-gray-900 transition-colors",title:"Zoom out",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})}),m&&e.jsx("button",{type:"button",onClick:A,className:"bg-white/90 hover:bg-white p-1.5 rounded shadow text-gray-700 hover:text-gray-900 transition-colors",title:"Toggle fullscreen",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded font-mono",children:[a.toFixed(4),"° ",n>=0?"+":"",n.toFixed(4),"°"]})]}):e.jsx("div",{className:`bg-gray-100 rounded-lg p-4 ${h}`,style:{height:d},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Sky Viewer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Load the interactive Aladin viewer on demand to reduce initial page weight."})]}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>N(!0),"aria-label":"Load sky viewer",children:"Load viewer"})]})})};export{V as A};
//# sourceMappingURL=AladinLiteViewer-CyKO7Na2.js.map
