import{r as o,j as e,L as O}from"./index-QjjBz54k.js";import{u as H}from"./useQueries-D0hkDoVR.js";import{a as A,L as Q}from"./appStore-9AaCbw7y.js";import{u as W,S as P}from"./SortableTableHeader-DEn_XO8b.js";import{F as X}from"./FitsViewer-DACfSk0t.js";const Y=({min:a,max:r,minValue:b,maxValue:y,step:c=1,label:v,unit:h="",onChange:i,onChangeComplete:d,showInputs:f=!0,histogram:S,className:J="",decimals:k=2,disabled:j=!1,formatValue:N})=>{const[n,s]=o.useState(b??a),[t,m]=o.useState(y??r),[u,x]=o.useState(null),_=o.useRef(null);o.useEffect(()=>{b!==void 0&&s(b),y!==void 0&&m(y)},[b,y]);const G=o.useCallback(p=>N?N(p):p.toFixed(k),[N,k]),D=o.useCallback(p=>(p-a)/(r-a)*100,[a,r]),l=o.useCallback(p=>{const w=a+p/100*(r-a),M=Math.round(w/c)*c;return Math.max(a,Math.min(r,M))},[a,r,c]),g=o.useCallback(p=>{if(j||!_.current)return;const w=_.current.getBoundingClientRect(),M=(p.clientX-w.left)/w.width*100,V=l(M),I=Math.abs(V-n),R=Math.abs(V-t);if(I<=R){const $=Math.min(V,t-c);s($),i==null||i($,t),d==null||d($,t)}else{const $=Math.max(V,n+c);m($),i==null||i(n,$),d==null||d(n,$)}},[j,l,n,t,c,i,d]),F=o.useCallback(p=>{const w=Math.min(parseFloat(p.target.value)||a,t-c);s(w),i==null||i(w,t)},[a,t,c,i]),z=o.useCallback(p=>{const w=Math.max(parseFloat(p.target.value)||r,n+c);m(w),i==null||i(n,w)},[r,n,c,i]),T=o.useCallback(()=>{d==null||d(n,t)},[n,t,d]),B=o.useCallback(p=>{const w=parseFloat(p.target.value),M=Math.min(w,t-c);s(M),i==null||i(M,t)},[t,c,i]),q=o.useCallback(p=>{const w=parseFloat(p.target.value),M=Math.max(w,n+c);m(M),i==null||i(n,M)},[n,c,i]),L=o.useCallback(()=>{x(null),d==null||d(n,t)},[n,t,d]),Z=o.useCallback(()=>{s(a),m(r),i==null||i(a,r),d==null||d(a,r)},[a,r,i,d]),E=D(n),K=D(t);return e.jsxs("div",{className:`space-y-2 ${J}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[v&&e.jsx("span",{className:"text-sm font-medium text-gray-700",children:v}),e.jsx("button",{type:"button",onClick:Z,disabled:j,className:"text-xs text-blue-600 hover:text-blue-800 disabled:text-gray-400",children:"Reset"})]}),S&&S.length>0&&e.jsx("div",{className:"h-8 flex items-end gap-px",children:S.map((p,w)=>{const M=Math.max(...S),V=M>0?p/M*100:0,I=a+w/S.length*(r-a),$=a+(w+1)/S.length*(r-a)>=n&&I<=t;return e.jsx("div",{className:`flex-1 rounded-t transition-colors ${$?"bg-blue-400":"bg-gray-300"}`,style:{height:`${V}%`,minHeight:p>0?"2px":"0"}},w)})}),e.jsxs("div",{className:"relative h-6 flex items-center",children:[e.jsx("div",{ref:_,className:"absolute w-full h-2 bg-gray-200 rounded-full cursor-pointer",onClick:g,children:e.jsx("div",{className:"absolute h-full bg-blue-500 rounded-full",style:{left:`${E}%`,width:`${K-E}%`}})}),e.jsx("input",{type:"range",min:a,max:r,step:c,value:n,onChange:B,onMouseUp:L,onTouchEnd:L,onMouseDown:()=>x("min"),disabled:j,className:`absolute w-full h-2 appearance-none bg-transparent pointer-events-none
            [&::-webkit-slider-thumb]:pointer-events-auto
            [&::-webkit-slider-thumb]:appearance-none
            [&::-webkit-slider-thumb]:w-5
            [&::-webkit-slider-thumb]:h-5
            [&::-webkit-slider-thumb]:bg-white
            [&::-webkit-slider-thumb]:border-2
            [&::-webkit-slider-thumb]:border-blue-500
            [&::-webkit-slider-thumb]:rounded-full
            [&::-webkit-slider-thumb]:shadow
            [&::-webkit-slider-thumb]:cursor-grab
            [&::-webkit-slider-thumb]:active:cursor-grabbing
            [&::-webkit-slider-thumb]:hover:scale-110
            [&::-webkit-slider-thumb]:transition-transform
            [&::-moz-range-thumb]:pointer-events-auto
            [&::-moz-range-thumb]:appearance-none
            [&::-moz-range-thumb]:w-5
            [&::-moz-range-thumb]:h-5
            [&::-moz-range-thumb]:bg-white
            [&::-moz-range-thumb]:border-2
            [&::-moz-range-thumb]:border-blue-500
            [&::-moz-range-thumb]:rounded-full
            [&::-moz-range-thumb]:shadow
            [&::-moz-range-thumb]:cursor-grab`,style:{zIndex:u==="min"?2:1}}),e.jsx("input",{type:"range",min:a,max:r,step:c,value:t,onChange:q,onMouseUp:L,onTouchEnd:L,onMouseDown:()=>x("max"),disabled:j,className:`absolute w-full h-2 appearance-none bg-transparent pointer-events-none
            [&::-webkit-slider-thumb]:pointer-events-auto
            [&::-webkit-slider-thumb]:appearance-none
            [&::-webkit-slider-thumb]:w-5
            [&::-webkit-slider-thumb]:h-5
            [&::-webkit-slider-thumb]:bg-white
            [&::-webkit-slider-thumb]:border-2
            [&::-webkit-slider-thumb]:border-blue-500
            [&::-webkit-slider-thumb]:rounded-full
            [&::-webkit-slider-thumb]:shadow
            [&::-webkit-slider-thumb]:cursor-grab
            [&::-webkit-slider-thumb]:active:cursor-grabbing
            [&::-webkit-slider-thumb]:hover:scale-110
            [&::-webkit-slider-thumb]:transition-transform
            [&::-moz-range-thumb]:pointer-events-auto
            [&::-moz-range-thumb]:appearance-none
            [&::-moz-range-thumb]:w-5
            [&::-moz-range-thumb]:h-5
            [&::-moz-range-thumb]:bg-white
            [&::-moz-range-thumb]:border-2
            [&::-moz-range-thumb]:border-blue-500
            [&::-moz-range-thumb]:rounded-full
            [&::-moz-range-thumb]:shadow
            [&::-moz-range-thumb]:cursor-grab`,style:{zIndex:u==="max"?2:1}})]}),f?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"sr-only",children:"Minimum value"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:a,max:t-c,step:c,value:n,onChange:F,onBlur:T,disabled:j,className:"w-full px-2 py-1 pr-8 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"}),h&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:h})]})]}),e.jsx("span",{className:"text-gray-400",children:"—"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"sr-only",children:"Maximum value"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:n+c,max:r,step:c,value:t,onChange:z,onBlur:T,disabled:j,className:"w-full px-2 py-1 pr-8 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"}),h&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:h})]})]})]}):e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:[G(n),h&&` ${h}`]}),e.jsxs("span",{children:[G(t),h&&` ${h}`]})]})]})},U=({fitsUrls:a,columns:r=2,viewerSize:b=300,syncViews:y=!0,labels:c,onCoordinateClick:v,className:h=""})=>{const[i,d]=o.useState(0),[f,S]=o.useState(y),[J,k]=o.useState({}),j=o.useCallback(()=>{if(!f||!window.JS9)return;const s="JS9Grid_0";try{const t=window.JS9.GetZoom({display:s}),m=window.JS9.GetPan({display:s});if(t&&m)for(let u=1;u<a.length;u++){const x=`JS9Grid_${u}`;window.JS9.SetZoom(t,{display:x}),window.JS9.SetPan(m.x,m.y,{display:x})}}catch(t){console.warn("Failed to sync views:",t)}},[syncViews,a.length]);o.useEffect(()=>{if(!f||i<a.length)return;const s=()=>{j()};return window.JS9&&(window.JS9.SetCallback("onzoom",s,{display:"JS9Grid_0"}),window.JS9.SetCallback("onpan",s,{display:"JS9Grid_0"})),()=>{window.JS9&&(window.JS9.SetCallback("onzoom",null,{display:"JS9Grid_0"}),window.JS9.SetCallback("onpan",null,{display:"JS9Grid_0"}))}},[syncViews,i,a.length,j]);const N=()=>{d(s=>s+1)},n=()=>{switch(r){case 1:return"grid-cols-1";case 2:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4";default:return"grid-cols-2"}};return a.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"No FITS files to display"}):e.jsxs("div",{className:h,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[i,"/",a.length," images loaded"]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:s=>S(s.target.checked),className:"w-4 h-4 rounded accent-primary"}),e.jsx("span",{children:"Sync views"})]})]}),e.jsx("div",{className:`grid ${n()} gap-4`,children:a.map((s,t)=>e.jsxs("div",{className:"relative",children:[c&&c[t]&&e.jsx("div",{className:"absolute top-2 left-2 z-10 bg-black/70 text-white text-xs px-2 py-1 rounded",children:c[t]}),e.jsx(X,{fitsUrl:s,displayId:`JS9Grid_${t}`,width:b,height:b,showControls:!1,onLoad:N,onCoordinateClick:v?(m,u)=>v(m,u,t):void 0})]},`${s}-${t}`))}),e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Grid Controls:"}),e.jsx("button",{onClick:()=>{if(window.JS9)for(let s=0;s<a.length;s++)window.JS9.SetZoom("tofit",{display:`JS9Grid_${s}`})},className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100 transition-colors",children:"Fit All"}),e.jsx("button",{onClick:()=>{if(window.JS9)for(let s=0;s<a.length;s++)window.JS9.SetZoom("in",{display:`JS9Grid_${s}`})},className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100 transition-colors",children:"Zoom In All"}),e.jsx("button",{onClick:()=>{if(window.JS9)for(let s=0;s<a.length;s++)window.JS9.SetZoom("out",{display:`JS9Grid_${s}`})},className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100 transition-colors",children:"Zoom Out All"}),e.jsxs("select",{onChange:s=>{if(window.JS9&&s.target.value)for(let t=0;t<a.length;t++)window.JS9.SetColormap(s.target.value,{display:`JS9Grid_${t}`})},className:"px-2 py-1 text-sm border border-gray-300 rounded",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Color map..."}),e.jsx("option",{value:"grey",children:"Grey"}),e.jsx("option",{value:"heat",children:"Heat"}),e.jsx("option",{value:"cool",children:"Cool"}),e.jsx("option",{value:"viridis",children:"Viridis"}),e.jsx("option",{value:"rainbow",children:"Rainbow"})]})]})})]})},C=[{value:"fits",label:"FITS"},{value:"csv",label:"CSV"},{value:"json",label:"JSON"},{value:"zip",label:"ZIP Archive"}],ee=({items:a,selectedIds:r,onSelectionChange:b,onDownload:y,className:c="",disabled:v=!1})=>{const[h,i]=o.useState("fits"),[d,f]=o.useState(!1),S=o.useCallback(()=>{r.length===a.length?b([]):b(a.map(n=>n.id))},[a,r.length,b]),J=o.useCallback(n=>{r.includes(n)?b(r.filter(s=>s!==n)):b([...r,n])},[r,b]),k=o.useCallback(async()=>{if(r.length!==0){f(!0);try{await y(r,h)}finally{f(!1)}}},[r,h,y]),j=r.length===a.length&&a.length>0,N=r.length>0&&r.length<a.length;return e.jsxs("div",{className:`card ${c}`,children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold",children:"Bulk Download"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," of ",a.length," selected"]})]}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,ref:n=>{n&&(n.indeterminate=N)},onChange:S,disabled:v||a.length===0,className:"w-4 h-4 text-vast-green rounded border-gray-300 focus:ring-vast-green"}),e.jsx("span",{className:"text-sm",children:"Select All"})]}),r.length>0&&e.jsx("button",{onClick:()=>b([]),className:"text-sm text-gray-500 hover:text-red-500",children:"Clear selection"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Export Format"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:C.map(n=>e.jsx("button",{onClick:()=>i(n.value),disabled:v,className:`py-2 px-3 rounded-md text-sm font-medium transition-all ${h===n.value?"bg-vast-green text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:n.label},n.value))})]}),r.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 max-h-40 overflow-y-auto",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Selected items:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.slice(0,10).map(n=>{const s=a.find(t=>t.id===n);return e.jsxs("span",{className:"badge badge-secondary flex items-center gap-1",children:[(s==null?void 0:s.name)||n,e.jsx("button",{onClick:()=>J(n),className:"hover:text-red-500",children:"×"})]},n)}),r.length>10&&e.jsxs("span",{className:"badge badge-info",children:["+",r.length-10," more"]})]})]}),e.jsx("button",{onClick:k,disabled:v||r.length===0||d,className:"btn btn-primary w-full",children:d?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Preparing Download..."]}):e.jsxs(e.Fragment,{children:["Download ",r.length," item",r.length!==1?"s":""," as"," ",h.toUpperCase()]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:[h==="fits"&&"Download raw FITS files individually.",h==="csv"&&"Export metadata as CSV spreadsheet.",h==="json"&&"Export metadata as JSON.",h==="zip"&&"Download all files in a single ZIP archive."]})]})]})},se=({filters:a,values:r,onChange:b,title:y="Filters",collapsible:c=!0,defaultCollapsed:v=!1,className:h=""})=>{const[i,d]=o.useState(v),[f,S]=o.useState({}),J=o.useCallback((s,t)=>{b({...r,[s]:t})},[r,b]),k=o.useCallback((s,t,m)=>{b({...r,[s]:[t,m]})},[r,b]),j=o.useCallback(()=>{const s={};a.forEach(t=>{t.defaultValue!==void 0&&(s[t.id]=t.defaultValue)}),b(s)},[a,b]);o.useCallback(s=>{S(t=>({...t,[s]:!t[s]}))},[]);const N=o.useMemo(()=>Object.entries(r).filter(([s,t])=>{const m=a.find(u=>u.id===s);return m?m.type==="range"&&Array.isArray(t)?t[0]!==m.min||t[1]!==m.max:m.defaultValue!==void 0?t!==m.defaultValue:t!==void 0&&t!==""&&t!==!1:!1}).length,[r,a]),n=s=>{var m;const t=r[s.id];switch(s.type){case"range":{const u=Array.isArray(t)?t:[s.min??0,s.max??100];return e.jsx(Y,{min:s.min??0,max:s.max??100,step:s.step??1,minValue:u[0],maxValue:u[1],label:s.label,unit:s.unit,histogram:s.histogram,onChange:(x,_)=>k(s.id,x,_),showInputs:!0},s.id)}case"select":return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:s.label}),e.jsxs("select",{value:String(t??""),onChange:u=>J(s.id,u.target.value||void 0),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All"}),(m=s.options)==null?void 0:m.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]},s.id);case"checkbox":return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!t,onChange:u=>J(s.id,u.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.label})]},s.id);case"text":return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:s.label}),e.jsx("input",{type:"text",value:String(t??""),onChange:u=>J(s.id,u.target.value||void 0),placeholder:`Filter by ${s.label.toLowerCase()}...`,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]},s.id);default:return null}};return e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 shadow-sm ${h}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${c?"cursor-pointer hover:bg-gray-50":""} ${i?"":"border-b border-gray-200"}`,onClick:c?()=>d(!i):void 0,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${i?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:y}),N>0&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-blue-700 bg-blue-100 rounded-full",children:N})]}),!i&&N>0&&e.jsx("button",{type:"button",onClick:s=>{s.stopPropagation(),j()},className:"text-xs text-blue-600 hover:text-blue-800",children:"Reset all"})]}),!i&&e.jsx("div",{className:"p-4 space-y-4",children:a.map(s=>n(s))})]})},ie=()=>{const{data:a,isLoading:r,error:b}=H(),{sortKey:y,sortDirection:c,handleSort:v,sortItems:h}=W("created_at","desc"),[i,d]=o.useState("list"),[f,S]=o.useState({}),J=[{id:"qa_grade",label:"QA Grade",type:"select",options:[{value:"good",label:"Good"},{value:"warn",label:"Warning"},{value:"fail",label:"Fail"}]},{id:"search",label:"Search",type:"text"}],k=A(l=>l.selectedImages),j=A(l=>l.toggleImageSelection),N=A(l=>l.selectAllImages),n=A(l=>l.clearImageSelection),s=o.useMemo(()=>Array.from(k),[k]),t=o.useCallback(l=>{l.length===0?n():N(l)},[n,N]),m=o.useCallback(async(l,g)=>{const z=`https://ronnie-unsectarian-antone.ngrok-free.dev/api/images/bulk-download?ids=${l.join(",")}&format=${g}`;window.open(z,"_blank")},[]),u=o.useMemo(()=>{if(!a)return[];let l=a;if(f.qa_grade&&(l=l.filter(g=>g.qa_grade===f.qa_grade)),f.search&&typeof f.search=="string"){const g=f.search.toLowerCase();l=l.filter(F=>{var z;return((z=F.path)==null?void 0:z.toLowerCase().includes(g))||F.id.toLowerCase().includes(g)})}return l},[a,f]),x=o.useMemo(()=>u?h(u,y,c):[],[u,y,c,h]);if(r)return e.jsx(Q,{label:"Loading images..."});if(b)return e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Failed to load images: ",b.message]});const _=o.useMemo(()=>x.map(l=>{var g;return{id:l.id,name:((g=l.path)==null?void 0:g.split("/").pop())||l.id,type:"FITS"}}),[x]),G=o.useMemo(()=>{const l="https://ronnie-unsectarian-antone.ngrok-free.dev/api";return s.map(g=>`${l}/images/${g}/fits`)},[s]),D=o.useMemo(()=>s.map(l=>{var F;const g=x.find(z=>z.id===l);return((F=g==null?void 0:g.path)==null?void 0:F.split("/").pop())||l}),[s,x]);return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Images"}),s.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[s.length," selected"]})]}),e.jsx("div",{className:"flex gap-2",children:s.length>=2&&s.length<=4&&e.jsx("button",{onClick:()=>d(i==="compare"?"list":"compare"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="compare"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:i==="compare"?"Back to List":"Compare Selected"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx(se,{filters:J,values:f,onChange:S,title:"Filter Images",collapsible:!0,defaultCollapsed:!0})}),i==="compare"&&s.length>=2&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Image Comparison"}),e.jsx(U,{fitsUrls:G,labels:D,columns:s.length<=2?2:s.length<=3?3:4,viewerSize:350,syncViews:!0})]})}),x.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx(ee,{items:_,selectedIds:s,onSelectionChange:t,onDownload:m})}),x&&x.length>0?e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-10 px-3 py-3",children:e.jsx("input",{type:"checkbox",checked:s.length===x.length&&x.length>0,ref:l=>{l&&(l.indeterminate=s.length>0&&s.length<x.length)},onChange:()=>{s.length===x.length?n():N(x.map(l=>l.id))},className:"h-4 w-4 text-blue-600 rounded"})}),e.jsx(P,{label:"Name",sortKey:"path",currentSortKey:y,direction:c,onSort:v}),e.jsx(P,{label:"QA Grade",sortKey:"qa_grade",currentSortKey:y,direction:c,onSort:v,className:"text-center"}),e.jsx(P,{label:"Created",sortKey:"created_at",currentSortKey:y,direction:c,onSort:v,className:"text-right"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(l=>{var g;return e.jsxs("tr",{className:k.has(l.id)?"bg-blue-50":"",children:[e.jsx("td",{className:"px-3",children:e.jsx("input",{type:"checkbox",checked:k.has(l.id),onChange:()=>j(l.id),className:"h-4 w-4 text-blue-600 rounded"})}),e.jsx("td",{children:e.jsx(O,{to:`/images/${l.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:((g=l.path)==null?void 0:g.split("/").pop())||l.id})}),e.jsx("td",{className:"text-center",children:l.qa_grade&&e.jsx("span",{className:`badge ${l.qa_grade==="good"?"badge-success":l.qa_grade==="warn"?"badge-warning":"badge-error"}`,children:l.qa_grade})}),e.jsx("td",{className:"text-right text-gray-500",children:l.created_at?new Date(l.created_at).toLocaleDateString():"—"})]},l.id)})})]})}):e.jsx("p",{className:"text-gray-500",children:"No images found."})]})};export{ie as default};
//# sourceMappingURL=ImagesListPage-BLg_r2f4.js.map
