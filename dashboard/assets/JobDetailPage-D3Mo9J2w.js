import{u as m,R as g,j as e,L as l}from"./index-C-KiYoRt.js";import{f as b}from"./useQueries-7CFkBR2m.js";import{E as u,C as t,P as h,a as j}from"./CoordinateDisplay-DVUTo0E7.js";import{u as p,L as f}from"./appStore-DviIcMm3.js";import{Q as N}from"./QAMetrics-CFYn3n5Q.js";import{r as y}from"./relativeTime-Dp84ug83.js";const v={pending:{bg:"bg-gray-100",text:"text-gray-700",dot:"bg-gray-500"},running:{bg:"bg-blue-100",text:"text-blue-700",dot:"bg-blue-500"},completed:{bg:"bg-green-100",text:"text-green-700",dot:"bg-green-500"},failed:{bg:"bg-red-100",text:"text-red-700",dot:"bg-red-500"}},S=()=>{const{runId:r}=m(),{data:s,isLoading:c,error:i,refetch:o}=b(r),d=p(x=>x.addRecentJob);if(g.useEffect(()=>{s&&r&&d(r)},[s,r,d]),c)return e.jsx(f,{label:"Loading job details..."});if(i)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx(u,{error:i,onRetry:()=>o()})});if(!s)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs(t,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Job not found."}),e.jsx(l,{to:"/jobs",className:"link",children:"Back to Jobs"})]})});const n=s.qaGrade?"completed":s.createdAt?"running":"pending",a=v[n];return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(l,{to:"/jobs",className:"text-sm text-gray-500 hover:text-gray-700 mb-2 inline-block",children:"Back to Jobs"}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Job: ",r]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${a.bg} ${a.text}`,children:[e.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${a.dot}`,"aria-hidden":"true"}),e.jsx("span",{className:"capitalize",children:n})]})]}),e.jsx(h,{...s})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsx(t,{title:"Status",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${a.bg} flex items-center justify-center gap-2`,children:[e.jsx("span",{className:`h-3 w-3 rounded-full ${a.dot}`,"aria-hidden":"true"}),e.jsx("span",{className:`text-lg font-semibold ${a.text} capitalize`,children:n})]}),s.createdAt&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Started"}),e.jsxs("dd",{className:"text-sm text-gray-900",children:[new Date(s.createdAt).toLocaleString(),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",y(s.createdAt),")"]})]})]})]})}),e.jsx(t,{title:"Actions",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[s.logsUrl&&e.jsx("a",{href:s.logsUrl,target:"_blank",rel:"noreferrer",className:"btn btn-secondary text-center",children:"View Logs"}),s.imageUrl&&e.jsx(l,{to:s.imageUrl,className:"btn btn-primary text-center",children:"View Output Image"}),s.qaUrl&&e.jsx("a",{href:s.qaUrl,target:"_blank",rel:"noreferrer",className:"btn btn-secondary text-center",children:"QA Report"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{alert("Re-run functionality not yet implemented")},children:"Re-run Job"})]})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.qaGrade&&e.jsx(t,{title:"Quality Assessment",children:e.jsx(N,{grade:s.qaGrade,summary:s.qaSummary})}),s.pointingRaDeg!==void 0&&s.pointingDecDeg!==void 0&&e.jsx(t,{title:"Pointing",children:e.jsx(j,{raDeg:s.pointingRaDeg,decDeg:s.pointingDecDeg,showDecimal:!0})}),e.jsx(t,{title:"Pipeline Details",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Run ID"}),e.jsx("dd",{className:"font-mono text-sm text-gray-900 break-all",children:s.runId||r})]}),s.msPath&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Input Measurement Set"}),e.jsx("dd",{className:"font-mono text-sm break-all",children:e.jsx(l,{to:`/ms/${encodeURIComponent(s.msPath)}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.msPath})})]}),s.calTable&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Calibration Table"}),e.jsx("dd",{className:"font-mono text-sm text-gray-900 break-all",children:s.calUrl?e.jsx("a",{href:s.calUrl,className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.calTable}):s.calTable})]})]})}),e.jsx(t,{title:"Related Resources",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.msUrl&&e.jsxs(l,{to:s.msUrl,className:"p-3 rounded-lg border border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-colors flex items-center gap-3",children:[e.jsx("span",{className:"h-10 w-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold text-sm",children:"MS"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Measurement Set"}),e.jsx("div",{className:"text-xs text-gray-500",children:"View MS details"})]})]}),s.imageUrl&&e.jsxs(l,{to:s.imageUrl,className:"p-3 rounded-lg border border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-colors flex items-center gap-3",children:[e.jsx("span",{className:"h-10 w-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold text-sm",children:"IMG"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Output Image"}),e.jsx("div",{className:"text-xs text-gray-500",children:"View image details"})]})]}),s.logsUrl&&e.jsxs("a",{href:s.logsUrl,target:"_blank",rel:"noreferrer",className:"p-3 rounded-lg border border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-colors flex items-center gap-3",children:[e.jsx("span",{className:"h-10 w-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold text-sm",children:"LOG"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Logs"}),e.jsx("div",{className:"text-xs text-gray-500",children:"View job logs"})]})]}),s.qaUrl&&e.jsxs("a",{href:s.qaUrl,target:"_blank",rel:"noreferrer",className:"p-3 rounded-lg border border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-colors flex items-center gap-3",children:[e.jsx("span",{className:"h-10 w-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center font-semibold text-sm",children:"QA"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"QA Report"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Quality assessment"})]})]})]})})]})]})]})};export{S as default};
//# sourceMappingURL=JobDetailPage-D3Mo9J2w.js.map
