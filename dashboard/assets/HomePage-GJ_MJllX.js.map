{"version":3,"file":"HomePage-GJ_MJllX.js","sources":["../../src/components/summary/StatCard.tsx","../../src/components/summary/StatCardGrid.tsx","../../src/components/skymap/SkyCoverageMap.tsx","../../src/pages/HomePage.tsx"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport type StatCardVariant = \"primary\" | \"info\" | \"warning\" | \"success\" | \"danger\" | \"secondary\";\n\nexport interface StatCardProps {\n  /** The metric label */\n  label: string;\n  /** The metric value */\n  value: number | string;\n  /** Optional subtitle or additional info */\n  subtitle?: string;\n  /** Card color variant */\n  variant?: StatCardVariant;\n  /** Icon to display (emoji or component) */\n  icon?: React.ReactNode;\n  /** Link to navigate to on click */\n  href?: string;\n  /** Click handler (alternative to href) */\n  onClick?: () => void;\n  /** Whether to format value with commas */\n  formatNumber?: boolean;\n  /** Use compact number formatting (1.2K, 3.4M) */\n  compactFormat?: boolean;\n  /** Loading state */\n  isLoading?: boolean;\n  /** Error state */\n  error?: string;\n  /** Accessible label for screen readers */\n  ariaLabel?: string;\n  /** Custom class name */\n  className?: string;\n}\n\nconst VARIANT_CLASSES: Record<StatCardVariant, string> = {\n  primary: \"border-l-blue-500 text-blue-500\",\n  info: \"border-l-teal-500 text-teal-500\",\n  warning: \"border-l-yellow-500 text-yellow-500\",\n  success: \"border-l-green-500 text-green-500\",\n  danger: \"border-l-red-500 text-red-500\",\n  secondary: \"border-l-gray-500 text-gray-500\",\n};\n\nconst ICON_CLASSES: Record<StatCardVariant, string> = {\n  primary: \"text-blue-200\",\n  info: \"text-teal-200\",\n  warning: \"text-yellow-200\",\n  success: \"text-green-200\",\n  danger: \"text-red-200\",\n  secondary: \"text-gray-200\",\n};\n\n/**\n * Format a number compactly (1.2K, 3.4M, etc.)\n * Preserves one decimal place for clarity (e.g., 1000 -> \"1.0K\" not \"1K\")\n */\nfunction formatCompact(value: number): string {\n  const formatWithSuffix = (num: number, suffix: string): string => {\n    // Always show one decimal place for consistency\n    const formatted = num.toFixed(1);\n    return `${formatted}${suffix}`;\n  };\n\n  if (value >= 1_000_000_000) {\n    return formatWithSuffix(value / 1_000_000_000, \"B\");\n  }\n  if (value >= 1_000_000) {\n    return formatWithSuffix(value / 1_000_000, \"M\");\n  }\n  if (value >= 1_000) {\n    return formatWithSuffix(value / 1_000, \"K\");\n  }\n  return value.toString();\n}\n\n/**\n * Summary statistic card with border accent, icon, and optional link/click.\n * Inspired by VAST pipeline run detail page stat cards.\n */\nconst StatCard: React.FC<StatCardProps> = ({\n  label,\n  value,\n  subtitle,\n  variant = \"primary\",\n  icon,\n  href,\n  onClick,\n  formatNumber = true,\n  compactFormat = false,\n  isLoading = false,\n  error,\n  ariaLabel,\n  className = \"\",\n}) => {\n  // Format the displayed value\n  let formattedValue: string | React.ReactNode;\n  if (error) {\n    formattedValue = \"—\";\n  } else if (typeof value === \"number\") {\n    if (compactFormat) {\n      formattedValue = formatCompact(value);\n    } else if (formatNumber) {\n      formattedValue = value.toLocaleString();\n    } else {\n      formattedValue = value.toString();\n    }\n  } else {\n    formattedValue = value;\n  }\n\n  const isClickable = !!(href || onClick);\n  const accessibleLabel =\n    ariaLabel || `${label}: ${formattedValue}${subtitle ? `, ${subtitle}` : \"\"}`;\n\n  const cardContent = (\n    <div\n      className={`\n        card border-l-4 ${VARIANT_CLASSES[variant]} \n        py-3 px-4 h-full transition-all\n        ${\n          isClickable\n            ? \"hover:shadow-lg cursor-pointer focus-within:ring-2 focus-within:ring-blue-300\"\n            : \"\"\n        }\n        ${error ? \"opacity-75\" : \"\"}\n        ${className}\n      `}\n      role={isClickable ? \"button\" : undefined}\n      tabIndex={onClick && !href ? 0 : undefined}\n      onClick={onClick && !href ? onClick : undefined}\n      onKeyDown={\n        onClick && !href\n          ? (e) => {\n              if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                onClick();\n              }\n            }\n          : undefined\n      }\n      aria-label={accessibleLabel}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1\">\n          <p\n            className={`text-xs font-bold uppercase mb-1 ${VARIANT_CLASSES[variant].split(\" \")[1]}`}\n          >\n            {label}\n          </p>\n          {isLoading ? (\n            <div\n              className=\"h-7 w-20 bg-gray-200 animate-pulse rounded\"\n              role=\"status\"\n              aria-label=\"Loading...\"\n            />\n          ) : error ? (\n            <p className=\"text-xl font-bold text-red-500\" title={error}>\n              —\n            </p>\n          ) : (\n            <p className=\"text-xl font-bold text-gray-800\">{formattedValue}</p>\n          )}\n          {subtitle && <p className=\"text-xs text-gray-500 mt-1\">{subtitle}</p>}\n        </div>\n        {icon && (\n          <div className={`text-3xl ${ICON_CLASSES[variant]}`} aria-hidden=\"true\">\n            {icon}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  if (href) {\n    // Check if external link\n    if (href.startsWith(\"http\")) {\n      return (\n        <a\n          href={href}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"block no-underline focus:outline-none\"\n          aria-label={accessibleLabel}\n        >\n          {cardContent}\n        </a>\n      );\n    }\n    return (\n      <Link\n        to={href}\n        className=\"block no-underline focus:outline-none\"\n        aria-label={accessibleLabel}\n      >\n        {cardContent}\n      </Link>\n    );\n  }\n\n  return cardContent;\n};\n\nexport default StatCard;\n","import React from \"react\";\nimport StatCard, { StatCardProps } from \"./StatCard\";\n\nexport interface StatCardGridProps {\n  /** Array of stat card configurations */\n  cards: StatCardProps[];\n  /** Number of columns (responsive) */\n  columns?: 2 | 3 | 4;\n  /** Loading state for all cards */\n  isLoading?: boolean;\n  /** Custom class name */\n  className?: string;\n}\n\nconst COLUMN_CLASSES = {\n  2: \"grid-cols-1 sm:grid-cols-2\",\n  3: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\",\n  4: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\",\n};\n\n/**\n * Responsive grid layout for StatCard components.\n */\nconst StatCardGrid: React.FC<StatCardGridProps> = ({\n  cards,\n  columns = 4,\n  isLoading = false,\n  className = \"\",\n}) => {\n  return (\n    <div className={`grid ${COLUMN_CLASSES[columns]} gap-4 ${className}`}>\n      {cards.map((card, index) => (\n        <StatCard key={card.label || index} {...card} isLoading={isLoading} />\n      ))}\n    </div>\n  );\n};\n\nexport default StatCardGrid;\n","import React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport * as d3 from \"d3\";\nimport { geoAitoff, geoHammer, geoMollweide } from \"d3-geo-projection\";\n\nexport interface Pointing {\n  id: string;\n  ra: number; // degrees\n  dec: number; // degrees\n  radius?: number; // field of view radius in degrees\n  label?: string;\n  status?: \"completed\" | \"scheduled\" | \"failed\";\n  epoch?: string;\n}\n\nexport interface SkyCoverageMapProps {\n  /** Array of pointing/observation data */\n  pointings: Pointing[];\n  /** Projection type */\n  projection?: \"aitoff\" | \"mollweide\" | \"hammer\" | \"mercator\";\n  /** Width of the map */\n  width?: number;\n  /** Height of the map */\n  height?: number;\n  /** Whether to show the galactic plane */\n  showGalacticPlane?: boolean;\n  /** Whether to show ecliptic */\n  showEcliptic?: boolean;\n  /** Whether to show constellation boundaries */\n  showConstellations?: boolean;\n  /** Color scheme for pointings */\n  colorScheme?: \"status\" | \"epoch\" | \"uniform\";\n  /** Default radius for pointings without radius (degrees) */\n  defaultRadius?: number;\n  /** Callback when pointing is clicked */\n  onPointingClick?: (pointing: Pointing) => void;\n  /** Callback when pointing is hovered */\n  onPointingHover?: (pointing: Pointing | null) => void;\n  /** Custom class name */\n  className?: string;\n}\n\n/**\n * Convert galactic coordinates (l, b) to equatorial (RA, Dec) in degrees.\n * Uses the standard IAU transformation.\n */\nfunction galacticToEquatorial(l: number, b: number): [number, number] {\n  const lRad = (l * Math.PI) / 180;\n  const bRad = (b * Math.PI) / 180;\n\n  // North Galactic Pole (J2000): RA = 192.85948°, Dec = +27.12825°\n  const raGP = (192.85948 * Math.PI) / 180;\n  const decGP = (27.12825 * Math.PI) / 180;\n  // Galactic longitude of ascending node: 32.93192°\n  const lAscend = (32.93192 * Math.PI) / 180;\n\n  const sinDec =\n    Math.sin(bRad) * Math.sin(decGP) + Math.cos(bRad) * Math.cos(decGP) * Math.sin(lRad - lAscend);\n  const dec = Math.asin(sinDec);\n\n  const y = Math.cos(bRad) * Math.cos(lRad - lAscend);\n  const x =\n    Math.sin(bRad) * Math.cos(decGP) - Math.cos(bRad) * Math.sin(decGP) * Math.sin(lRad - lAscend);\n\n  let ra = raGP + Math.atan2(y, x);\n\n  // Normalize RA to [0, 360)\n  ra = ((((ra * 180) / Math.PI) % 360) + 360) % 360;\n  const decDeg = (dec * 180) / Math.PI;\n\n  return [ra, decDeg];\n}\n\n/**\n * Calculate ecliptic coordinates as equatorial (RA, Dec).\n * The ecliptic is the Sun's apparent path through the sky.\n */\nfunction eclipticToEquatorial(eclipticLon: number): [number, number] {\n  const obliquity = 23.4392911; // Earth's axial tilt in degrees (J2000)\n  const oblRad = (obliquity * Math.PI) / 180;\n  const lonRad = (eclipticLon * Math.PI) / 180;\n\n  // Convert from ecliptic to equatorial\n  const sinDec = Math.sin(lonRad) * Math.sin(oblRad);\n  const dec = (Math.asin(sinDec) * 180) / Math.PI;\n\n  const y = Math.sin(lonRad) * Math.cos(oblRad);\n  const x = Math.cos(lonRad);\n  let ra = (Math.atan2(y, x) * 180) / Math.PI;\n\n  // Normalize RA to [0, 360)\n  ra = ((ra % 360) + 360) % 360;\n\n  return [ra, dec];\n}\n\n// Galactic plane coordinates (b=0 for all galactic longitudes)\nconst GALACTIC_PLANE_COORDS = Array.from({ length: 361 }, (_, i) => {\n  return galacticToEquatorial(i, 0);\n});\n\n// Ecliptic coordinates\nconst ECLIPTIC_COORDS = Array.from({ length: 361 }, (_, i) => {\n  return eclipticToEquatorial(i);\n});\n\n/**\n * All-sky coverage map with D3.js celestial projections.\n */\nconst SkyCoverageMap: React.FC<SkyCoverageMapProps> = ({\n  pointings,\n  projection = \"aitoff\",\n  width = 800,\n  height = 400,\n  showGalacticPlane = true,\n  showEcliptic = false,\n  showConstellations = false,\n  colorScheme = \"status\",\n  defaultRadius = 1.5,\n  onPointingClick,\n  onPointingHover,\n  className = \"\",\n}) => {\n  const svgRef = useRef<SVGSVGElement>(null);\n  const [selectedProjection, setSelectedProjection] = useState(projection);\n  const [hoveredPointing, setHoveredPointing] = useState<Pointing | null>(null);\n  const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });\n\n  // Get D3 projection\n  const getProjection = useCallback(() => {\n    const scale = Math.min(width, height * 2) / 6;\n    const center: [number, number] = [0, 0];\n\n    switch (selectedProjection) {\n      case \"mollweide\":\n        return geoMollweide()\n          .scale(scale * 1.4)\n          .translate([width / 2, height / 2])\n          .rotate([-180, 0, 0]);\n      case \"hammer\":\n        return geoHammer()\n          .scale(scale * 1.4)\n          .translate([width / 2, height / 2])\n          .rotate([-180, 0, 0]);\n      case \"mercator\":\n        return d3\n          .geoMercator()\n          .scale(scale * 0.8)\n          .translate([width / 2, height / 2])\n          .rotate([-180, 0, 0]);\n      case \"aitoff\":\n      default:\n        return geoAitoff()\n          .scale(scale * 1.4)\n          .translate([width / 2, height / 2])\n          .rotate([-180, 0, 0]);\n    }\n  }, [selectedProjection, width, height]);\n\n  // Color scale for pointings\n  const getPointingColor = useCallback(\n    (pointing: Pointing) => {\n      if (colorScheme === \"uniform\") return \"#4fc3a1\";\n\n      if (colorScheme === \"status\") {\n        switch (pointing.status) {\n          case \"completed\":\n            return \"#4fc3a1\";\n          case \"scheduled\":\n            return \"#f0c674\";\n          case \"failed\":\n            return \"#ff6b6b\";\n          default:\n            return \"#4fc3a1\";\n        }\n      }\n\n      // Epoch-based coloring (hash epoch to color)\n      if (colorScheme === \"epoch\" && pointing.epoch) {\n        const hash = pointing.epoch.split(\"\").reduce((a, b) => {\n          a = (a << 5) - a + b.charCodeAt(0);\n          return a & a;\n        }, 0);\n        return d3.interpolateRainbow(Math.abs(hash % 100) / 100);\n      }\n\n      return \"#4fc3a1\";\n    },\n    [colorScheme]\n  );\n\n  // Render map\n  useEffect(() => {\n    if (!svgRef.current) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll(\"*\").remove();\n\n    const proj = getProjection();\n    const path = d3.geoPath(proj);\n\n    // Background\n    svg.append(\"rect\").attr(\"width\", width).attr(\"height\", height).attr(\"fill\", \"#1a1a2e\");\n\n    // Graticule (coordinate grid)\n    const graticule = d3.geoGraticule().step([30, 15]);\n    svg\n      .append(\"path\")\n      .datum(graticule())\n      .attr(\"d\", path)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#333\")\n      .attr(\"stroke-width\", 0.5)\n      .attr(\"stroke-opacity\", 0.5);\n\n    // Graticule outline\n    svg\n      .append(\"path\")\n      .datum(graticule.outline())\n      .attr(\"d\", path)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"#555\")\n      .attr(\"stroke-width\", 1);\n\n    // Galactic plane\n    if (showGalacticPlane) {\n      const galacticLine = d3\n        .line<[number, number]>()\n        .x((d) => {\n          const p = proj(d);\n          return p ? p[0] : 0;\n        })\n        .y((d) => {\n          const p = proj(d);\n          return p ? p[1] : 0;\n        })\n        .defined((d) => {\n          const p = proj(d);\n          return p !== null;\n        })\n        .curve(d3.curveLinear); // Use linear interpolation for coordinate lines\n\n      svg\n        .append(\"path\")\n        .datum(GALACTIC_PLANE_COORDS as [number, number][])\n        .attr(\"d\", galacticLine)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#ff6b6b\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-dasharray\", \"5,3\")\n        .attr(\"opacity\", 0.7);\n    }\n\n    // Ecliptic\n    if (showEcliptic) {\n      const eclipticLine = d3\n        .line<[number, number]>()\n        .x((d) => {\n          const p = proj(d);\n          return p ? p[0] : 0;\n        })\n        .y((d) => {\n          const p = proj(d);\n          return p ? p[1] : 0;\n        })\n        .defined((d) => {\n          const p = proj(d);\n          return p !== null;\n        })\n        .curve(d3.curveLinear); // Use linear interpolation for coordinate lines\n\n      svg\n        .append(\"path\")\n        .datum(ECLIPTIC_COORDS as [number, number][])\n        .attr(\"d\", eclipticLine)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#f0c674\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-dasharray\", \"3,3\")\n        .attr(\"opacity\", 0.7);\n    }\n\n    // RA/Dec labels\n    const raLabels = [0, 3, 6, 9, 12, 15, 18, 21];\n    raLabels.forEach((ra) => {\n      const coords = proj([ra * 15, 0]);\n      if (coords) {\n        svg\n          .append(\"text\")\n          .attr(\"x\", coords[0])\n          .attr(\"y\", height - 10)\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"fill\", \"#888\")\n          .attr(\"font-size\", 10)\n          .text(`${ra}h`);\n      }\n    });\n\n    const decLabels = [-60, -30, 0, 30, 60];\n    decLabels.forEach((dec) => {\n      const coords = proj([180, dec]);\n      if (coords && coords[0] > 0 && coords[0] < width) {\n        svg\n          .append(\"text\")\n          .attr(\"x\", 10)\n          .attr(\"y\", coords[1])\n          .attr(\"fill\", \"#888\")\n          .attr(\"font-size\", 10)\n          .text(`${dec}°`);\n      }\n    });\n\n    // Pointings\n    const pointingGroup = svg.append(\"g\").attr(\"class\", \"pointings\");\n\n    pointings.forEach((pointing) => {\n      const coords = proj([pointing.ra, pointing.dec]);\n      if (!coords) return;\n\n      const radius = pointing.radius ?? defaultRadius;\n      // Convert degree radius to pixel radius (approximate)\n      const pixelRadius = (radius / 180) * Math.min(width, height);\n\n      const group = pointingGroup.append(\"g\").attr(\"class\", \"pointing\").attr(\"cursor\", \"pointer\");\n\n      // Field of view circle\n      group\n        .append(\"circle\")\n        .attr(\"cx\", coords[0])\n        .attr(\"cy\", coords[1])\n        .attr(\"r\", Math.max(pixelRadius, 3))\n        .attr(\"fill\", getPointingColor(pointing))\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", getPointingColor(pointing))\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-opacity\", 0.8);\n\n      // Center marker\n      group\n        .append(\"circle\")\n        .attr(\"cx\", coords[0])\n        .attr(\"cy\", coords[1])\n        .attr(\"r\", 2)\n        .attr(\"fill\", getPointingColor(pointing));\n\n      // Event handlers\n      group\n        .on(\"mouseenter\", (event: MouseEvent) => {\n          setHoveredPointing(pointing);\n          setTooltipPos({ x: event.clientX, y: event.clientY });\n          onPointingHover?.(pointing);\n\n          // Highlight\n          group.select(\"circle\").attr(\"fill-opacity\", 0.6).attr(\"stroke-width\", 2.5);\n        })\n        .on(\"mouseleave\", () => {\n          setHoveredPointing(null);\n          onPointingHover?.(null);\n\n          // Remove highlight\n          group.select(\"circle\").attr(\"fill-opacity\", 0.3).attr(\"stroke-width\", 1.5);\n        })\n        .on(\"click\", () => {\n          onPointingClick?.(pointing);\n        });\n    });\n\n    // Legend\n    const legend = svg.append(\"g\").attr(\"transform\", `translate(${width - 120}, 20)`);\n\n    // Calculate legend height based on content\n    let legendHeight = 10; // base padding\n    if (colorScheme === \"status\") legendHeight += 45; // 3 status items\n    if (showGalacticPlane) legendHeight += 18;\n    if (showEcliptic) legendHeight += 18;\n    legendHeight = Math.max(legendHeight, 30); // minimum height\n\n    legend\n      .append(\"rect\")\n      .attr(\"width\", 110)\n      .attr(\"height\", legendHeight)\n      .attr(\"fill\", \"rgba(0,0,0,0.5)\")\n      .attr(\"rx\", 4);\n\n    let legendY = 15;\n\n    if (colorScheme === \"status\") {\n      const statuses = [\n        { label: \"Completed\", color: \"#4fc3a1\" },\n        { label: \"Scheduled\", color: \"#f0c674\" },\n        { label: \"Failed\", color: \"#ff6b6b\" },\n      ];\n\n      statuses.forEach((s, i) => {\n        legend\n          .append(\"circle\")\n          .attr(\"cx\", 15)\n          .attr(\"cy\", legendY + i * 15)\n          .attr(\"r\", 5)\n          .attr(\"fill\", s.color);\n\n        legend\n          .append(\"text\")\n          .attr(\"x\", 28)\n          .attr(\"y\", legendY + i * 15 + 4)\n          .attr(\"fill\", \"#ccc\")\n          .attr(\"font-size\", 10)\n          .text(s.label);\n      });\n\n      legendY += 45;\n    }\n\n    if (showGalacticPlane) {\n      legend\n        .append(\"line\")\n        .attr(\"x1\", 8)\n        .attr(\"y1\", legendY)\n        .attr(\"x2\", 22)\n        .attr(\"y2\", legendY)\n        .attr(\"stroke\", \"#ff6b6b\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-dasharray\", \"5,3\");\n\n      legend\n        .append(\"text\")\n        .attr(\"x\", 28)\n        .attr(\"y\", legendY + 4)\n        .attr(\"fill\", \"#ccc\")\n        .attr(\"font-size\", 10)\n        .text(\"Galactic plane\");\n\n      legendY += 15;\n    }\n\n    if (showEcliptic) {\n      legend\n        .append(\"line\")\n        .attr(\"x1\", 8)\n        .attr(\"y1\", legendY)\n        .attr(\"x2\", 22)\n        .attr(\"y2\", legendY)\n        .attr(\"stroke\", \"#f0c674\")\n        .attr(\"stroke-width\", 1.5)\n        .attr(\"stroke-dasharray\", \"3,3\");\n\n      legend\n        .append(\"text\")\n        .attr(\"x\", 28)\n        .attr(\"y\", legendY + 4)\n        .attr(\"fill\", \"#ccc\")\n        .attr(\"font-size\", 10)\n        .text(\"Ecliptic\");\n    }\n\n    // Add zoom and pan behavior\n    const contentGroup = svg.select(\"g.map-content\");\n    // Wrap all content except legend in a group for zooming if not already\n    const allContent = svg.selectAll(\"*:not(.legend-group)\");\n\n    const zoom = d3\n      .zoom<SVGSVGElement, unknown>()\n      .scaleExtent([0.5, 8])\n      .on(\"zoom\", (event: d3.D3ZoomEvent<SVGSVGElement, unknown>) => {\n        svg\n          .selectAll(\"path, circle, text:not(.legend-text), line:not(.legend-line)\")\n          .attr(\"transform\", event.transform.toString());\n      });\n\n    svg.call(zoom);\n\n    // Add reset zoom on double-click\n    svg.on(\"dblclick.zoom\", () => {\n      svg.transition().duration(500).call(zoom.transform, d3.zoomIdentity);\n    });\n  }, [\n    pointings,\n    selectedProjection,\n    width,\n    height,\n    showGalacticPlane,\n    showEcliptic,\n    colorScheme,\n    defaultRadius,\n    getProjection,\n    getPointingColor,\n    onPointingClick,\n    onPointingHover,\n  ]);\n\n  const formatCoord = (ra: number, dec: number) => {\n    const raH = ra / 15;\n    const h = Math.floor(raH);\n    const m = Math.floor((raH - h) * 60);\n    const raStr = `${h}h ${m}m`;\n\n    const sign = dec >= 0 ? \"+\" : \"\";\n    const d = Math.floor(Math.abs(dec));\n    const dm = Math.floor((Math.abs(dec) - d) * 60);\n    const decStr = `${sign}${d}° ${dm}'`;\n\n    return `${raStr}, ${decStr}`;\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      {/* Controls */}\n      <div className=\"flex items-center justify-between mb-3\">\n        <div className=\"flex items-center gap-4\">\n          <label className=\"text-sm text-gray-600\">\n            Projection:\n            <select\n              value={selectedProjection}\n              onChange={(e) => setSelectedProjection(e.target.value as any)}\n              className=\"ml-2 px-2 py-1 border border-gray-300 rounded text-sm\"\n            >\n              <option value=\"aitoff\">Aitoff</option>\n              <option value=\"mollweide\">Mollweide</option>\n              <option value=\"hammer\">Hammer</option>\n              <option value=\"mercator\">Mercator</option>\n            </select>\n          </label>\n        </div>\n\n        <div className=\"text-sm text-gray-500\">{pointings.length} pointings</div>\n      </div>\n\n      {/* SVG Map */}\n      <svg ref={svgRef} width={width} height={height} className=\"rounded-lg shadow-md\" />\n\n      {/* Tooltip */}\n      {hoveredPointing && (\n        <div\n          className=\"fixed bg-white border border-gray-200 rounded-lg shadow-lg p-3 z-50 pointer-events-none\"\n          style={{\n            left: tooltipPos.x + 15,\n            top: tooltipPos.y + 15,\n          }}\n        >\n          <p className=\"font-semibold text-sm\">{hoveredPointing.label || hoveredPointing.id}</p>\n          <p className=\"text-xs text-gray-500\">\n            {formatCoord(hoveredPointing.ra, hoveredPointing.dec)}\n          </p>\n          {hoveredPointing.status && (\n            <p className=\"text-xs mt-1\">\n              Status:{\" \"}\n              <span\n                className={`font-medium ${\n                  hoveredPointing.status === \"completed\"\n                    ? \"text-green-600\"\n                    : hoveredPointing.status === \"scheduled\"\n                    ? \"text-yellow-600\"\n                    : \"text-red-600\"\n                }`}\n              >\n                {hoveredPointing.status}\n              </span>\n            </p>\n          )}\n          {hoveredPointing.epoch && (\n            <p className=\"text-xs text-gray-400\">Epoch: {hoveredPointing.epoch}</p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SkyCoverageMap;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { StatCardGrid } from \"../components/summary\";\nimport { SkyCoverageMap } from \"../components/skymap\";\nimport { useImages, useSources, useJobs } from \"../hooks/useQueries\";\n\n/**\n * Home page / dashboard.\n * Shows overview of pipeline status, stats, and sky coverage.\n */\nconst HomePage: React.FC = () => {\n  const { data: images, isLoading: imagesLoading } = useImages();\n  const { data: sources, isLoading: sourcesLoading } = useSources();\n  const { data: jobs, isLoading: jobsLoading } = useJobs();\n\n  // Build stats for StatCardGrid\n  const stats = [\n    {\n      label: \"Total Images\",\n      value: images?.length ?? 0,\n      icon: \"IMG\",\n      href: \"/images\",\n      variant: \"primary\" as const,\n    },\n    {\n      label: \"Detected Sources\",\n      value: sources?.length ?? 0,\n      icon: \"SRC\",\n      href: \"/sources\",\n      variant: \"success\" as const,\n    },\n    {\n      label: \"Pipeline Jobs\",\n      value: jobs?.length ?? 0,\n      icon: \"JOB\",\n      href: \"/jobs\",\n      variant: \"info\" as const,\n    },\n  ];\n\n  // Build pointing data for sky coverage from images\n  const pointings = React.useMemo(() => {\n    if (!images) return [];\n    return images\n      .filter((img: any) => img.pointing_ra_deg != null && img.pointing_dec_deg != null)\n      .map((img: any) => ({\n        id: img.id,\n        ra: img.pointing_ra_deg,\n        dec: img.pointing_dec_deg,\n        label: img.path?.split(\"/\").pop() || img.id,\n        status:\n          img.qa_grade === \"good\" ? \"completed\" : img.qa_grade === \"fail\" ? \"failed\" : \"scheduled\",\n      }));\n  }, [images]);\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">DSA-110 Continuum Imaging Pipeline</h1>\n\n      <p className=\"text-gray-600 mb-8\">\n        Monitor and manage the radio imaging pipeline for the Deep Synoptic Array.\n      </p>\n\n      {/* Stats overview */}\n      <section className=\"mb-8\">\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Pipeline Overview</h2>\n        <StatCardGrid cards={stats} isLoading={imagesLoading || sourcesLoading || jobsLoading} />\n      </section>\n\n      {/* Sky Coverage Map */}\n      {pointings.length > 0 && (\n        <section className=\"mb-8\">\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Sky Coverage</h2>\n          <div className=\"card p-4\">\n            <SkyCoverageMap\n              pointings={pointings as any}\n              height={350}\n              showGalacticPlane\n              showEcliptic\n              colorScheme=\"status\"\n            />\n          </div>\n        </section>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10\">\n        <DashboardCard\n          title=\"Images\"\n          description=\"Browse processed FITS images and view QA assessments.\"\n          link=\"/images\"\n          icon=\"IMG\"\n        />\n        <DashboardCard\n          title=\"Sources\"\n          description=\"Explore detected radio sources and lightcurves.\"\n          link=\"/sources\"\n          icon=\"SRC\"\n        />\n        <DashboardCard\n          title=\"Jobs\"\n          description=\"Monitor pipeline jobs and view provenance.\"\n          link=\"/jobs\"\n          icon=\"JOB\"\n        />\n      </div>\n\n      <section className=\"card p-6\">\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Quick Links</h2>\n        <ul className=\"space-y-2\">\n          <li>\n            <a\n              href=\"/docs/troubleshooting.md\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"text-blue-600 hover:text-blue-800 hover:underline\"\n            >\n              Troubleshooting Guide\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"/api/health\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"text-blue-600 hover:text-blue-800 hover:underline\"\n            >\n              API Health Check\n            </a>\n          </li>\n        </ul>\n      </section>\n    </div>\n  );\n};\n\ninterface DashboardCardProps {\n  title: string;\n  description: string;\n  link: string;\n  icon: string;\n}\n\nconst DashboardCard: React.FC<DashboardCardProps> = ({ title, description, link, icon }) => (\n  <Link to={link} className=\"card p-6 hover:shadow-lg transition-shadow group\">\n    <div className=\"text-3xl mb-3\">{icon}</div>\n    <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors mb-2\">\n      {title}\n    </h3>\n    <p className=\"text-gray-600 text-sm\">{description}</p>\n  </Link>\n);\n\nexport default HomePage;\n"],"names":["VARIANT_CLASSES","ICON_CLASSES","formatCompact","value","formatWithSuffix","num","suffix","StatCard","label","subtitle","variant","icon","href","onClick","formatNumber","compactFormat","isLoading","error","ariaLabel","className","formattedValue","isClickable","accessibleLabel","cardContent","jsx","e","jsxs","Link","COLUMN_CLASSES","StatCardGrid","cards","columns","card","index","galacticToEquatorial","l","b","lRad","bRad","raGP","decGP","lAscend","sinDec","dec","y","x","ra","decDeg","eclipticToEquatorial","eclipticLon","oblRad","lonRad","GALACTIC_PLANE_COORDS","_","i","ECLIPTIC_COORDS","SkyCoverageMap","pointings","projection","width","height","showGalacticPlane","showEcliptic","showConstellations","colorScheme","defaultRadius","onPointingClick","onPointingHover","svgRef","useRef","selectedProjection","setSelectedProjection","useState","hoveredPointing","setHoveredPointing","tooltipPos","setTooltipPos","getProjection","useCallback","scale","geoMollweide","geoHammer","d3.geoMercator","geoAitoff","getPointingColor","pointing","hash","a","d3.interpolateRainbow","useEffect","svg","d3.select","proj","path","d3.geoPath","graticule","d3.geoGraticule","galacticLine","d3.line","d","p","d3.curveLinear","eclipticLine","coords","pointingGroup","pixelRadius","group","event","legend","legendHeight","legendY","s","zoom","d3.zoom","d3.zoomIdentity","formatCoord","raH","h","m","raStr","sign","dm","decStr","HomePage","images","imagesLoading","useImages","sources","sourcesLoading","useSources","jobs","jobsLoading","useJobs","stats","React","img","DashboardCard","title","description","link"],"mappings":"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"}