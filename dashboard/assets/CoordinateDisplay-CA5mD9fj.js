import{j as e,r as v}from"./index-CPQ429lP.js";import{r as A}from"./relativeTime-Dp84ug83.js";const _=(s,r=2)=>{const t=s/15,i=Math.floor(t),n=(t-i)*60,o=Math.floor(n),a=(n-o)*60;return`${i.toString().padStart(2,"0")}h ${o.toString().padStart(2,"0")}m ${a.toFixed(r).padStart(r+3,"0")}s`},b=(s,r=1)=>{const t=s>=0?"+":"-",i=Math.abs(s),n=Math.floor(i),o=(i-n)*60,a=Math.floor(o),c=(o-a)*60;return`${t}${n.toString().padStart(2,"0")}° ${a.toString().padStart(2,"0")}′ ${c.toFixed(r).padStart(r+3,"0")}″`},x=(s,r=4)=>`${s.toFixed(r)}°`,w=({qaGrade:s,qaSummary:r})=>{const t=()=>{switch(s){case"good":return"badge badge-success";case"warn":return"badge badge-warning";case"fail":return"badge badge-danger";default:return"badge badge-secondary"}};return e.jsx("span",{className:t(),title:r||"No QA summary available",children:s?s.charAt(0).toUpperCase()+s.slice(1):"Unknown"})},j=({logsUrl:s,qaUrl:r})=>e.jsxs("div",{children:[s&&e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"View Logs"}),r&&e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:"QA Report"})]}),$=({runId:s,msPath:r,calTable:t,calUrl:i,pointingDecDeg:n,pointingRaDeg:o,qaGrade:a,qaSummary:c,logsUrl:l,qaUrl:d,msUrl:N,imageUrl:p,createdAt:u})=>{const h=(m,f,y)=>e.jsxs("span",{className:"provenance-item",children:[e.jsx("strong",{children:m})," ",y?e.jsx("a",{href:y,target:"_blank",rel:"noreferrer",children:f}):f]}),g=m=>m?m.split("/").pop()||m:void 0,S=o!==void 0||n!==void 0,C=o!=null?_(o):"unknown",k=n!=null?b(n):"unknown";return e.jsxs("div",{className:"provenance-strip",style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center",fontSize:"0.95rem"},children:[s&&h("Run:",s,l),r&&h("MS:",g(r),N),t&&h("Cal:",g(t),i),p&&h("Image:",g(p),p),S&&e.jsxs("span",{className:"provenance-item",children:[e.jsx("strong",{children:"Pointing:"})," RA ",C,", Dec ",k]}),a&&e.jsxs("span",{className:"provenance-item",style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("strong",{children:"QA:"})," ",e.jsx(w,{qaGrade:a,qaSummary:c}),c&&e.jsx("span",{style:{color:"#666"},children:c}),d&&e.jsx(j,{qaUrl:d})]}),u&&e.jsxs("span",{className:"provenance-item",children:[e.jsx("strong",{children:"Created:"})," ",A(u)]}),!s&&l&&e.jsx(j,{logsUrl:l})]})},M={CAL_TABLE_MISSING:{user_message:"Calibration table not found for this Measurement Set",action:"Re-run calibration or choose an existing table",severity:"warn",doc_anchor:"calibration_missing_table"},CAL_APPLY_FAILED:{user_message:"Calibration apply failed",action:"Inspect cal logs; retry apply",severity:"error",doc_anchor:"calibration_apply_failed"},IMAGE_CLEAN_FAILED:{user_message:"Imaging step failed",action:"Check imaging parameters; retry",severity:"error",doc_anchor:"imaging_tclean_failed"},PHOTOMETRY_BAD_COORDS:{user_message:"Invalid coordinates for photometry",action:"Verify RA/Dec or region selection",severity:"warn",doc_anchor:"photometry_bad_coords"},MS_NOT_FOUND:{user_message:"Measurement Set not found",action:"Confirm path exists; rescan MS directory",severity:"error",doc_anchor:"ms_not_found"},PRODUCTS_DB_UNAVAILABLE:{user_message:"Products database unavailable",action:"Check DB path/permissions; retry",severity:"error",doc_anchor:"db_unavailable"},STREAMING_STALE_STATUS:{user_message:"Streaming status is stale",action:"Verify streaming service is running",severity:"warn",doc_anchor:"streaming_stale"},ABSURD_DISABLED:{user_message:"Task queue service is disabled",action:"Enable queue service or proceed without it",severity:"info"},RATE_LIMITED:{user_message:"Too many requests",action:"Wait and retry; reduce polling",severity:"warn"},VALIDATION_FAILED:{user_message:"Input validation failed",action:"Fix highlighted fields and retry",severity:"warn"},NETWORK_ERROR:{user_message:"Unable to reach the server",action:"Check your connection and try again",severity:"error"}},E={user_message:"Request failed",action:"Please try again later",severity:"error"},L=(s={})=>{const r=s.code?M[s.code]:void 0,t=r??E;return{user_message:t.user_message,action:t.action,severity:t.severity,ref_id:s.ref_id,details:s.details,trace_id:s.trace_id,doc_anchor:r?.doc_anchor??s.doc_anchor}},T=({details:s,traceId:r})=>{const[t,i]=v.useState(!1);return Object.keys(s).length>0||r?e.jsxs("div",{className:"error-details-expander",style:{marginTop:"8px"},children:[e.jsx("button",{onClick:()=>i(!t),type:"button",style:{background:"none",border:"1px solid #ccc",padding:"4px 8px",cursor:"pointer",borderRadius:"4px"},children:t?"Hide Details":"Show Details"}),t&&e.jsxs("div",{className:"error-details-content",style:{marginTop:"8px"},children:[Object.keys(s).length>0&&e.jsx("pre",{style:{background:"#f5f5f5",padding:"8px",borderRadius:"4px",overflow:"auto"},children:JSON.stringify(s,null,2)}),r&&e.jsxs("p",{className:"trace-id",style:{fontSize:"0.85em",color:"#666",marginTop:"4px"},children:["Trace ID: ",r]})]})]}):null},R=({refId:s,docAnchor:r})=>!s&&!r?null:e.jsxs("div",{className:"error-action-hint",style:{display:"flex",gap:"12px",marginTop:"8px"},children:[s&&e.jsx("a",{href:`/logs/${s}`,className:"error-link",children:"View logs"}),r&&e.jsx("a",{href:`/docs#${r}`,className:"error-link",children:"Troubleshoot"})]}),I={error:{borderLeftColor:"#dc3545"},warn:{borderLeftColor:"#ffc107"},info:{borderLeftColor:"#17a2b8"}},B=({error:s,onRetry:r})=>{const t=L(s);return e.jsxs("div",{className:"error-display",style:{padding:"16px",borderLeft:"4px solid",backgroundColor:"#f8f9fa",borderRadius:"4px",...I[t.severity]},children:[e.jsx("h3",{style:{margin:"0 0 8px",fontSize:"1.1em"},children:t.user_message}),e.jsx("p",{style:{margin:"0 0 12px",color:"#666"},children:t.action}),t.details&&e.jsx(T,{details:t.details,traceId:t.trace_id}),e.jsx(R,{refId:t.ref_id,docAnchor:t.doc_anchor}),r&&e.jsx("button",{type:"button",onClick:r,style:{marginTop:"12px",padding:"8px 16px",backgroundColor:"#0066cc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]})},O={none:"",sm:"p-3",md:"p-4",lg:"p-6"},H=({title:s,subtitle:r,children:t,className:i="",actions:n,padding:o="md",hoverable:a=!1})=>e.jsxs("div",{className:`card ${O[o]} ${a?"hover:shadow-md transition-shadow cursor-pointer":""} ${i}`,children:[(s||n)&&e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[s&&e.jsx("h3",{className:"font-semibold text-gray-900",children:s}),r&&e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:r})]}),n&&e.jsx("div",{className:"flex items-center gap-2",children:n})]}),t]}),P=({raDeg:s,decDeg:r,showDecimal:t=!0,compact:i=!1,label:n,allowFormatToggle:o=!1})=>{const[a,c]=v.useState(!0),l=_(s),d=b(r);return i?e.jsxs("div",{className:"font-mono text-sm",children:[n&&e.jsxs("span",{className:"text-gray-500 mr-2",children:[n,":"]}),a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-900",children:l}),e.jsx("span",{className:"text-gray-400 mx-1",children:","}),e.jsx("span",{className:"text-gray-900",children:d})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-900",children:x(s,6)}),e.jsx("span",{className:"text-gray-400 mx-1",children:","}),e.jsx("span",{className:"text-gray-900",children:x(r,6)})]}),o&&e.jsx("button",{type:"button",onClick:()=>c(!a),className:"ml-2 text-xs text-blue-600 hover:text-blue-800",title:a?"Switch to decimal degrees":"Switch to HMS/DMS",children:"Toggle"})]}):e.jsxs("div",{className:"space-y-2",children:[(n||o)&&e.jsxs("div",{className:"flex items-center justify-between",children:[n&&e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:n}),o&&e.jsxs("button",{type:"button",onClick:()=>c(!a),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:a?"Switch to decimal degrees":"Switch to HMS/DMS",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),a?"Decimal":"HMS/DMS"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Right Ascension"}),a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-mono text-sm text-gray-900",children:l}),t&&e.jsx("div",{className:"font-mono text-xs text-gray-500",children:x(s,6)})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-mono text-sm text-gray-900",children:x(s,6)}),t&&e.jsx("div",{className:"font-mono text-xs text-gray-500",children:l})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Declination"}),a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-mono text-sm text-gray-900",children:d}),t&&e.jsx("div",{className:"font-mono text-xs text-gray-500",children:x(r,6)})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-mono text-sm text-gray-900",children:x(r,6)}),t&&e.jsx("div",{className:"font-mono text-xs text-gray-500",children:d})]})]})]})]})};export{H as C,B as E,$ as P,P as a};
//# sourceMappingURL=CoordinateDisplay-CA5mD9fj.js.map
