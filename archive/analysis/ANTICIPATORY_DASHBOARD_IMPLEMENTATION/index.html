
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://code.deepsynoptic.org/dsa110-contimg/archive/analysis/ANTICIPATORY_DASHBOARD_IMPLEMENTATION/" rel="canonical"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.31" name="generator"/>
<title>Anticipatory Dashboard Implementation Plan - DSA-110 Continuum Imaging Pipeline</title>
<link href="../../../assets/stylesheets/main.3cba04c6.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#anticipatory-dashboard-implementation-plan">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DSA-110 Continuum Imaging Pipeline
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Anticipatory Dashboard Implementation Plan
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DSA-110 Continuum Imaging Pipeline
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DOCUMENTATION_QUICK_REFERENCE/">
<span class="md-ellipsis">
    Documentation Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/">
<span class="md-ellipsis">
    Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/DIRECTORY_ARCHITECTURE/">
<span class="md-ellipsis">
    Directory Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/modules/">
<span class="md-ellipsis">
    Modules
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/control-panel/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/aoflagger/">
<span class="md-ellipsis">
    AOFlagger
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/frontend_design/">
<span class="md-ellipsis">
    Frontend Design
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_8">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/dashboard_mockups/">
<span class="md-ellipsis">
    Mockups
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/GLOSSARY/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
<span class="md-ellipsis">
    Pipeline
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
            Pipeline
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_stage_architecture/">
<span class="md-ellipsis">
    Stage Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_workflow_visualization/">
<span class="md-ellipsis">
    Workflow Visualization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_production_features/">
<span class="md-ellipsis">
    Production Features
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_patterns/">
<span class="md-ellipsis">
    Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
<span class="md-ellipsis">
    Science
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
            Science
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/science/photometry_normalization/">
<span class="md-ellipsis">
    Photometry Normalization
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/mcp_browser_server_setup/">
<span class="md-ellipsis">
    Browser MCP Server
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Tutorials
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/HDF5_TO_MS_TUTORIAL/">
<span class="md-ellipsis">
    HDF5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/simulation-tutorial/">
<span class="md-ellipsis">
    Simulation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/calibrate-apply/">
<span class="md-ellipsis">
    Calibrate and Apply
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/convert-standalone/">
<span class="md-ellipsis">
    Convert Standalone
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-ellipsis">
    Notebooks
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/bandpass_calibration_test.ipynb">
<span class="md-ellipsis">
    Bandpass Calibration Test
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/calibrator_helper.py">
<span class="md-ellipsis">
    Calibrator Helper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/CalibratorSearch.ipynb">
<span class="md-ellipsis">
    Calibrator Search
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/ms_staging_workflow.ipynb">
<span class="md-ellipsis">
    MS Staging Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    How-To Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/streaming/">
<span class="md-ellipsis">
    Streaming Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/dashboard/">
<span class="md-ellipsis">
    Dashboard Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/github_pages_walkthrough/">
<span class="md-ellipsis">
    GitHub Pages Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
<span class="md-ellipsis">
    Quickstarts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            Quickstarts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/quickstart/">
<span class="md-ellipsis">
    General
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/control-panel-quickstart/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/LINEAR_SETUP_QUICKSTART/">
<span class="md-ellipsis">
    Linear Setup
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
<span class="md-ellipsis">
    Testing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_5">
<span class="md-nav__icon md-icon"></span>
            Testing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/FAST_TESTING/">
<span class="md-ellipsis">
    Fast Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/PIPELINE_TESTING_GUIDE/">
<span class="md-ellipsis">
    Pipeline Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/TEST_FLAG_SUBCOMMAND/">
<span class="md-ellipsis">
    Flag Subcommand
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/build-vp-from-h5/">
<span class="md-ellipsis">
    Build VP from h5
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
<span class="md-ellipsis">
    Calibration
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
            Calibration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/CALIBRATION_DETAILED_PROCEDURE/">
<span class="md-ellipsis">
    Detailed Procedure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/FIND_CALIBRATOR_TRANSIT_DATA/">
<span class="md-ellipsis">
    Find Calibrator Transit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/IMAGE_0834_TRANSIT_5MIN/">
<span class="md-ellipsis">
    Image 0834 Transit 5min
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
<span class="md-ellipsis">
    Mosaic
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_9">
<span class="md-nav__icon md-icon"></span>
            Mosaic
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/mosaic_quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/mosaic/">
<span class="md-ellipsis">
    Complete Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
<span class="md-ellipsis">
    Quality Assurance
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_10">
<span class="md-nav__icon md-icon"></span>
            Quality Assurance
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/QUALITY_ASSURANCE_SETUP/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/quicklook/">
<span class="md-ellipsis">
    Quick Look
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/reprocess/">
<span class="md-ellipsis">
    Reprocess
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/USING_ORCHESTRATOR_CLI/">
<span class="md-ellipsis">
    Using Orchestrator CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/LINEAR_INTEGRATION/">
<span class="md-ellipsis">
    Linear Integration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/frontend-initial-setup/">
<span class="md-ellipsis">
    Frontend Initial Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/PARAMETER_OPTIMIZATION_GUIDE/">
<span class="md-ellipsis">
    AOFlagger Parameter Optimization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/downsampling_guide/">
<span class="md-ellipsis">
    Downsampling Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_17" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_17_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_17">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/uvh5_to_ms_conversion/">
<span class="md-ellipsis">
    UVH5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
<span class="md-ellipsis">
    API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/api-endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_1_2">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/dashboard_backend_api/">
<span class="md-ellipsis">
    API Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/dashboard_pages_and_features/">
<span class="md-ellipsis">
    Pages &amp; Features
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/backend_integration_snippets/">
<span class="md-ellipsis">
    Integration Snippets
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/calibration-overview/">
<span class="md-ellipsis">
    Calibration Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/cli/">
<span class="md-ellipsis">
    CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/control-panel-cheatsheet/">
<span class="md-ellipsis">
    Control Panel Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/database_schema/">
<span class="md-ellipsis">
    Database Schema
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/env/">
<span class="md-ellipsis">
    Environment Variables
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/CRITICAL_PYTHON_ENVIRONMENT/">
<span class="md-ellipsis">
    Critical Python Environment
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
<span class="md-ellipsis">
    Optimizations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
            Optimizations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/optimizations/OPTIMIZATION_API/">
<span class="md-ellipsis">
    API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/optimizations/PROFILING_GUIDE/">
<span class="md-ellipsis">
    Profiling Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Operations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-ellipsis">
    Deployment
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/deploy-docker/">
<span class="md-ellipsis">
    Docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/deploy-systemd/">
<span class="md-ellipsis">
    systemd
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/port-management/">
<span class="md-ellipsis">
    Port Management
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/refant_quick_reference/">
<span class="md-ellipsis">
    Refant Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/service_restart_fix/">
<span class="md-ellipsis">
    Service Restart Fix
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/systemd-migration/">
<span class="md-ellipsis">
    Systemd Migration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Archive
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/archive/CONTRIBUTING_TODO/">
<span class="md-ellipsis">
    Contributing to TODO
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/archive/rules/">
<span class="md-ellipsis">
    Rules
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#table-of-contents">
<span class="md-ellipsis">
      Table of Contents
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-overview">
<span class="md-ellipsis">
      Architecture Overview
    </span>
</a>
<nav aria-label="Architecture Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-principles">
<span class="md-ellipsis">
      Core Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#system-components">
<span class="md-ellipsis">
      System Components
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#streaming-pipeline-integration">
<span class="md-ellipsis">
      Streaming Pipeline Integration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#state-management-system">
<span class="md-ellipsis">
      State Management System
    </span>
</a>
<nav aria-label="State Management System" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboard-state-types">
<span class="md-ellipsis">
      Dashboard State Types
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#state-store-zustand">
<span class="md-ellipsis">
      State Store (Zustand)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-fetching-anticipation-engine">
<span class="md-ellipsis">
      Pre-fetching &amp; Anticipation Engine
    </span>
</a>
<nav aria-label="Pre-fetching &amp; Anticipation Engine" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-fetch-strategy">
<span class="md-ellipsis">
      Pre-fetch Strategy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#preload-target-calculator">
<span class="md-ellipsis">
      Preload Target Calculator
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#contextual-intelligence">
<span class="md-ellipsis">
      Contextual Intelligence
    </span>
</a>
<nav aria-label="Contextual Intelligence" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#action-suggestion-engine">
<span class="md-ellipsis">
      Action Suggestion Engine
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#state-transition-logic">
<span class="md-ellipsis">
      State Transition Logic
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow-state-machine">
<span class="md-ellipsis">
      Workflow State Machine
    </span>
</a>
<nav aria-label="Workflow State Machine" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow-definition">
<span class="md-ellipsis">
      Workflow Definition
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflow-manager">
<span class="md-ellipsis">
      Workflow Manager
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ui-components">
<span class="md-ellipsis">
      UI Components
    </span>
</a>
<nav aria-label="UI Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#adaptive-dashboard-shell">
<span class="md-ellipsis">
      Adaptive Dashboard Shell
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#idle-view-minimal">
<span class="md-ellipsis">
      Idle View (Minimal)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#discovery-view-focused">
<span class="md-ellipsis">
      Discovery View (Focused)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#action-bar-contextual">
<span class="md-ellipsis">
      Action Bar (Contextual)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vast-inspired-patterns-integration">
<span class="md-ellipsis">
      VAST-Inspired Patterns Integration
    </span>
</a>
<nav aria-label="VAST-Inspired Patterns Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-vast-patterns-to-adopt">
<span class="md-ellipsis">
      Key VAST Patterns to Adopt
    </span>
</a>
<nav aria-label="Key VAST Patterns to Adopt" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-generic-table-component-pattern">
<span class="md-ellipsis">
      1. Generic Table Component Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-detail-page-pattern">
<span class="md-ellipsis">
      2. Detail Page Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-query-interface-pattern">
<span class="md-ellipsis">
      3. Query Interface Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-measurement-pair-metrics">
<span class="md-ellipsis">
      4. Measurement Pair Metrics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#5-forced-extraction-pattern">
<span class="md-ellipsis">
      5. Forced Extraction Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#6-source-statistics-calculation">
<span class="md-ellipsis">
      6. Source Statistics Calculation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#7-visualization-patterns">
<span class="md-ellipsis">
      7. Visualization Patterns
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#8-data-storage-patterns">
<span class="md-ellipsis">
      8. Data Storage Patterns
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#9-bulk-operations-pattern">
<span class="md-ellipsis">
      9. Bulk Operations Pattern
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#10-configuration-management">
<span class="md-ellipsis">
      10. Configuration Management
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-into-implementation-phases">
<span class="md-ellipsis">
      Integration into Implementation Phases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-phases">
<span class="md-ellipsis">
      Implementation Phases
    </span>
</a>
<nav aria-label="Implementation Phases" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-1-foundation-weeks-1-2">
<span class="md-ellipsis">
      Phase 1: Foundation (Weeks 1-2)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-pre-fetching-engine-weeks-3-4">
<span class="md-ellipsis">
      Phase 2: Pre-fetching Engine (Weeks 3-4)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-3-contextual-intelligence-weeks-5-6">
<span class="md-ellipsis">
      Phase 3: Contextual Intelligence (Weeks 5-6)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-4-ui-components-weeks-7-8">
<span class="md-ellipsis">
      Phase 4: UI Components (Weeks 7-8)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-45-analysis-workspace-foundation-weeks-9-10">
<span class="md-ellipsis">
      Phase 4.5: Analysis Workspace Foundation (Weeks 9-10)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-46-analysis-tools-implementation-weeks-11-12">
<span class="md-ellipsis">
      Phase 4.6: Analysis Tools Implementation (Weeks 11-12)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-47-analysis-workspace-enhancement-weeks-13-14">
<span class="md-ellipsis">
      Phase 4.7: Analysis Workspace Enhancement (Weeks 13-14)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-5-integration-polish-weeks-15-16">
<span class="md-ellipsis">
      Phase 5: Integration &amp; Polish (Weeks 15-16)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#streaming-pipeline-integration_1">
<span class="md-ellipsis">
      Streaming Pipeline Integration
    </span>
</a>
<nav aria-label="Streaming Pipeline Integration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#autonomous-operation-tracking">
<span class="md-ellipsis">
      Autonomous Operation Tracking
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-override-controller">
<span class="md-ellipsis">
      Manual Override Controller
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autonomous-operations-display">
<span class="md-ellipsis">
      Autonomous Operations Display
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-control-view">
<span class="md-ellipsis">
      Manual Control View
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#autonomous-operation-monitoring">
<span class="md-ellipsis">
      Autonomous Operation Monitoring
    </span>
</a>
<nav aria-label="Autonomous Operation Monitoring" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#operation-types">
<span class="md-ellipsis">
      Operation Types
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#real-time-operation-updates">
<span class="md-ellipsis">
      Real-time Operation Updates
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operation-history">
<span class="md-ellipsis">
      Operation History
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manual-override-control">
<span class="md-ellipsis">
      Manual Override &amp; Control
    </span>
</a>
<nav aria-label="Manual Override &amp; Control" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#override-triggers">
<span class="md-ellipsis">
      Override Triggers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#control-scope">
<span class="md-ellipsis">
      Control Scope
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#override-workflow">
<span class="md-ellipsis">
      Override Workflow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#return-to-autonomous">
<span class="md-ellipsis">
      Return to Autonomous
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analysis-exploration-workspace">
<span class="md-ellipsis">
      Analysis &amp; Exploration Workspace
    </span>
</a>
<nav aria-label="Analysis &amp; Exploration Workspace" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#design-principles">
<span class="md-ellipsis">
      Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workspace-architecture">
<span class="md-ellipsis">
      Workspace Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#trust-indicators">
<span class="md-ellipsis">
      Trust Indicators
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#catalog-comparison-tool">
<span class="md-ellipsis">
      Catalog Comparison Tool
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#image-analysis-tool">
<span class="md-ellipsis">
      Image Analysis Tool
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#source-investigation-tool">
<span class="md-ellipsis">
      Source Investigation Tool
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#reproducibility-system">
<span class="md-ellipsis">
      Reproducibility System
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deterministic-operations">
<span class="md-ellipsis">
      Deterministic Operations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#analysis-workspace-view">
<span class="md-ellipsis">
      Analysis Workspace View
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#transition-to-analysis-mode">
<span class="md-ellipsis">
      Transition to Analysis Mode
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-examples">
<span class="md-ellipsis">
      Code Examples
    </span>
</a>
<nav aria-label="Code Examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-dashboard-page">
<span class="md-ellipsis">
      Complete Dashboard Page
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-load-investigation-data">
<span class="md-ellipsis">
      Pre-load Investigation Data
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-metrics-for-success">
<span class="md-ellipsis">
      Key Metrics for Success
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tool-dependencies-summary">
<span class="md-ellipsis">
      Tool Dependencies Summary
    </span>
</a>
<nav aria-label="Tool Dependencies Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-45-foundation">
<span class="md-ellipsis">
      Phase 4.5 (Foundation)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-46-core-tools">
<span class="md-ellipsis">
      Phase 4.6 (Core Tools)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-47-enhancements">
<span class="md-ellipsis">
      Phase 4.7 (Enhancements)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#already-available">
<span class="md-ellipsis">
      Already Available
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#next-steps">
<span class="md-ellipsis">
      Next Steps
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="anticipatory-dashboard-implementation-plan">Anticipatory Dashboard Implementation Plan<a class="headerlink" href="#anticipatory-dashboard-implementation-plan" title="Permanent link">Â¶</a></h1>
<p><strong>Vision:</strong> A unified command center that anticipates user needs, eliminates unnecessary steps, and guides users seamlessly through complex workflows. The dashboard serves as the primary interface for monitoring and controlling the autonomous streaming pipeline, with manual override capabilities when needed.</p>
<p><strong>Philosophy:</strong> Combine Jony Ive's minimalism with Steve Jobs' workflow-focused UX - "It just works."</p>
<p><strong>Core Principle:</strong> The streaming pipeline operates autonomously, but the dashboard provides complete visibility and control. When everything runs smoothly, the dashboard stays quiet. When intervention is needed, it anticipates what you'll want to do.</p>
<hr/>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">Â¶</a></h2>
<ol>
<li><a href="#architecture-overview">Architecture Overview</a></li>
<li><a href="#streaming-pipeline-integration">Streaming Pipeline Integration</a></li>
<li><a href="#state-management-system">State Management System</a></li>
<li><a href="#pre-fetching--anticipation-engine">Pre-fetching &amp; Anticipation Engine</a></li>
<li><a href="#contextual-intelligence">Contextual Intelligence</a></li>
<li><a href="#workflow-state-machine">Workflow State Machine</a></li>
<li><a href="#ui-components">UI Components</a></li>
<li><a href="#autonomous-operation-monitoring">Autonomous Operation Monitoring</a></li>
<li><a href="#manual-override--control">Manual Override &amp; Control</a></li>
<li><a href="#analysis--exploration-workspace">Analysis &amp; Exploration Workspace</a></li>
<li><a href="#implementation-phases">Implementation Phases</a></li>
<li><a href="#code-examples">Code Examples</a></li>
</ol>
<hr/>
<h2 id="architecture-overview">Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">Â¶</a></h2>
<h3 id="core-principles">Core Principles<a class="headerlink" href="#core-principles" title="Permanent link">Â¶</a></h3>
<ol>
<li><strong>Unified Command Center</strong> - Single interface for all pipeline operations</li>
<li><strong>Autonomous-First</strong> - Dashboard monitors autonomous operations, intervenes only when needed</li>
<li><strong>State-Driven UI</strong> - Interface adapts to current context (autonomous vs manual vs analysis)</li>
<li><strong>Predictive Loading</strong> - Data loads before it's requested</li>
<li><strong>Contextual Actions</strong> - Only show relevant actions</li>
<li><strong>Workflow Guidance</strong> - Guide users through complex tasks</li>
<li><strong>Zero Configuration</strong> - Smart defaults, optional overrides</li>
<li><strong>Manual Override</strong> - Full control when autonomous operations need intervention</li>
<li><strong>Flexible Analysis</strong> - Powerful yet trustworthy exploratory tools for data products</li>
<li><strong>Deterministic Results</strong> - All analysis operations are reproducible and traceable</li>
</ol>
<h3 id="system-components">System Components<a class="headerlink" href="#system-components" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code>âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
â              Unified Command Center                      â
â  (Dashboard Shell - Adapts to autonomous/manual state)  â
âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ
                          â
        âââââââââââââââââââ¼ââââââââââââââââââ
        â                 â                 â
âââââââââ¼âââââââ  âââââââââ¼âââââââ  âââââââââ¼âââââââ
â Streaming    â  â State         â  â Pre-fetch     â
â Pipeline     â  â Machine       â  â Engine        â
â Monitor      â  â               â  â               â
ââââââââââââââââ  âââââââââââââââââ  âââââââââââââââââ
        â                 â                 â
        âââââââââââââââââââ¼ââââââââââââââââââ
                          â
        âââââââââââââââââââ¼ââââââââââââââââââ
        â                 â                 â
âââââââââ¼âââââââ  âââââââââ¼âââââââ  âââââââââ¼âââââââ
â Autonomous   â  â Manual       â  â Contextual   â
â Operations   â  â Override     â  â Intelligence â
â Tracker      â  â Controller   â  â               â
ââââââââââââââââ  âââââââââââââââââ  ââââââââââââââââ
        â                 â                 â
        âââââââââââââââââââ¼ââââââââââââââââââ
                          â
        âââââââââââââââââââ¼ââââââââââââââââââ
        â                 â                 â
âââââââââ¼âââââââ  âââââââââ¼âââââââ  âââââââââ¼âââââââ
â React Query  â  â WebSocket     â  â UI           â
â Cache        â  â Updates       â  â Components   â
ââââââââââââââââ  âââââââââââââââââ  ââââââââââââââââ
</code></pre></div>
<h3 id="streaming-pipeline-integration">Streaming Pipeline Integration<a class="headerlink" href="#streaming-pipeline-integration" title="Permanent link">Â¶</a></h3>
<p>The dashboard integrates deeply with the streaming pipeline:</p>
<ul>
<li><strong>Autonomous Operation Monitoring</strong> - Track what the pipeline is doing autonomously</li>
<li><strong>Manual Override Capabilities</strong> - Take control when needed</li>
<li><strong>Unified Status View</strong> - Single view of autonomous + manual operations</li>
<li><strong>Intervention Detection</strong> - Automatically detect when manual intervention is needed</li>
<li><strong>Control Handoff</strong> - Seamless transition between autonomous and manual modes</li>
</ul>
<hr/>
<h2 id="state-management-system">State Management System<a class="headerlink" href="#state-management-system" title="Permanent link">Â¶</a></h2>
<h3 id="dashboard-state-types">Dashboard State Types<a class="headerlink" href="#dashboard-state-types" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/stores/dashboardState.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">DashboardMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'idle'</span><span class="w">           </span><span class="c1">// Normal monitoring, autonomous operations running smoothly</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="w">     </span><span class="c1">// Streaming pipeline operating autonomously (monitoring mode)</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'discovery'</span><span class="w">      </span><span class="c1">// ESE candidate detected</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'investigation'</span><span class="w">  </span><span class="c1">// User investigating something</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'debugging'</span><span class="w">      </span><span class="c1">// System issue detected</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="w"> </span><span class="c1">// User has taken manual control (override mode)</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">;</span><span class="w">      </span><span class="c1">// Analysis/exploration workspace for data products</span>

<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">SystemStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'healthy'</span><span class="w">        </span><span class="c1">// Everything operational</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'attention'</span><span class="w">      </span><span class="c1">// Something needs looking at</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'action-required'</span><span class="p">;</span><span class="w"> </span><span class="c1">// Immediate action needed</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">IdleState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">SystemStatus</span><span class="p">;</span>
<span class="w">  </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'running'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'stopped'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'error'</span><span class="p">;</span>
<span class="w">    </span><span class="nx">autonomous</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Is pipeline operating autonomously?</span>
<span class="w">    </span><span class="nx">lastActivity</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AutonomousState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'running'</span><span class="p">;</span>
<span class="w">    </span><span class="nx">currentOperations</span><span class="o">:</span><span class="w"> </span><span class="kt">AutonomousOperation</span><span class="p">[];</span>
<span class="w">    </span><span class="nx">metrics</span><span class="o">:</span><span class="w"> </span><span class="kt">StreamingMetrics</span><span class="p">;</span>
<span class="w">    </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">StreamingConfig</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AutonomousOperation</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'conversion'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'calibration'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'imaging'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'mosaicking'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'qa'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'pending'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'in-progress'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'completed'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'failed'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">progress?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="c1">// 0-100</span>
<span class="w">  </span><span class="nx">startedAt</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">estimatedCompletion?</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">resourceUsage</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">cpu</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">    </span><span class="nx">memory</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">details?</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">DiscoveryState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'discovery'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">candidate</span><span class="o">:</span><span class="w"> </span><span class="kt">ESECandidate</span><span class="p">;</span>
<span class="w">  </span><span class="nx">investigationData</span><span class="o">:</span><span class="w"> </span><span class="kt">PreloadedInvestigationData</span><span class="p">;</span>
<span class="w">  </span><span class="nx">autoExpanded</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Auto-expand investigation panel</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">InvestigationState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">sourceId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">msPath?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">imageId?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'calibration'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'catalog'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'imaging'</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">preloadedData</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">DebuggingState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'debugging'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'failed-job'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'pipeline-error'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'system-warning'</span><span class="p">;</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'error'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'critical'</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">diagnosticData</span><span class="o">:</span><span class="w"> </span><span class="kt">DiagnosticData</span><span class="p">;</span>
<span class="w">  </span><span class="nx">suggestedFixes</span><span class="o">:</span><span class="w"> </span><span class="kt">SuggestedFix</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ManualControlState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="s1">'user-initiated'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'autonomous-failure'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'intervention-required'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">previousState</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">;</span><span class="w"> </span><span class="c1">// State before manual takeover</span>
<span class="w">  </span><span class="nx">controlScope</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">streaming?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Controlling streaming service</span>
<span class="w">    </span><span class="nx">calibration?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Controlling calibration</span>
<span class="w">    </span><span class="nx">imaging?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Controlling imaging</span>
<span class="w">    </span><span class="nx">mosaicking?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Controlling mosaicking</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">operations</span><span class="o">:</span><span class="w"> </span><span class="kt">ManualOperation</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AnalysisState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">workspace</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisWorkspace</span><span class="p">;</span>
<span class="w">  </span><span class="nx">activeTools</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisTool</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">dataProducts</span><span class="o">:</span><span class="w"> </span><span class="kt">DataProduct</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">trustIndicators</span><span class="o">:</span><span class="w"> </span><span class="kt">TrustIndicator</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">reproducibility</span><span class="o">:</span><span class="w"> </span><span class="kt">ReproducibilityInfo</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AnalysisWorkspace</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">createdAt</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">dataProducts</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">images</span><span class="o">:</span><span class="w"> </span><span class="kt">ImageProduct</span><span class="p">[];</span>
<span class="w">    </span><span class="nx">mosaics</span><span class="o">:</span><span class="w"> </span><span class="kt">MosaicProduct</span><span class="p">[];</span>
<span class="w">    </span><span class="nx">catalogs</span><span class="o">:</span><span class="w"> </span><span class="kt">CatalogProduct</span><span class="p">[];</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">activeComparisons</span><span class="o">:</span><span class="w"> </span><span class="kt">CatalogComparison</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">activeInvestigations</span><span class="o">:</span><span class="w"> </span><span class="kt">SourceInvestigation</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">savedViews</span><span class="o">:</span><span class="w"> </span><span class="kt">SavedView</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">AnalysisTool</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'catalog-comparison'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'image-analysis'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'source-investigation'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'mosaic-analysis'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'qa-review'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisResult</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">trustScore</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="c1">// 0-1, indicates reliability</span>
<span class="w">  </span><span class="nx">deterministic</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span><span class="w"> </span><span class="c1">// Is this operation deterministic?</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">TrustIndicator</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'qa-metric'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'calibration-status'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'catalog-match'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'reproducibility'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'trusted'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'untrusted'</span><span class="p">;</span>
<span class="w">  </span><span class="nx">details?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ReproducibilityInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">dataVersions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">catalog</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">calibration</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">codeVersion</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">canReproduce</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">reproductionScript?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">DashboardState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">IdleState</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">AutonomousState</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">DiscoveryState</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">InvestigationState</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">DebuggingState</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">ManualControlState</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="nx">AnalysisState</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">DashboardContext</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">;</span>
<span class="w">  </span><span class="nx">userIntent</span><span class="o">:</span><span class="w"> </span><span class="kt">UserIntent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="nx">recentActions</span><span class="o">:</span><span class="w"> </span><span class="kt">Action</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">workflowHistory</span><span class="o">:</span><span class="w"> </span><span class="kt">WorkflowStep</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="state-store-zustand">State Store (Zustand)<a class="headerlink" href="#state-store-zustand" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/stores/dashboardStore.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">create</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'zustand'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">immer</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'zustand/middleware/immer'</span><span class="p">;</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">DashboardStore</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">;</span>
<span class="w">  </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardContext</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Actions</span>
<span class="w">  </span><span class="nx">setState</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="w">  </span><span class="nx">transitionTo</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardMode</span><span class="p">,</span><span class="w"> </span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">unknown</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="w">  </span><span class="nx">updateContext</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">updates</span><span class="o">:</span><span class="w"> </span><span class="kt">Partial</span><span class="o">&lt;</span><span class="nx">DashboardContext</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// State helpers</span>
<span class="w">  </span><span class="nx">isIdle</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isDiscovery</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isInvestigation</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">isDebugging</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Context helpers</span>
<span class="w">  </span><span class="nx">getSuggestedActions</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">Action</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">getPreloadTargets</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">create</span><span class="o">&lt;</span><span class="nx">DashboardStore</span><span class="o">&gt;</span><span class="p">()(</span>
<span class="w">  </span><span class="nx">immer</span><span class="p">((</span><span class="nx">set</span><span class="p">,</span><span class="w"> </span><span class="nx">get</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">,</span><span class="w"> </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'healthy'</span><span class="p">,</span><span class="w"> </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">,</span><span class="w"> </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'healthy'</span><span class="p">,</span><span class="w"> </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="nx">userIntent</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
<span class="w">      </span><span class="nx">recentActions</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nx">workflowHistory</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="nx">setState</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">newState</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">set</span><span class="p">((</span><span class="nx">draft</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newState</span><span class="p">;</span>
<span class="w">      </span><span class="nx">draft</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">newState</span><span class="p">;</span>
<span class="w">    </span><span class="p">}),</span>

<span class="w">    </span><span class="nx">transitionTo</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">set</span><span class="p">((</span><span class="nx">draft</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'idle'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">,</span><span class="w"> </span>
<span class="w">            </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">data?.status</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'healthy'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span><span class="w"> </span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'discovery'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'discovery'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">candidate</span><span class="o">:</span><span class="w"> </span><span class="kt">data.candidate</span><span class="p">,</span>
<span class="w">            </span><span class="nx">investigationData</span><span class="o">:</span><span class="w"> </span><span class="kt">data.investigationData</span><span class="p">,</span>
<span class="w">            </span><span class="nx">autoExpanded</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'investigation'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">data.context</span><span class="p">,</span>
<span class="w">            </span><span class="nx">preloadedData</span><span class="o">:</span><span class="w"> </span><span class="kt">data.preloadedData</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{},</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'debugging'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'debugging'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="kt">data.issue</span><span class="p">,</span>
<span class="w">            </span><span class="nx">diagnosticData</span><span class="o">:</span><span class="w"> </span><span class="kt">data.diagnosticData</span><span class="p">,</span>
<span class="w">            </span><span class="nx">suggestedFixes</span><span class="o">:</span><span class="w"> </span><span class="kt">data.suggestedFixes</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[],</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="kt">data.streamingPipeline</span><span class="p">,</span>
<span class="w">            </span><span class="nx">lastUpdate</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="kt">data.reason</span><span class="p">,</span>
<span class="w">            </span><span class="nx">previousState</span><span class="o">:</span><span class="w"> </span><span class="kt">data.previousState</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">,</span>
<span class="w">            </span><span class="nx">controlScope</span><span class="o">:</span><span class="w"> </span><span class="kt">data.controlScope</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{},</span>
<span class="w">            </span><span class="nx">operations</span><span class="o">:</span><span class="w"> </span><span class="kt">data.operations</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[],</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="s1">'analysis'</span><span class="o">:</span>
<span class="w">          </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">mode</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">workspace</span><span class="o">:</span><span class="w"> </span><span class="kt">data.workspace</span><span class="p">,</span>
<span class="w">            </span><span class="nx">activeTools</span><span class="o">:</span><span class="w"> </span><span class="kt">data.activeTools</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nx">dataProducts</span><span class="o">:</span><span class="w"> </span><span class="kt">data.dataProducts</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nx">trustIndicators</span><span class="o">:</span><span class="w"> </span><span class="kt">data.trustIndicators</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[],</span>
<span class="w">            </span><span class="nx">reproducibility</span><span class="o">:</span><span class="w"> </span><span class="kt">data.reproducibility</span><span class="p">,</span>
<span class="w">          </span><span class="p">};</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nx">draft</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">draft</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
<span class="w">    </span><span class="p">}),</span>

<span class="w">    </span><span class="nx">updateContext</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">updates</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">set</span><span class="p">((</span><span class="nx">draft</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">draft</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span><span class="w"> </span><span class="nx">updates</span><span class="p">);</span>
<span class="w">    </span><span class="p">}),</span>

<span class="w">    </span><span class="nx">isIdle</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isAutonomous</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isDiscovery</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'discovery'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isInvestigation</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isDebugging</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'debugging'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isManualControl</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isAnalysis</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>

<span class="w">    </span><span class="nx">getSuggestedActions</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">context</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">suggestActions</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="nx">getPreloadTargets</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">state</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">get</span><span class="p">().</span><span class="nx">context</span><span class="p">;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">getPreloadTargets</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">}))</span>
<span class="p">);</span>
</code></pre></div>
<hr/>
<h2 id="pre-fetching-anticipation-engine">Pre-fetching &amp; Anticipation Engine<a class="headerlink" href="#pre-fetching-anticipation-engine" title="Permanent link">Â¶</a></h2>
<h3 id="pre-fetch-strategy">Pre-fetch Strategy<a class="headerlink" href="#pre-fetch-strategy" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useAnticipatoryPrefetch.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@tanstack/react-query'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useAnticipatoryPrefetch</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">preloadTargets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">getPreloadTargets</span><span class="p">());</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Pre-fetch based on current state</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">prefetchPromises</span><span class="o">:</span><span class="w"> </span><span class="kt">Promise</span><span class="o">&lt;</span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'idle'</span><span class="o">:</span>
<span class="w">        </span><span class="c1">// Pre-fetch likely next steps</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'attention'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// Something needs attention, pre-fetch diagnostic data</span>
<span class="w">          </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'pipeline-status'</span><span class="p">]),</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'system-metrics'</span><span class="p">]),</span>
<span class="w">          </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>

<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'discovery'</span><span class="o">:</span>
<span class="w">        </span><span class="c1">// Pre-fetch everything needed for investigation</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">candidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">candidate</span><span class="p">;</span>
<span class="w">        </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'light-curve'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'calibration-qa'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">ms_path</span><span class="p">]),</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'catalog-comparison'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'historical-context'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>

<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'investigation'</span><span class="o">:</span>
<span class="w">        </span><span class="c1">// Pre-fetch related data based on focus</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">sourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'light-curve'</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">sourceId</span><span class="p">]),</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'source-metadata'</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">sourceId</span><span class="p">]),</span>
<span class="w">          </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">msPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'ms-metadata'</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">msPath</span><span class="p">]),</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'calibration-qa'</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">msPath</span><span class="p">]),</span>
<span class="w">            </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'image-qa'</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">msPath</span><span class="p">]),</span>
<span class="w">          </span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>

<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'debugging'</span><span class="o">:</span>
<span class="w">        </span><span class="c1">// Pre-fetch diagnostic and fix data</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">issue</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">        </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'job-details'</span><span class="p">,</span><span class="w"> </span><span class="nx">issue</span><span class="p">.</span><span class="nx">id</span><span class="p">]),</span>
<span class="w">          </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="s1">'diagnostic-data'</span><span class="p">,</span><span class="w"> </span><span class="nx">issue</span><span class="p">.</span><span class="nx">id</span><span class="p">]),</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Pre-fetch based on preload targets</span>
<span class="w">    </span><span class="nx">preloadTargets</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">target</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">target</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">':'</span><span class="p">);</span>
<span class="w">      </span><span class="nx">prefetchPromises</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">        </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">prefetchQuery</span><span class="p">([</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">args</span><span class="p">])</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">prefetchPromises</span><span class="p">).</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">'Prefetch failed:'</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// Don't show errors for prefetch failures</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">preloadTargets</span><span class="p">,</span><span class="w"> </span><span class="nx">queryClient</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="preload-target-calculator">Preload Target Calculator<a class="headerlink" href="#preload-target-calculator" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/utils/preloadTargets.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getPreloadTargets</span><span class="p">(</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardContext</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">targets</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="c1">// If viewing MS, pre-fetch related data</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'view-ms'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`calibration-status:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`imaging-status:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`qa-results:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// If viewing calibration, pre-fetch imaging and QA</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'view-calibration'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`imaging-status:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`qa-results:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// If viewing image, pre-fetch QA</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'view-image'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">imageId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`qa-results:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">imageId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`catalog-overlay:</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">userIntent</span><span class="p">.</span><span class="nx">imageId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Based on recent actions, predict next steps</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lastAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">recentActions</span><span class="p">[</span><span class="nx">context</span><span class="p">.</span><span class="nx">recentActions</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">lastAction</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'calibration-completed'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`apply-calibration:</span><span class="si">${</span><span class="nx">lastAction</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">lastAction</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'imaging-completed'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="sb">`qa-results:</span><span class="si">${</span><span class="nx">lastAction</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">targets</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="contextual-intelligence">Contextual Intelligence<a class="headerlink" href="#contextual-intelligence" title="Permanent link">Â¶</a></h2>
<h3 id="action-suggestion-engine">Action Suggestion Engine<a class="headerlink" href="#action-suggestion-engine" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/utils/suggestActions.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">description?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">icon?</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ReactNode</span><span class="p">;</span>
<span class="w">  </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="ow">void</span><span class="p">;</span>
<span class="w">  </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'control'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'analysis'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'export'</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">suggestActions</span><span class="p">(</span>
<span class="w">  </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardState</span><span class="p">,</span>
<span class="w">  </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardContext</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Action</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="kt">Action</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>

<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">'idle'</span><span class="o">:</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'attention'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-details'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View Details'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'See what needs attention'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Transition to debugging mode</span>
<span class="w">            </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'debugging'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'system-warning'</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'attention'</span><span class="p">,</span><span class="w"> </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">'discovery'</span><span class="o">:</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">candidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">candidate</span><span class="p">;</span>
<span class="w">      </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigate'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Investigate'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'View full investigation data'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'investigation'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">sourceId</span><span class="o">:</span><span class="w"> </span><span class="kt">candidate.source_id</span><span class="p">,</span>
<span class="w">                </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="p">,</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-light-curve'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View Light Curve'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'See flux over time'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Data already pre-loaded</span>
<span class="w">            </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/sources/</span><span class="si">${</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="si">}</span><span class="sb">/light-curve`</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'compare-catalog'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Compare Catalog'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Compare with NVSS/VLASS'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/sources/</span><span class="si">${</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="si">}</span><span class="sb">/catalog-comparison`</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'export-report'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Export Report'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Generate investigation report'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">generateReport</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'export'</span><span class="p">,</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">'investigation'</span><span class="o">:</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">invContext</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">invContext</span><span class="p">.</span><span class="nx">msPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-calibration-qa'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View Calibration QA'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Check calibration quality'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">invContext.focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'calibration'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Data already pre-loaded</span>
<span class="w">            </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/qa/calibration/</span><span class="si">${</span><span class="nx">invContext</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">invContext</span><span class="p">.</span><span class="nx">sourceId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-light-curve'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View Light Curve'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'See flux over time'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">invContext.focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/sources/</span><span class="si">${</span><span class="nx">invContext</span><span class="p">.</span><span class="nx">sourceId</span><span class="si">}</span><span class="sb">/light-curve`</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>

<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">'debugging'</span><span class="o">:</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">issue</span><span class="p">,</span><span class="w"> </span><span class="nx">suggestedFixes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">      </span><span class="nx">suggestedFixes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">fix</span><span class="p">,</span><span class="w"> </span><span class="nx">idx</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="sb">`fix-</span><span class="si">${</span><span class="nx">idx</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">          </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">fix.label</span><span class="p">,</span>
<span class="w">          </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="kt">fix.description</span><span class="p">,</span>
<span class="w">          </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">idx</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="c1">// First fix is primary</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">applyFix</span><span class="p">(</span><span class="nx">fix</span><span class="p">);</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'control'</span><span class="p">,</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-details'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View Details'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'See full diagnostic information'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/debug/</span><span class="si">${</span><span class="nx">issue</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'investigation'</span><span class="p">,</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Add workflow-based suggestions</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">workflowSuggestions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getWorkflowSuggestions</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>
<span class="w">  </span><span class="nx">actions</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">workflowSuggestions</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">actions</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getWorkflowSuggestions</span><span class="p">(</span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="kt">DashboardContext</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Action</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">suggestions</span><span class="o">:</span><span class="w"> </span><span class="kt">Action</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lastAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">recentActions</span><span class="p">[</span><span class="nx">context</span><span class="p">.</span><span class="nx">recentActions</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>

<span class="w">  </span><span class="c1">// If calibration just completed, suggest applying it</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">lastAction</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'calibration-completed'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">suggestions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'apply-calibration'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Apply Calibration'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Apply to target observations'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">applyCalibration</span><span class="p">(</span><span class="nx">lastAction</span><span class="p">.</span><span class="nx">msPath</span><span class="p">);</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'control'</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// If imaging completed, suggest viewing QA</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">lastAction</span><span class="o">?</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'imaging-completed'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">suggestions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-qa'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'View QA Results'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Check image quality'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">primary</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">onClick</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">navigate</span><span class="p">(</span><span class="sb">`/qa/image/</span><span class="si">${</span><span class="nx">lastAction</span><span class="p">.</span><span class="nx">msPath</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">category</span><span class="o">:</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">suggestions</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="state-transition-logic">State Transition Logic<a class="headerlink" href="#state-transition-logic" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useStateTransitions.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useESECandidates</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../api/queries'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">usePipelineStatus</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../api/queries'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useStateTransitions</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transitionTo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">eseCandidates</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useESECandidates</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">pipelineStatus</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">usePipelineStatus</span><span class="p">();</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Auto-transition to discovery mode if ESE detected</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="nx">eseCandidates</span><span class="o">?</span><span class="p">.</span><span class="nx">candidates</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="nx">eseCandidates</span><span class="p">.</span><span class="nx">candidates</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">activeCandidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">eseCandidates</span><span class="p">.</span><span class="nx">candidates</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span>
<span class="w">        </span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'active'</span>
<span class="w">      </span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">activeCandidate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Pre-load investigation data</span>
<span class="w">        </span><span class="nx">preloadInvestigationData</span><span class="p">(</span><span class="nx">activeCandidate</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">investigationData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'discovery'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">candidate</span><span class="o">:</span><span class="w"> </span><span class="kt">activeCandidate</span><span class="p">,</span>
<span class="w">            </span><span class="nx">investigationData</span><span class="p">,</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Auto-transition to debugging if issues detected</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">pipelineStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">hasFailures</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pipelineStatus</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">failed</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">hasAttention</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">pipelineStatus</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">in_progress</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// Queue backing up</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">hasFailures</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">hasAttention</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'debugging'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="nx">hasFailures</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'failed-job'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'system-warning'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'pipeline-issue'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="kt">hasFailures</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'error'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'warning'</span><span class="p">,</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nx">diagnosticData</span><span class="o">:</span><span class="w"> </span><span class="kt">await</span><span class="w"> </span><span class="nx">getDiagnosticData</span><span class="p">(</span><span class="nx">pipelineStatus</span><span class="p">),</span>
<span class="w">          </span><span class="nx">suggestedFixes</span><span class="o">:</span><span class="w"> </span><span class="kt">await</span><span class="w"> </span><span class="nx">getSuggestedFixes</span><span class="p">(</span><span class="nx">pipelineStatus</span><span class="p">),</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">eseCandidates</span><span class="p">,</span><span class="w"> </span><span class="nx">pipelineStatus</span><span class="p">,</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">transitionTo</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="workflow-state-machine">Workflow State Machine<a class="headerlink" href="#workflow-state-machine" title="Permanent link">Â¶</a></h2>
<h3 id="workflow-definition">Workflow Definition<a class="headerlink" href="#workflow-definition" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/workflows/types.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="nx">WorkflowType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'ese-investigation'</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'pipeline-debugging'</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'calibration-workflow'</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="s1">'imaging-workflow'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">WorkflowStep</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">React.ComponentType</span><span class="p">;</span>
<span class="w">  </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">data?</span><span class="o">:</span><span class="w"> </span><span class="kt">unknown</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Workflow</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">WorkflowType</span><span class="p">;</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">steps</span><span class="o">:</span><span class="w"> </span><span class="kt">WorkflowStep</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">currentStep</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">WORKFLOWS</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="nx">WorkflowType</span><span class="p">,</span><span class="w"> </span><span class="nx">Workflow</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s1">'ese-investigation'</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'ese-investigation'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'ESE Investigation'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">steps</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'view-discovery'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Review Discovery'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Examine ESE candidate details'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">DiscoveryReviewStep</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'analyze-light-curve'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Analyze Light Curve'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Review flux variability over time'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">LightCurveAnalysisStep</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'verify-calibration'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Verify Calibration'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Ensure calibration quality'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">CalibrationVerificationStep</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'compare-catalog'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Compare Catalog'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Compare with known sources'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">CatalogComparisonStep</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'generate-report'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Generate Report'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Create investigation report'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">ReportGenerationStep</span><span class="p">,</span>
<span class="w">        </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">        </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nx">currentStep</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="c1">// ... other workflows</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="workflow-manager">Workflow Manager<a class="headerlink" href="#workflow-manager" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/workflows/WorkflowManager.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">WorkflowManager</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useWorkflowStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">currentWorkflow</span><span class="p">);</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">workflow</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentStep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">workflow</span><span class="p">.</span><span class="nx">steps</span><span class="p">[</span><span class="nx">workflow</span><span class="p">.</span><span class="nx">currentStep</span><span class="p">];</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">CurrentStepComponent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentStep</span><span class="p">.</span><span class="nx">component</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Progress indicator */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">WorkflowProgress</span><span class="w"> </span><span class="nx">workflow</span><span class="o">=</span><span class="p">{</span><span class="nx">workflow</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Current step */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CurrentStepComponent</span><span class="w"> </span>
<span class="w">        </span><span class="nx">step</span><span class="o">=</span><span class="p">{</span><span class="nx">currentStep</span><span class="p">}</span>
<span class="w">        </span><span class="nx">workflow</span><span class="o">=</span><span class="p">{</span><span class="nx">workflow</span><span class="p">}</span>
<span class="w">        </span><span class="nx">onComplete</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// Auto-advance to next step</span>
<span class="w">          </span><span class="nx">useWorkflowStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">advanceStep</span><span class="p">();</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">        </span><span class="nx">onSkip</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// Skip optional step</span>
<span class="w">          </span><span class="nx">useWorkflowStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">skipStep</span><span class="p">();</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">      </span><span class="o">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Suggested next actions */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">WorkflowActions</span><span class="w"> </span><span class="nx">workflow</span><span class="o">=</span><span class="p">{</span><span class="nx">workflow</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="ui-components">UI Components<a class="headerlink" href="#ui-components" title="Permanent link">Â¶</a></h2>
<h3 id="adaptive-dashboard-shell">Adaptive Dashboard Shell<a class="headerlink" href="#adaptive-dashboard-shell" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/DashboardShell.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">DashboardShell</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">suggestedActions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">getSuggestedActions</span><span class="p">());</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="s1">'100vh'</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Adaptive header */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">DashboardHeader</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Main content - adapts to state */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">flexGrow</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">overflow</span><span class="o">:</span><span class="w"> </span><span class="s1">'auto'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">IdleView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">AutonomousView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'discovery'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">DiscoveryView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'investigation'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">InvestigationView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'debugging'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">DebuggingView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">ManualControlView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'analysis'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">AnalysisView</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Contextual action bar */</span><span class="p">}</span>
<span class="w">      </span><span class="p">{</span><span class="nx">suggestedActions</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">ActionBar</span><span class="w"> </span><span class="nx">actions</span><span class="o">=</span><span class="p">{</span><span class="nx">suggestedActions</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="p">)}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="idle-view-minimal">Idle View (Minimal)<a class="headerlink" href="#idle-view-minimal" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/views/IdleView.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">IdleView</span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">IdleState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">getStatusColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">SystemStatus</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'healthy'</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">'#4CAF50'</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'attention'</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">'#FFC107'</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="s1">'action-required'</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">'#F44336'</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span>
<span class="w">      </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">        </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="s1">'100%'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">'#0A0E27'</span><span class="p">,</span>
<span class="w">      </span><span class="p">}}</span>
<span class="w">    </span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Typography</span>
<span class="w">        </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h1"</span>
<span class="w">        </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">          </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="s1">'72px'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">fontWeight</span><span class="o">:</span><span class="w"> </span><span class="kt">300</span><span class="p">,</span>
<span class="w">          </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="kt">getStatusColor</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">),</span>
<span class="w">          </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">      </span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'healthy'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'All Quiet'</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'attention'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'Attention'</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'action-required'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'Action Required'</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">Typography</span>
<span class="w">        </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h6"</span>
<span class="w">        </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">          </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#F5F5F5'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">fontWeight</span><span class="o">:</span><span class="w"> </span><span class="kt">300</span><span class="p">,</span>
<span class="w">          </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">      </span><span class="o">&gt;</span>
<span class="w">        </span><span class="nx">Monitoring</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">universe</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'healthy'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"contained"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'debugging'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'system-warning'</span><span class="p">,</span>
<span class="w">                </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'attention'</span><span class="p">,</span>
<span class="w">                </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="kt">state.status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'action-required'</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'error'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'warning'</span><span class="p">,</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">          </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">View</span><span class="w"> </span><span class="nx">Details</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">      </span><span class="p">)}</span>

<span class="w">      </span><span class="o">&lt;</span><span class="nx">Typography</span>
<span class="w">        </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"caption"</span>
<span class="w">        </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">          </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#888'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">      </span><span class="o">&gt;</span>
<span class="w">        </span><span class="nx">Last</span><span class="w"> </span><span class="nx">update</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">formatTimeAgo</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">lastUpdate</span><span class="p">)}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="discovery-view-focused">Discovery View (Focused)<a class="headerlink" href="#discovery-view-focused" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/views/DiscoveryView.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">DiscoveryView</span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">DiscoveryState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">candidate</span><span class="p">,</span><span class="w"> </span><span class="nx">investigationData</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Discovery header */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">textAlign</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="err">â­</span><span class="w"> </span><span class="nx">Discovery</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h4"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">fontFamily</span><span class="o">:</span><span class="w"> </span><span class="s1">'monospace'</span><span class="p">,</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h6"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#FFD700'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">max_sigma_dev</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">1</span><span class="p">)}</span><span class="nx">Ï</span><span class="w"> </span><span class="nx">deviation</span><span class="w"> </span><span class="nx">detected</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Pre-loaded investigation data */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">spacing</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Light Curve"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="cm">/* Data already loaded */</span><span class="p">}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">LightCurveChart</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">investigationData</span><span class="p">.</span><span class="nx">lightCurve</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Calibration Quality"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="cm">/* Data already loaded */</span><span class="p">}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CalibrationQA</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">investigationData</span><span class="p">.</span><span class="nx">calibrationQA</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Catalog Comparison"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="cm">/* Data already loaded */</span><span class="p">}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CatalogComparison</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">investigationData</span><span class="p">.</span><span class="nx">catalogComparison</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Action buttons */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span><span class="w"> </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"contained"</span>
<span class="w">          </span><span class="nx">size</span><span class="o">=</span><span class="s2">"large"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'investigation'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">context</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">sourceId</span><span class="o">:</span><span class="w"> </span><span class="kt">candidate.source_id</span><span class="p">,</span>
<span class="w">                </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="p">,</span>
<span class="w">              </span><span class="p">},</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Full</span><span class="w"> </span><span class="nx">Investigation</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">          </span><span class="nx">size</span><span class="o">=</span><span class="s2">"large"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">generateReport</span><span class="p">(</span><span class="nx">candidate</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Export</span><span class="w"> </span><span class="nx">Report</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="action-bar-contextual">Action Bar (Contextual)<a class="headerlink" href="#action-bar-contextual" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/ActionBar.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ActionBar</span><span class="p">({</span><span class="w"> </span><span class="nx">actions</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">actions</span><span class="o">:</span><span class="w"> </span><span class="kt">Action</span><span class="p">[]</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Paper</span>
<span class="w">      </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">        </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span>
<span class="w">        </span><span class="nx">borderTop</span><span class="o">:</span><span class="w"> </span><span class="s1">'1px solid rgba(255, 255, 255, 0.1)'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="s1">'#1A1E2E'</span><span class="p">,</span>
<span class="w">      </span><span class="p">}}</span>
<span class="w">    </span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span><span class="w"> </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">actions</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">action</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">primary</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'contained'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'outlined'</span><span class="p">}</span>
<span class="w">            </span><span class="nx">startIcon</span><span class="o">=</span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">icon</span><span class="p">}</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">onClick</span><span class="p">}</span>
<span class="w">            </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">              </span><span class="nx">minWidth</span><span class="o">:</span><span class="w"> </span><span class="kt">200</span><span class="p">,</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
<span class="w">            </span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">description</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Tooltip</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="p">{</span><span class="nx">action</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">InfoIcon</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">ml</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="kt">16</span><span class="w"> </span><span class="p">}}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Tooltip&gt;</span>
<span class="w">            </span><span class="p">)}</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">        </span><span class="p">))}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Paper&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="vast-inspired-patterns-integration">VAST-Inspired Patterns Integration<a class="headerlink" href="#vast-inspired-patterns-integration" title="Permanent link">Â¶</a></h2>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">Â¶</a></h3>
<p>The VAST pipeline provides proven patterns for radio astronomy data analysis interfaces. This section integrates VAST's successful patterns into the DSA-110 dashboard implementation.</p>
<h3 id="key-vast-patterns-to-adopt">Key VAST Patterns to Adopt<a class="headerlink" href="#key-vast-patterns-to-adopt" title="Permanent link">Â¶</a></h3>
<h4 id="1-generic-table-component-pattern">1. Generic Table Component Pattern<a class="headerlink" href="#1-generic-table-component-pattern" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Single reusable template for all table views with dynamic column configuration.</p>
<p><strong>DSA-110 Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/GenericTable.tsx</span>
<span class="c1">// Inspired by VAST's generic_table.html</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">GenericTableProps</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">apiEndpoint</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">columns</span><span class="o">:</span><span class="w"> </span><span class="kt">TableColumn</span><span class="p">[];</span>
<span class="w">  </span><span class="nx">title?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">searchable?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="nx">exportable?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// ... other props</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">GenericTable</span><span class="p">(</span><span class="nx">props</span><span class="o">:</span><span class="w"> </span><span class="kt">GenericTableProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Server-side pagination (like DataTables)</span>
<span class="w">  </span><span class="c1">// Dynamic column configuration</span>
<span class="w">  </span><span class="c1">// Export functionality (CSV, Excel)</span>
<span class="w">  </span><span class="c1">// Column visibility toggle</span>
<span class="w">  </span><span class="c1">// Search/filter</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Consistent table UI across all views
- Reduced code duplication
- Easy to add new table views
- Built-in export functionality</p>
<h4 id="2-detail-page-pattern">2. Detail Page Pattern<a class="headerlink" href="#2-detail-page-pattern" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Three-column layout: Details card, Visualization, Comments/Annotations.</p>
<p><strong>DSA-110 Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/pages/SourceDetailPage.tsx</span>
<span class="c1">// Inspired by VAST's source_detail.html</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SourceDetailPage</span><span class="p">({</span><span class="w"> </span><span class="nx">sourceId</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sourceId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">spacing</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Column 1: Details */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">SourceDetailsCard</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Column 2: Visualization (Aladin Lite) */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">AladinSkyViewer</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Column 3: Comments */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">4</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">CommentsPanel</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Full width: Collapsible sections */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">CollapsibleSection</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Light Curve"</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">SourceLightCurve</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/CollapsibleSection&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Familiar layout for radio astronomers
- Efficient use of screen space
- Easy to scan information
- Consistent navigation patterns</p>
<h4 id="3-query-interface-pattern">3. Query Interface Pattern<a class="headerlink" href="#3-query-interface-pattern" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Complex query builder with multiple filter criteria, saved queries, export.</p>
<p><strong>DSA-110 Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/SourceQueryBuilder.tsx</span>
<span class="c1">// Inspired by VAST's sources_query.html</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SourceQueryBuilder</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Filter by:</span>
<span class="w">  </span><span class="c1">// - Position (RA/Dec, radius)</span>
<span class="w">  </span><span class="c1">// - Flux range</span>
<span class="w">  </span><span class="c1">// - Variability metrics (v, eta)</span>
<span class="w">  </span><span class="c1">// - ESE candidate flag</span>
<span class="w">  </span><span class="c1">// - Date range</span>
<span class="w">  </span><span class="c1">// - Run selection</span>
<span class="w">  </span><span class="c1">// - Tags</span>

<span class="w">  </span><span class="c1">// Use React JSON Schema Form for dynamic forms</span>
<span class="w">  </span><span class="c1">// Save queries for reuse</span>
<span class="w">  </span><span class="c1">// Export results</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Powerful filtering capabilities
- Reusable queries
- Easy to extend with new filters
- Familiar to VAST users</p>
<h4 id="4-measurement-pair-metrics">4. Measurement Pair Metrics<a class="headerlink" href="#4-measurement-pair-metrics" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Calculate 2-epoch variability metrics (Vs, m) for all measurement pairs.</p>
<p><strong>DSA-110 Backend Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/pipeline/pairs.py</span>
<span class="c1"># Inspired by VAST's pairs.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_vs_metric</span><span class="p">(</span>
    <span class="n">flux_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">flux_b</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">flux_err_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">flux_err_b</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""T-statistic for variability (Mooley et al. 2016)."""</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">flux_err_a</span><span class="p">,</span> <span class="n">flux_err_b</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_m_metric</span><span class="p">(</span><span class="n">flux_a</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">flux_b</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Modulation index (fractional variability)."""</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">((</span><span class="n">flux_a</span> <span class="o">-</span> <span class="n">flux_b</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">flux_a</span> <span class="o">+</span> <span class="n">flux_b</span><span class="p">))</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_measurement_pair_metrics</span><span class="p">(</span>
    <span class="n">detections_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">n_cpu</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">max_partition_mb</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Calculate 2-epoch variability metrics for all detection pairs."""</span>
    <span class="c1"># Use Dask for parallel processing</span>
    <span class="c1"># Group by source</span>
    <span class="c1"># Generate all pairs</span>
    <span class="c1"># Calculate metrics</span>
    <span class="c1"># Return DataFrame with vs_peak, vs_int, m_peak, m_int</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Proven variability metrics
- Parallel processing for performance
- Essential for ESE detection
- Can aggregate per source</p>
<h4 id="5-forced-extraction-pattern">5. Forced Extraction Pattern<a class="headerlink" href="#5-forced-extraction-pattern" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Fill gaps in light curves by extracting flux at known positions.</p>
<p><strong>DSA-110 Backend Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/pipeline/forced_extraction.py</span>
<span class="c1"># Inspired by VAST's forced_extraction.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">forced_extraction</span><span class="p">(</span>
    <span class="n">sources</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">image_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">background_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">noise_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">edge_buffer</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Extract flux for sources at known positions.</span>
<span class="sd">    Critical for ESE detection - need complete light curves.</span>
<span class="sd">    """</span>
    <span class="c1"># Handle edge cases</span>
    <span class="c1"># Check for NaN values</span>
    <span class="c1"># Use forced_phot library or custom implementation</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Complete light curves for analysis
- Essential for ESE detection
- Handles edge cases properly
- Parallel processing support</p>
<h4 id="6-source-statistics-calculation">6. Source Statistics Calculation<a class="headerlink" href="#6-source-statistics-calculation" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Parallel groupby for aggregate metrics, weighted averages, nearest neighbor.</p>
<p><strong>DSA-110 Backend Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/pipeline/finalise.py</span>
<span class="c1"># Inspired by VAST's finalise.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_source_statistics</span><span class="p">(</span>
    <span class="n">detections_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">sources_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">n_cpu</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Calculate aggregate statistics for sources:</span>
<span class="sd">    - Weighted averages (position, uncertainties)</span>
<span class="sd">    - Aggregate flux metrics (avg, max, min)</span>
<span class="sd">    - Variability metrics (v, eta)</span>
<span class="sd">    - Nearest neighbor distance</span>
<span class="sd">    - Pair metrics aggregates</span>
<span class="sd">    """</span>
    <span class="c1"># Use Dask for parallel groupby</span>
    <span class="c1"># Calculate weighted averages</span>
    <span class="c1"># Calculate variability metrics</span>
    <span class="c1"># Find nearest neighbors</span>
    <span class="c1"># Aggregate pair metrics</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Efficient parallel processing
- Comprehensive source metrics
- Proven algorithms
- Memory-efficient</p>
<h4 id="7-visualization-patterns">7. Visualization Patterns<a class="headerlink" href="#7-visualization-patterns" title="Permanent link">Â¶</a></h4>
<p><strong>VAST â DSA-110 Mapping:</strong>
- Bokeh plots â Plotly.js (already using)
- JS9 image viewer â JS9 integration (planned)
- Aladin Lite â Aladin Lite integration (planned)
- Datashader â Plotly with WebGL (for large datasets)</p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/visualizations/</span>

<span class="c1">// Eta-V Plot (inspired by VAST's sources_etav_plot.html)</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">EtaVPlot</span><span class="p">({</span><span class="w"> </span><span class="nx">sources</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sources</span><span class="o">:</span><span class="w"> </span><span class="kt">Source</span><span class="p">[]</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Use Plotly.js</span>
<span class="w">  </span><span class="c1">// Color by ESE probability</span>
<span class="w">  </span><span class="c1">// Interactive selection</span>
<span class="p">}</span>

<span class="c1">// Light Curve (inspired by VAST's source detail light curve)</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SourceLightCurve</span><span class="p">({</span><span class="w"> </span><span class="nx">sourceId</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sourceId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Use Plotly.js</span>
<span class="w">  </span><span class="c1">// Show forced vs detected differently</span>
<span class="w">  </span><span class="c1">// Interactive hover with cutouts</span>
<span class="w">  </span><span class="c1">// Link to measurement details</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="8-data-storage-patterns">8. Data Storage Patterns<a class="headerlink" href="#8-data-storage-patterns" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong>
- Parquet files for measurements per image
- Arrow format for very large datasets
- Parquet for sources, associations, relations</p>
<p><strong>DSA-110 Implementation:</strong>
- Already using Parquet for some data
- Continue with Parquet for measurements
- Consider Arrow for measurement pairs if needed
- Store sources, associations in Parquet</p>
<h4 id="9-bulk-operations-pattern">9. Bulk Operations Pattern<a class="headerlink" href="#9-bulk-operations-pattern" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> Batch creation/update for performance.</p>
<p><strong>DSA-110 Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># src/dsa110_contimg/pipeline/loading.py</span>
<span class="c1"># Inspired by VAST's loading.py</span>

<span class="k">def</span><span class="w"> </span><span class="nf">bulk_upload_detections</span><span class="p">(</span>
    <span class="n">detections_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Bulk create detections with batch processing."""</span>
    <span class="c1"># Use Django/FastAPI bulk_create equivalent</span>
    <span class="c1"># Process in batches</span>
    <span class="c1"># Return IDs</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Much faster than individual inserts
- Memory efficient
- Transaction safe</p>
<h4 id="10-configuration-management">10. Configuration Management<a class="headerlink" href="#10-configuration-management" title="Permanent link">Â¶</a></h4>
<p><strong>VAST Approach:</strong> YAML config with schema validation, Jinja2 templates.</p>
<p><strong>DSA-110 Implementation:</strong>
- Already using YAML configs
- Add schema validation (like VAST's StrictYAML)
- Use templates for common configurations
- Validate inputs (file existence, matching files)</p>
<h3 id="integration-into-implementation-phases">Integration into Implementation Phases<a class="headerlink" href="#integration-into-implementation-phases" title="Permanent link">Â¶</a></h3>
<p>These VAST patterns will be integrated into the existing implementation phases:</p>
<ul>
<li><strong>Phase 1</strong>: Add generic table component, detail page pattern</li>
<li><strong>Phase 2</strong>: Implement measurement pair metrics, forced extraction</li>
<li><strong>Phase 3</strong>: Add query interface, visualization patterns</li>
<li><strong>Phase 4</strong>: Integrate bulk operations, source statistics</li>
<li><strong>Phase 5</strong>: Add analysis tools inspired by VAST patterns</li>
</ul>
<p>See individual phase sections for detailed integration.</p>
<hr/>
<h2 id="implementation-phases">Implementation Phases<a class="headerlink" href="#implementation-phases" title="Permanent link">Â¶</a></h2>
<h3 id="phase-1-foundation-weeks-1-2">Phase 1: Foundation (Weeks 1-2)<a class="headerlink" href="#phase-1-foundation-weeks-1-2" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Set up state management and basic state transitions</p>
<p><strong>Tasks:</strong>
1. Install Zustand for state management
2. Create dashboard state store
3. Implement basic state types (idle, autonomous, discovery, investigation, debugging, manual-control)
4. Create state transition functions
5. Add state transition hooks
6. Integrate streaming pipeline status monitoring</p>
<p><strong>Deliverables:</strong>
- <code>dashboardStore.ts</code> - State management
- <code>useStateTransitions.ts</code> - Auto-transitions
- <code>useStreamingPipelineMonitor.ts</code> - Streaming pipeline monitoring
- Basic state machine working</p>
<h3 id="phase-2-pre-fetching-engine-weeks-3-4">Phase 2: Pre-fetching Engine (Weeks 3-4)<a class="headerlink" href="#phase-2-pre-fetching-engine-weeks-3-4" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Implement predictive data loading</p>
<p><strong>Tasks:</strong>
1. Create pre-fetch hook
2. Implement preload target calculator
3. Add pre-fetch to React Query
4. Test pre-fetch performance</p>
<p><strong>Deliverables:</strong>
- <code>useAnticipatoryPrefetch.ts</code> - Pre-fetch hook
- <code>preloadTargets.ts</code> - Target calculator
- Pre-fetch working for all states</p>
<h3 id="phase-3-contextual-intelligence-weeks-5-6">Phase 3: Contextual Intelligence (Weeks 5-6)<a class="headerlink" href="#phase-3-contextual-intelligence-weeks-5-6" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Implement action suggestions and workflow guidance</p>
<p><strong>Tasks:</strong>
1. Create action suggestion engine
2. Implement workflow state machine
3. Add workflow manager component
4. Create workflow definitions</p>
<p><strong>Deliverables:</strong>
- <code>suggestActions.ts</code> - Action engine
- <code>WorkflowManager.tsx</code> - Workflow UI
- Workflow definitions
- Action suggestions working</p>
<h3 id="phase-4-ui-components-weeks-7-8">Phase 4: UI Components (Weeks 7-8)<a class="headerlink" href="#phase-4-ui-components-weeks-7-8" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Build adaptive UI components</p>
<p><strong>Tasks:</strong>
1. Create DashboardShell component
2. Build IdleView (minimal)
3. Build AutonomousView (streaming pipeline monitoring)
4. Build ManualControlView (override interface)
5. Build DiscoveryView (focused)
6. Build InvestigationView (detailed)
7. Build DebuggingView (diagnostic)
8. Build AnalysisView (exploratory workspace)
9. Create ActionBar component</p>
<p><strong>Deliverables:</strong>
- All view components
- Adaptive shell
- Action bar
- Autonomous operations display
- Manual control interface
- Analysis workspace foundation
- Complete UI working</p>
<h3 id="phase-45-analysis-workspace-foundation-weeks-9-10">Phase 4.5: Analysis Workspace Foundation (Weeks 9-10)<a class="headerlink" href="#phase-45-analysis-workspace-foundation-weeks-9-10" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Build flexible, trustworthy, deterministic analysis workspace foundation</p>
<p><strong>Tasks:</strong>
1. Install and configure Golden Layout
2. Install core analysis tools:
   - Monaco Editor (code viewing/editing)
   - React JSON Schema Form (parameter configuration)
   - React Split Pane (comparisons)
   - React Markdown (documentation)
   - React Hotkeys Hook (keyboard shortcuts)
3. Implement TrustIndicatorBar
4. Implement ReproducibilitySystem foundation
5. Build deterministic operation framework
6. Create basic workspace shell with Golden Layout
7. Test workspace persistence and layout saving</p>
<p><strong>Deliverables:</strong>
- Golden Layout integrated
- Core analysis tools installed and configured
- Trust indicator system working
- Reproducibility foundation in place
- Basic workspace shell functional
- Layout persistence working</p>
<h3 id="phase-46-analysis-tools-implementation-weeks-11-12">Phase 4.6: Analysis Tools Implementation (Weeks 11-12)<a class="headerlink" href="#phase-46-analysis-tools-implementation-weeks-11-12" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Build core analysis tools with trust and reproducibility</p>
<p><strong>Tasks:</strong>
1. Build CatalogComparisonTool
   - React JSON Schema Form for parameters
   - TanStack Table for results (install if needed)
   - React Diff Viewer for comparison (install)
   - Trust indicators integration
   - Reproducibility script generation
2. Build ImageAnalysisTool
   - Image selection with QA indicators
   - Parameter configuration form
   - Analysis results display
   - Trust score calculation
3. Build SourceInvestigationTool
   - Light curve visualization (Plotly)
   - Catalog comparison view
   - Image stack viewer
   - Profile fitting interface
   - Reproducibility info panel
4. Build MosaicAnalysisTool
   - Mosaic properties display
   - Comparison capabilities
   - Quality metrics
5. Integrate Monaco Editor for reproduction scripts
6. Test all tools with real data</p>
<p><strong>Deliverables:</strong>
- All core analysis tools functional
- Trust indicators integrated in all tools
- Reproducibility scripts generated for all operations
- Tools tested with real data products</p>
<h3 id="phase-47-analysis-workspace-enhancement-weeks-13-14">Phase 4.7: Analysis Workspace Enhancement (Weeks 13-14)<a class="headerlink" href="#phase-47-analysis-workspace-enhancement-weeks-13-14" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Enhance workspace with advanced features and polish</p>
<p><strong>Tasks:</strong>
1. Install and integrate additional tools:
   - React Flow (workflow visualization)
   - React Context Menu (right-click menus)
   - @dnd-kit (drag and drop)
2. Build workflow visualization
   - Visualize analysis pipelines
   - Show data lineage
   - Interactive workflow editor
3. Implement context menus
   - Right-click on images â "Open in JS9", "Compare", "Export"
   - Right-click on tools â "Close", "Duplicate", "Save template"
   - Right-click on workspace â "Save", "Export", "Share"
4. Add drag and drop
   - Drag data products into tools
   - Reorder analysis steps
   - Organize workspace layout
5. Create analysis workflow templates
6. Build workspace export/import
7. Add keyboard shortcuts for all common actions
8. Polish UI and interactions</p>
<p><strong>Deliverables:</strong>
- Workflow visualization working
- Context menus functional
- Drag and drop integrated
- Analysis workflow templates
- Workspace export/import
- Keyboard shortcuts implemented
- Polished UI</p>
<h3 id="phase-5-integration-polish-weeks-15-16">Phase 5: Integration &amp; Polish (Weeks 15-16)<a class="headerlink" href="#phase-5-integration-polish-weeks-15-16" title="Permanent link">Â¶</a></h3>
<p><strong>Goal:</strong> Integrate everything and polish UX</p>
<p><strong>Tasks:</strong>
1. Integrate with existing API
2. Connect all analysis tools to backend
3. Integrate with existing components (JS9, Plotly, AG Grid)
4. Add animations and transitions
5. Polish visual design
6. Test all workflows (including analysis)
7. Performance optimization
8. Reproducibility testing and verification
9. User acceptance testing
10. Documentation and training materials</p>
<p><strong>Deliverables:</strong>
- Fully integrated dashboard
- Analysis workspace fully functional
- All tools connected to backend
- Smooth animations
- Polished UI
- Performance optimized
- Reproducibility verified
- Documentation complete</p>
<hr/>
<h2 id="streaming-pipeline-integration_1">Streaming Pipeline Integration<a class="headerlink" href="#streaming-pipeline-integration_1" title="Permanent link">Â¶</a></h2>
<h3 id="autonomous-operation-tracking">Autonomous Operation Tracking<a class="headerlink" href="#autonomous-operation-tracking" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useStreamingPipelineMonitor.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@tanstack/react-query'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useStreamingStatus</span><span class="p">,</span><span class="w"> </span><span class="nx">useStreamingMetrics</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../api/queries'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useStreamingPipelineMonitor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transitionTo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingStatus</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useStreamingStatus</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingMetrics</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useStreamingMetrics</span><span class="p">();</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">streamingStatus</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// If streaming is running and we're in idle, transition to autonomous mode</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="nx">streamingStatus</span><span class="p">.</span><span class="nx">running</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">      </span><span class="p">(</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Fetch current operations from pipeline</span>
<span class="w">      </span><span class="nx">fetchAutonomousOperations</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="nx">operations</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'autonomous'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'running'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">currentOperations</span><span class="o">:</span><span class="w"> </span><span class="kt">operations</span><span class="p">,</span>
<span class="w">            </span><span class="nx">metrics</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingMetrics</span><span class="p">,</span>
<span class="w">            </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingStatus.config</span><span class="p">,</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// If streaming stops and we're in autonomous mode, transition back to idle</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">streamingStatus</span><span class="p">.</span><span class="nx">running</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'idle'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingStatus.error</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'attention'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'healthy'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'stopped'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">autonomous</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">          </span><span class="nx">lastActivity</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// If streaming has errors, suggest manual intervention</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">streamingStatus</span><span class="p">.</span><span class="nx">error</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'debugging'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">issue</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'pipeline-error'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'streaming-error'</span><span class="p">,</span>
<span class="w">          </span><span class="nx">severity</span><span class="o">:</span><span class="w"> </span><span class="s1">'error'</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">diagnosticData</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">error</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingStatus.error</span><span class="p">,</span>
<span class="w">          </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="kt">streamingStatus</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nx">suggestedFixes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Take Manual Control'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Switch to manual control mode to diagnose issue'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'manual-control'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="s1">'autonomous-failure'</span><span class="p">,</span>
<span class="w">                </span><span class="nx">controlScope</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">streaming</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">},</span>
<span class="w">              </span><span class="p">});</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Restart Streaming Service'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Restart the streaming service'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">action</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">restartStreamingService</span><span class="p">();</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">streamingStatus</span><span class="p">,</span><span class="w"> </span><span class="nx">streamingMetrics</span><span class="p">,</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">transitionTo</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">fetchAutonomousOperations</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">AutonomousOperation</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Fetch current operations from pipeline API</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/api/streaming/operations'</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">operations</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="manual-override-controller">Manual Override Controller<a class="headerlink" href="#manual-override-controller" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useManualOverride.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useCallback</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useStopStreaming</span><span class="p">,</span><span class="w"> </span><span class="nx">useStartStreaming</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../api/queries'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useManualOverride</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transitionTo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">stopStreaming</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useStopStreaming</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">startStreaming</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useStartStreaming</span><span class="p">();</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">takeManualControl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">((</span><span class="nx">scope</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">streaming?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">    </span><span class="nx">calibration?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">    </span><span class="nx">imaging?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">    </span><span class="nx">mosaicking?</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="p">;</span>
<span class="w">  </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">previousState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Stop autonomous operations in scope</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">streaming</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">stopStreaming</span><span class="p">.</span><span class="nx">mutate</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">onSuccess</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'manual-control'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="s1">'user-initiated'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">previousState</span><span class="p">,</span>
<span class="w">            </span><span class="nx">controlScope</span><span class="o">:</span><span class="w"> </span><span class="kt">scope</span><span class="p">,</span>
<span class="w">            </span><span class="nx">operations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'manual-control'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">reason</span><span class="o">:</span><span class="w"> </span><span class="s1">'user-initiated'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">previousState</span><span class="p">,</span>
<span class="w">        </span><span class="nx">controlScope</span><span class="o">:</span><span class="w"> </span><span class="kt">scope</span><span class="p">,</span>
<span class="w">        </span><span class="nx">operations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">transitionTo</span><span class="p">,</span><span class="w"> </span><span class="nx">stopStreaming</span><span class="p">]);</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">returnToAutonomous</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">previousState</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">      </span><span class="c1">// Restart autonomous operations</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">controlScope</span><span class="p">.</span><span class="nx">streaming</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">startStreaming</span><span class="p">.</span><span class="nx">mutate</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">onSuccess</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Return to previous state or autonomous mode</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">previousState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">previousState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'idle'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'autonomous'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="s1">'running'</span><span class="p">,</span>
<span class="w">                  </span><span class="nx">currentOperations</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">                  </span><span class="nx">metrics</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
<span class="w">                  </span><span class="nx">config</span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">              </span><span class="p">});</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">transitionTo</span><span class="p">(</span><span class="nx">previousState</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">previousState</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// No streaming restart needed, just return to previous state</span>
<span class="w">        </span><span class="nx">transitionTo</span><span class="p">(</span><span class="nx">previousState</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">previousState</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="nx">transitionTo</span><span class="p">,</span><span class="w"> </span><span class="nx">startStreaming</span><span class="p">]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">takeManualControl</span><span class="p">,</span>
<span class="w">    </span><span class="nx">returnToAutonomous</span><span class="p">,</span>
<span class="w">    </span><span class="nx">isManualControl</span><span class="o">:</span><span class="w"> </span><span class="kt">state.mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="autonomous-operations-display">Autonomous Operations Display<a class="headerlink" href="#autonomous-operations-display" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/views/AutonomousView.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AutonomousView</span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">AutonomousState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">streamingPipeline</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">takeManualControl</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useManualOverride</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Header */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'space-between'</span><span class="p">,</span><span class="w"> </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h4"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Autonomous</span><span class="w"> </span><span class="nx">Operations</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#888'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Streaming</span><span class="w"> </span><span class="nx">pipeline</span><span class="w"> </span><span class="nx">operating</span><span class="w"> </span><span class="nx">autonomously</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">takeManualControl</span><span class="p">({</span><span class="w"> </span><span class="nx">streaming</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">})}</span>
<span class="w">          </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">minWidth</span><span class="o">:</span><span class="w"> </span><span class="kt">200</span><span class="w"> </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Take</span><span class="w"> </span><span class="nx">Manual</span><span class="w"> </span><span class="nx">Control</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Current Operations */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">spacing</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Active Operations"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">currentOperations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">List</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">currentOperations</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">op</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">ListItem</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                      </span><span class="o">&lt;</span><span class="nx">ListItemIcon</span><span class="o">&gt;</span>
<span class="w">                        </span><span class="p">{</span><span class="nx">getOperationIcon</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="kr">type</span><span class="p">)}</span>
<span class="w">                      </span><span class="o">&lt;</span><span class="err">/ListItemIcon&gt;</span>
<span class="w">                      </span><span class="o">&lt;</span><span class="nx">ListItemText</span>
<span class="w">                        </span><span class="nx">primary</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="kr">type</span><span class="p">}</span>
<span class="w">                        </span><span class="nx">secondary</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">op</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb"> - </span><span class="si">${</span><span class="nx">op</span><span class="p">.</span><span class="nx">progress</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="si">}</span><span class="sb">%`</span><span class="p">}</span>
<span class="w">                      </span><span class="o">/&gt;</span>
<span class="w">                      </span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">progress</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                        </span><span class="o">&lt;</span><span class="nx">LinearProgress</span>
<span class="w">                          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"determinate"</span>
<span class="w">                          </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">progress</span><span class="p">}</span>
<span class="w">                          </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">200</span><span class="p">,</span><span class="w"> </span><span class="nx">ml</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                        </span><span class="o">/&gt;</span>
<span class="w">                      </span><span class="p">)}</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="err">/ListItem&gt;</span>
<span class="w">                  </span><span class="p">))}</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/List&gt;</span>
<span class="w">              </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#888'</span><span class="p">,</span><span class="w"> </span><span class="nx">textAlign</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="p">,</span><span class="w"> </span><span class="nx">py</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">No</span><span class="w"> </span><span class="nx">active</span><span class="w"> </span><span class="nx">operations</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="p">)}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Metrics */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Pipeline Metrics"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"text.secondary"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">CPU</span><span class="w"> </span><span class="nx">Usage</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">LinearProgress</span>
<span class="w">                  </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"determinate"</span>
<span class="w">                  </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">metrics</span><span class="o">?</span><span class="p">.</span><span class="nx">cpu_percent</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">}</span>
<span class="w">                  </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"caption"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">metrics</span><span class="o">?</span><span class="p">.</span><span class="nx">cpu_percent</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">}</span><span class="o">%</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"text.secondary"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Memory</span><span class="w"> </span><span class="nx">Usage</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">LinearProgress</span>
<span class="w">                  </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"determinate"</span>
<span class="w">                  </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">metrics</span><span class="o">?</span><span class="p">.</span><span class="nx">memory_mb</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">}</span>
<span class="w">                  </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"caption"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="p">{</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">metrics</span><span class="o">?</span><span class="p">.</span><span class="nx">memory_mb</span><span class="o">?</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mf">0</span><span class="p">}</span><span class="w"> </span><span class="nx">MB</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Configuration */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="w"> </span><span class="nx">md</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Configuration"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Input</span><span class="w"> </span><span class="nx">Directory</span><span class="o">:&lt;</span><span class="err">/strong&gt; {streamingPipeline.config?.input_dir}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Output</span><span class="w"> </span><span class="nx">Directory</span><span class="o">:&lt;</span><span class="err">/strong&gt; {streamingPipeline.config?.output_dir}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Max</span><span class="w"> </span><span class="nx">Workers</span><span class="o">:&lt;</span><span class="err">/strong&gt; {streamingPipeline.config?.max_workers}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Expected</span><span class="w"> </span><span class="nx">Subbands</span><span class="o">:&lt;</span><span class="err">/strong&gt; {streamingPipeline.config?.expected_subbands}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="manual-control-view">Manual Control View<a class="headerlink" href="#manual-control-view" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/views/ManualControlView.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ManualControlView</span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">ManualControlState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">returnToAutonomous</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useManualOverride</span><span class="p">();</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Header */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'space-between'</span><span class="p">,</span><span class="w"> </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h4"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Manual</span><span class="w"> </span><span class="nx">Control</span><span class="w"> </span><span class="nx">Mode</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">'#888'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">reason</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'user-initiated'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'You have taken manual control'</span><span class="p">}</span>
<span class="w">            </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">reason</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous-failure'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'Manual control activated due to autonomous failure'</span><span class="p">}</span>
<span class="w">            </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">reason</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'intervention-required'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'Manual intervention required'</span><span class="p">}</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"contained"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">returnToAutonomous</span><span class="p">}</span>
<span class="w">          </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">minWidth</span><span class="o">:</span><span class="w"> </span><span class="kt">200</span><span class="w"> </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Return</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Autonomous</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Control Panels */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">spacing</span><span class="o">=</span><span class="p">{</span><span class="mf">3</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">controlScope</span><span class="p">.</span><span class="nx">streaming</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Streaming Service Control"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">StreamingControlPanel</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">controlScope</span><span class="p">.</span><span class="nx">calibration</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Calibration Control"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">CalibrationControlPanel</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">controlScope</span><span class="p">.</span><span class="nx">imaging</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Imaging Control"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">ImagingControlPanel</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">controlScope</span><span class="p">.</span><span class="nx">mosaicking</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">12</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Mosaicking Control"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">MosaickingControlPanel</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">        </span><span class="p">)}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Manual Operations */</span><span class="p">}</span>
<span class="w">      </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">operations</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">4</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Manual Operations"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">List</span><span class="o">&gt;</span>
<span class="w">                </span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">operations</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">op</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">ListItem</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                    </span><span class="o">&lt;</span><span class="nx">ListItemText</span>
<span class="w">                      </span><span class="nx">primary</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span>
<span class="w">                      </span><span class="nx">secondary</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span>
<span class="w">                    </span><span class="o">/&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="err">/ListItem&gt;</span>
<span class="w">                </span><span class="p">))}</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/List&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="p">)}</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="autonomous-operation-monitoring">Autonomous Operation Monitoring<a class="headerlink" href="#autonomous-operation-monitoring" title="Permanent link">Â¶</a></h2>
<h3 id="operation-types">Operation Types<a class="headerlink" href="#operation-types" title="Permanent link">Â¶</a></h3>
<p>The dashboard tracks all autonomous operations performed by the streaming pipeline:</p>
<ol>
<li><strong>UVH5 to MS Conversion</strong> - Automatic conversion of incoming UVH5 files</li>
<li><strong>Calibration</strong> - Automatic calibration using registry lookups</li>
<li><strong>Imaging</strong> - Automatic imaging of calibrated data</li>
<li><strong>Mosaicking</strong> - Automatic mosaicking of images</li>
<li><strong>QA</strong> - Automatic quality assurance checks</li>
</ol>
<h3 id="real-time-operation-updates">Real-time Operation Updates<a class="headerlink" href="#real-time-operation-updates" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useAutonomousOperations.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@tanstack/react-query'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useAutonomousOperations</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>

<span class="w">  </span><span class="nx">useEffect</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Subscribe to WebSocket updates for autonomous operations</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">ws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="s1">'/api/ws/streaming-operations'</span><span class="p">);</span>

<span class="w">    </span><span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'operation-update'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Update operation in state</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">state</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">updatedOperations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">currentOperations</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span><span class="nx">op</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">op</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">operation</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">data.operation</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">op</span>
<span class="w">          </span><span class="p">);</span>

<span class="w">          </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">setState</span><span class="p">({</span>
<span class="w">            </span><span class="p">...</span><span class="nx">currentState</span><span class="p">,</span>
<span class="w">            </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="p">...</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">streamingPipeline</span><span class="p">,</span>
<span class="w">              </span><span class="nx">currentOperations</span><span class="o">:</span><span class="w"> </span><span class="kt">updatedOperations</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'operation-completed'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Remove completed operation, add to history</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">state</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'autonomous'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">filteredOperations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">currentState</span><span class="p">.</span><span class="nx">streamingPipeline</span><span class="p">.</span><span class="nx">currentOperations</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span>
<span class="w">            </span><span class="p">(</span><span class="nx">op</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">op</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">operation</span><span class="p">.</span><span class="nx">id</span>
<span class="w">          </span><span class="p">);</span>

<span class="w">          </span><span class="nx">useDashboardStore</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">setState</span><span class="p">({</span>
<span class="w">            </span><span class="p">...</span><span class="nx">currentState</span><span class="p">,</span>
<span class="w">            </span><span class="nx">streamingPipeline</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="p">...</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">streamingPipeline</span><span class="p">,</span>
<span class="w">              </span><span class="nx">currentOperations</span><span class="o">:</span><span class="w"> </span><span class="kt">filteredOperations</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">ws</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="p">,</span><span class="w"> </span><span class="nx">queryClient</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="operation-history">Operation History<a class="headerlink" href="#operation-history" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/AutonomousOperationHistory.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AutonomousOperationHistory</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">data</span><span class="o">:</span><span class="w"> </span><span class="kt">history</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQuery</span><span class="p">({</span>
<span class="w">    </span><span class="nx">queryKey</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'autonomous-operations'</span><span class="p">,</span><span class="w"> </span><span class="s1">'history'</span><span class="p">],</span>
<span class="w">    </span><span class="nx">queryFn</span><span class="o">:</span><span class="w"> </span><span class="kt">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/api/streaming/operations/history'</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardHeader</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Recent Operations"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Table</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">TableHead</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">TableRow</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Type</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Status</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Started</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Duration</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/TableRow&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/TableHead&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">TableBody</span><span class="o">&gt;</span>
<span class="w">            </span><span class="p">{</span><span class="nx">history</span><span class="o">?</span><span class="p">.</span><span class="nx">operations</span><span class="o">?</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">op</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">TableRow</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="kr">type</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">Chip</span>
<span class="w">                    </span><span class="nx">label</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span>
<span class="w">                    </span><span class="nx">color</span><span class="o">=</span><span class="p">{</span><span class="nx">op</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'completed'</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'success'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'error'</span><span class="p">}</span>
<span class="w">                    </span><span class="nx">size</span><span class="o">=</span><span class="s2">"small"</span>
<span class="w">                  </span><span class="o">/&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">startedAt</span><span class="p">)}</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">formatDuration</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">duration</span><span class="p">)}</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/TableRow&gt;</span>
<span class="w">            </span><span class="p">))}</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/TableBody&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Table&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="manual-override-control">Manual Override &amp; Control<a class="headerlink" href="#manual-override-control" title="Permanent link">Â¶</a></h2>
<h3 id="override-triggers">Override Triggers<a class="headerlink" href="#override-triggers" title="Permanent link">Â¶</a></h3>
<p>Manual control can be triggered in several ways:</p>
<ol>
<li><strong>User-Initiated</strong> - User explicitly takes control</li>
<li><strong>Autonomous Failure</strong> - Pipeline error requires intervention</li>
<li><strong>Intervention Required</strong> - System detects need for manual intervention</li>
</ol>
<h3 id="control-scope">Control Scope<a class="headerlink" href="#control-scope" title="Permanent link">Â¶</a></h3>
<p>When taking manual control, users can specify what they want to control:</p>
<ul>
<li><strong>Streaming Service</strong> - Control UVH5 to MS conversion</li>
<li><strong>Calibration</strong> - Control calibration operations</li>
<li><strong>Imaging</strong> - Control imaging operations</li>
<li><strong>Mosaicking</strong> - Control mosaicking operations</li>
</ul>
<h3 id="override-workflow">Override Workflow<a class="headerlink" href="#override-workflow" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/workflows/manualOverrideWorkflow.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">manualOverrideWorkflow</span><span class="o">:</span><span class="w"> </span><span class="kt">Workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'manual-override'</span><span class="p">,</span>
<span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Manual Override'</span><span class="p">,</span>
<span class="w">  </span><span class="nx">steps</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'confirm-override'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Confirm Override'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Confirm you want to take manual control'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">ConfirmOverrideStep</span><span class="p">,</span>
<span class="w">      </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'select-scope'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Select Control Scope'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Choose what to control manually'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">SelectControlScopeStep</span><span class="p">,</span>
<span class="w">      </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'stop-autonomous'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Stop Autonomous Operations'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'Stopping autonomous operations in selected scope'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">StopAutonomousStep</span><span class="p">,</span>
<span class="w">      </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="s1">'manual-control'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">'Manual Control'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">description</span><span class="o">:</span><span class="w"> </span><span class="s1">'You now have manual control'</span><span class="p">,</span>
<span class="w">      </span><span class="nx">component</span><span class="o">:</span><span class="w"> </span><span class="kt">ManualControlStep</span><span class="p">,</span>
<span class="w">      </span><span class="nx">required</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">currentStep</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">completed</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="return-to-autonomous">Return to Autonomous<a class="headerlink" href="#return-to-autonomous" title="Permanent link">Â¶</a></h3>
<p>When returning to autonomous mode, the dashboard:</p>
<ol>
<li>Validates that manual operations are complete</li>
<li>Restarts autonomous operations in the control scope</li>
<li>Transitions back to autonomous or idle state</li>
<li>Resumes monitoring</li>
</ol>
<h2 id="analysis-exploration-workspace">Analysis &amp; Exploration Workspace<a class="headerlink" href="#analysis-exploration-workspace" title="Permanent link">Â¶</a></h2>
<h3 id="design-principles">Design Principles<a class="headerlink" href="#design-principles" title="Permanent link">Â¶</a></h3>
<p>The analysis workspace follows three core principles:</p>
<ol>
<li><strong>Flexibility</strong> - Support diverse analysis workflows without constraints</li>
<li><strong>Trustworthiness</strong> - Clear indicators of data quality and result reliability</li>
<li><strong>Determinism</strong> - All operations are reproducible and traceable</li>
</ol>
<h3 id="workspace-architecture">Workspace Architecture<a class="headerlink" href="#workspace-architecture" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/analysis/AnalysisWorkspace.tsx</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">GoldenLayout</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'golden-layout'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HotkeysProvider</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react-hotkeys-hook'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AnalysisWorkspace</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">workspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'analysis'</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">state.workspace</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">null</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">workspace</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">HotkeysProvider</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="s1">'100vh'</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="cm">/* Trust &amp; Reproducibility Bar */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">TrustIndicatorBar</span><span class="w"> </span><span class="nx">indicators</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">trustIndicators</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Main Workspace - Golden Layout */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">GoldenLayout</span>
<span class="w">          </span><span class="nx">config</span><span class="o">=</span><span class="p">{</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">layout</span><span class="p">}</span>
<span class="w">          </span><span class="nx">onStateChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">layout</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">saveWorkspaceLayout</span><span class="p">(</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">layout</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="cm">/* Tool Panels - Registered Components */</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">activeTools</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">tool</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">ToolPanel</span><span class="w"> </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="w"> </span><span class="nx">tool</span><span class="o">=</span><span class="p">{</span><span class="nx">tool</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="p">))}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/GoldenLayout&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Analysis Toolbar */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">AnalysisToolbar</span><span class="w"> </span><span class="nx">workspace</span><span class="o">=</span><span class="p">{</span><span class="nx">workspace</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/HotkeysProvider&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Register Golden Layout components</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'CatalogComparisonTool'</span><span class="p">,</span><span class="w"> </span><span class="nx">CatalogComparisonTool</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'ImageAnalysisTool'</span><span class="p">,</span><span class="w"> </span><span class="nx">ImageAnalysisTool</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'SourceInvestigationTool'</span><span class="p">,</span><span class="w"> </span><span class="nx">SourceInvestigationTool</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'MosaicAnalysisTool'</span><span class="p">,</span><span class="w"> </span><span class="nx">MosaicAnalysisTool</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'ReproductionScript'</span><span class="p">,</span><span class="w"> </span><span class="nx">ReproductionScriptViewer</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'DataBrowser'</span><span class="p">,</span><span class="w"> </span><span class="nx">DataBrowser</span><span class="p">);</span>
<span class="nx">GoldenLayout</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">'WorkflowVisualization'</span><span class="p">,</span><span class="w"> </span><span class="nx">WorkflowVisualization</span><span class="p">);</span>
</code></pre></div>
<h3 id="trust-indicators">Trust Indicators<a class="headerlink" href="#trust-indicators" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/analysis/TrustIndicatorBar.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">TrustIndicatorBar</span><span class="p">({</span><span class="w"> </span><span class="nx">indicators</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">indicators</span><span class="o">:</span><span class="w"> </span><span class="kt">TrustIndicator</span><span class="p">[]</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">overallTrust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">calculateOverallTrust</span><span class="p">(</span><span class="nx">indicators</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Paper</span>
<span class="w">      </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
<span class="w">        </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span>
<span class="w">        </span><span class="nx">backgroundColor</span><span class="o">:</span><span class="w"> </span><span class="kt">getTrustColor</span><span class="p">(</span><span class="nx">overallTrust</span><span class="p">),</span>
<span class="w">        </span><span class="nx">borderBottom</span><span class="o">:</span><span class="w"> </span><span class="s1">'2px solid'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">borderColor</span><span class="o">:</span><span class="w"> </span><span class="kt">getTrustColor</span><span class="p">(</span><span class="nx">overallTrust</span><span class="p">),</span>
<span class="w">      </span><span class="p">}}</span>
<span class="w">    </span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">TrustIcon</span><span class="w"> </span><span class="nx">trust</span><span class="o">=</span><span class="p">{</span><span class="nx">overallTrust</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">fontWeight</span><span class="o">:</span><span class="w"> </span><span class="s1">'bold'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="p">{</span><span class="nx">overallTrust</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'trusted'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'â All indicators trusted'</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">overallTrust</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'â  Some indicators need attention'</span><span class="p">}</span>
<span class="w">          </span><span class="p">{</span><span class="nx">overallTrust</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'untrusted'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s1">'â Trust indicators failed'</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="nx">indicators</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">indicator</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Chip</span>
<span class="w">            </span><span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">indicator</span><span class="p">.</span><span class="kr">type</span><span class="p">}</span>
<span class="w">            </span><span class="nx">label</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">indicator</span><span class="p">.</span><span class="nx">label</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">indicator</span><span class="p">.</span><span class="nx">value</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
<span class="w">            </span><span class="nx">color</span><span class="o">=</span><span class="p">{</span><span class="nx">indicator</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'trusted'</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'success'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">indicator</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">'error'</span><span class="p">}</span>
<span class="w">            </span><span class="nx">size</span><span class="o">=</span><span class="s2">"small"</span>
<span class="w">            </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">ml</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span>
<span class="w">          </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="p">))}</span>

<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">ml</span><span class="o">:</span><span class="w"> </span><span class="s1">'auto'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">ReproducibilityBadge</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Paper&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">calculateOverallTrust</span><span class="p">(</span><span class="nx">indicators</span><span class="o">:</span><span class="w"> </span><span class="kt">TrustIndicator</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="s1">'trusted'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'warning'</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">'untrusted'</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">indicators</span><span class="p">.</span><span class="nx">every</span><span class="p">((</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'trusted'</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">'trusted'</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">indicators</span><span class="p">.</span><span class="nx">some</span><span class="p">((</span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">i</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'untrusted'</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">'untrusted'</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s1">'warning'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="catalog-comparison-tool">Catalog Comparison Tool<a class="headerlink" href="#catalog-comparison-tool" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/analysis/CatalogComparisonTool.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">CatalogComparisonTool</span><span class="p">({</span><span class="w"> </span><span class="nx">tool</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">tool</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisTool</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">comparison</span><span class="p">,</span><span class="w"> </span><span class="nx">setComparison</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">CatalogComparison</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">results</span><span class="p">,</span><span class="w"> </span><span class="nx">setResults</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">ComparisonResult</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">([]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardHeader</span>
<span class="w">        </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Catalog Comparison"</span>
<span class="w">        </span><span class="nx">action</span><span class="o">=</span><span class="p">{</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Tooltip</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Deterministic operation - results are reproducible"</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">VerifiedIcon</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"success"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Tooltip&gt;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="cm">/* Parameter Configuration - React JSON Schema Form */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Form</span>
<span class="w">          </span><span class="nx">schema</span><span class="o">=</span><span class="p">{</span><span class="nx">catalogComparisonSchema</span><span class="p">}</span>
<span class="w">          </span><span class="nx">validator</span><span class="o">=</span><span class="p">{</span><span class="nx">validator</span><span class="p">}</span>
<span class="w">          </span><span class="nx">formData</span><span class="o">=</span><span class="p">{</span><span class="nx">comparison</span><span class="p">}</span>
<span class="w">          </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{({</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">setComparison</span><span class="p">(</span><span class="nx">formData</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">CatalogComparison</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">          </span><span class="nx">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">comparisonResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">runCatalogComparison</span><span class="p">(</span><span class="nx">formData</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">CatalogComparison</span><span class="p">);</span>
<span class="w">            </span><span class="nx">setResults</span><span class="p">(</span><span class="nx">comparisonResults</span><span class="p">);</span>

<span class="w">            </span><span class="c1">// Update tool state for reproducibility</span>
<span class="w">            </span><span class="nx">updateToolState</span><span class="p">(</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">comparison</span><span class="o">:</span><span class="w"> </span><span class="kt">formData</span><span class="p">,</span>
<span class="w">              </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">comparisonResults</span><span class="p">,</span>
<span class="w">              </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">            </span><span class="p">});</span>

<span class="w">            </span><span class="c1">// Generate and display reproduction script</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">generateReproductionScript</span><span class="p">(</span><span class="nx">tool</span><span class="p">,</span><span class="w"> </span><span class="nx">dataProducts</span><span class="p">);</span>
<span class="w">            </span><span class="nx">openReproductionScriptPanel</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">          </span><span class="nx">uiSchema</span><span class="o">=</span><span class="p">{{</span>
<span class="w">            </span><span class="nx">catalog</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="s1">'ui:widget'</span><span class="o">:</span><span class="w"> </span><span class="s1">'select'</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nx">radius</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="s1">'ui:widget'</span><span class="o">:</span><span class="w"> </span><span class="s1">'range'</span><span class="p">,</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">/&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Results - TanStack Table */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Comparison</span><span class="w"> </span><span class="nx">Results</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">CatalogComparisonTable</span><span class="w"> </span><span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">results</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Comparison View - React Split Pane */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">comparison</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">SplitPane</span><span class="w"> </span><span class="nx">split</span><span class="o">=</span><span class="s2">"vertical"</span><span class="w"> </span><span class="nx">defaultSize</span><span class="o">=</span><span class="s2">"50%"</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Our</span><span class="w"> </span><span class="nx">Sources</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">SourceList</span><span class="w"> </span><span class="nx">sources</span><span class="o">=</span><span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">r</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">source</span><span class="p">)}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="nx">Catalog</span><span class="w"> </span><span class="nx">Matches</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">CatalogMatchList</span><span class="w"> </span><span class="nx">matches</span><span class="o">=</span><span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">r</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">catalogMatch</span><span class="p">)}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/SplitPane&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Actions */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"contained"</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="kd">const</span><span class="w"> </span><span class="nx">comparisonResults</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">runCatalogComparison</span><span class="p">(</span><span class="nx">comparison</span><span class="o">!</span><span class="p">);</span>
<span class="w">              </span><span class="nx">setResults</span><span class="p">(</span><span class="nx">comparisonResults</span><span class="p">);</span>

<span class="w">              </span><span class="c1">// Update tool state for reproducibility</span>
<span class="w">              </span><span class="nx">updateToolState</span><span class="p">(</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">comparison</span><span class="p">,</span>
<span class="w">                </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">comparisonResults</span><span class="p">,</span>
<span class="w">                </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">              </span><span class="p">});</span>

<span class="w">              </span><span class="c1">// Generate and display reproduction script</span>
<span class="w">              </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">generateReproductionScript</span><span class="p">(</span><span class="nx">tool</span><span class="p">,</span><span class="w"> </span><span class="nx">dataProducts</span><span class="p">);</span>
<span class="w">              </span><span class="nx">openReproductionScriptPanel</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">            </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">comparison</span><span class="p">}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Run</span><span class="w"> </span><span class="nx">Comparison</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">exportComparisonResults</span><span class="p">(</span><span class="nx">results</span><span class="p">);</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">            </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Export</span><span class="w"> </span><span class="nx">Results</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">generateReproductionScript</span><span class="p">(</span><span class="nx">tool</span><span class="p">,</span><span class="w"> </span><span class="nx">dataProducts</span><span class="p">);</span>
<span class="w">              </span><span class="nx">openReproductionScriptPanel</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">View</span><span class="w"> </span><span class="nx">Script</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="image-analysis-tool">Image Analysis Tool<a class="headerlink" href="#image-analysis-tool" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/analysis/ImageAnalysisTool.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ImageAnalysisTool</span><span class="p">({</span><span class="w"> </span><span class="nx">tool</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">tool</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisTool</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">image</span><span class="p">,</span><span class="w"> </span><span class="nx">setImage</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">ImageProduct</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">analysis</span><span class="p">,</span><span class="w"> </span><span class="nx">setAnalysis</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">ImageAnalysis</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardHeader</span>
<span class="w">        </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Image Analysis"</span>
<span class="w">        </span><span class="nx">action</span><span class="o">=</span><span class="p">{</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Tooltip</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"QA metrics available"</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">QAIcon</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"success"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Tooltip&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Tooltip</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Deterministic operation"</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">VerifiedIcon</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"success"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Tooltip&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="cm">/* Image Selection */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">ImageSelector</span>
<span class="w">            </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">image</span><span class="p">}</span>
<span class="w">            </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">setImage</span><span class="p">}</span>
<span class="w">            </span><span class="nx">showQAIndicators</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
<span class="w">          </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Image Properties */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">image</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Image</span><span class="w"> </span><span class="nx">Properties</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="nx">spacing</span><span class="o">=</span><span class="p">{</span><span class="mf">2</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">RA</span><span class="o">:&lt;</span><span class="err">/strong&gt; {image.ra.toFixed(4)}Â°</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Dec</span><span class="o">:&lt;</span><span class="err">/strong&gt; {image.dec.toFixed(4)}Â°</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">Beam</span><span class="o">:&lt;</span><span class="err">/strong&gt; {image.beam.major.toFixed(2)}" Ã {image.beam.minor.toFixed(2)}"</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Grid</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="nx">xs</span><span class="o">=</span><span class="p">{</span><span class="mf">6</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"body2"</span><span class="o">&gt;</span>
<span class="w">                  </span><span class="o">&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="nx">RMS</span><span class="o">:&lt;</span><span class="err">/strong&gt; {image.rms.toFixed(3)} mJy/beam</span>
<span class="w">                </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Grid&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Analysis Options */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Analysis</span><span class="w"> </span><span class="nx">Options</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">FormGroup</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">FormControlLabel</span>
<span class="w">              </span><span class="nx">control</span><span class="o">=</span><span class="p">{</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Checkbox</span>
<span class="w">                  </span><span class="nx">checked</span><span class="o">=</span><span class="p">{</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">sourceFinding</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>
<span class="w">                  </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">setAnalysis</span><span class="p">({</span>
<span class="w">                      </span><span class="p">...</span><span class="nx">analysis</span><span class="o">!</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">sourceFinding</span><span class="o">:</span><span class="w"> </span><span class="kt">e.target.checked</span><span class="p">,</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                    </span><span class="p">});</span>
<span class="w">                  </span><span class="p">}}</span>
<span class="w">                </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">              </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Source Finding"</span>
<span class="w">            </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">FormControlLabel</span>
<span class="w">              </span><span class="nx">control</span><span class="o">=</span><span class="p">{</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Checkbox</span>
<span class="w">                  </span><span class="nx">checked</span><span class="o">=</span><span class="p">{</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">noiseAnalysis</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>
<span class="w">                  </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">setAnalysis</span><span class="p">({</span>
<span class="w">                      </span><span class="p">...</span><span class="nx">analysis</span><span class="o">!</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">noiseAnalysis</span><span class="o">:</span><span class="w"> </span><span class="kt">e.target.checked</span><span class="p">,</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                    </span><span class="p">});</span>
<span class="w">                  </span><span class="p">}}</span>
<span class="w">                </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">              </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Noise Analysis"</span>
<span class="w">            </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">FormControlLabel</span>
<span class="w">              </span><span class="nx">control</span><span class="o">=</span><span class="p">{</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">Checkbox</span>
<span class="w">                  </span><span class="nx">checked</span><span class="o">=</span><span class="p">{</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="o">?</span><span class="p">.</span><span class="nx">beamAnalysis</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span>
<span class="w">                  </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">setAnalysis</span><span class="p">({</span>
<span class="w">                      </span><span class="p">...</span><span class="nx">analysis</span><span class="o">!</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">options</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="p">...</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
<span class="w">                        </span><span class="nx">beamAnalysis</span><span class="o">:</span><span class="w"> </span><span class="kt">e.target.checked</span><span class="p">,</span>
<span class="w">                      </span><span class="p">},</span>
<span class="w">                    </span><span class="p">});</span>
<span class="w">                  </span><span class="p">}}</span>
<span class="w">                </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">              </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Beam Analysis"</span>
<span class="w">            </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/FormGroup&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Analysis Results */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">results</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Analysis</span><span class="w"> </span><span class="nx">Results</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">AnalysisResultsView</span><span class="w"> </span><span class="nx">results</span><span class="o">=</span><span class="p">{</span><span class="nx">analysis</span><span class="p">.</span><span class="nx">results</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Actions */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"contained"</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">runImageAnalysis</span><span class="p">(</span><span class="nx">image</span><span class="o">!</span><span class="p">,</span><span class="w"> </span><span class="nx">analysis</span><span class="o">!</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
<span class="w">              </span><span class="nx">setAnalysis</span><span class="p">({</span>
<span class="w">                </span><span class="p">...</span><span class="nx">analysis</span><span class="o">!</span><span class="p">,</span>
<span class="w">                </span><span class="nx">results</span><span class="p">,</span>
<span class="w">                </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">              </span><span class="p">});</span>

<span class="w">              </span><span class="c1">// Update tool state</span>
<span class="w">              </span><span class="nx">updateToolState</span><span class="p">(</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">image</span><span class="p">,</span>
<span class="w">                </span><span class="nx">analysis</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="p">...</span><span class="nx">analysis</span><span class="o">!</span><span class="p">,</span>
<span class="w">                  </span><span class="nx">results</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">              </span><span class="p">});</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">            </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">image</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">analysis</span><span class="p">}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Run</span><span class="w"> </span><span class="nx">Analysis</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">            </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">            </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">exportAnalysisResults</span><span class="p">(</span><span class="nx">analysis</span><span class="o">!</span><span class="p">.</span><span class="nx">results</span><span class="p">);</span>
<span class="w">            </span><span class="p">}}</span>
<span class="w">            </span><span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">analysis</span><span class="o">?</span><span class="p">.</span><span class="nx">results</span><span class="p">}</span>
<span class="w">          </span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Export</span><span class="w"> </span><span class="nx">Results</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="source-investigation-tool">Source Investigation Tool<a class="headerlink" href="#source-investigation-tool" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/analysis/SourceInvestigationTool.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">SourceInvestigationTool</span><span class="p">({</span><span class="w"> </span><span class="nx">tool</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">tool</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisTool</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="nx">setSource</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">Source</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">investigation</span><span class="p">,</span><span class="w"> </span><span class="nx">setInvestigation</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useState</span><span class="o">&lt;</span><span class="nx">SourceInvestigation</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardHeader</span>
<span class="w">        </span><span class="nx">title</span><span class="o">=</span><span class="s2">"Source Investigation"</span>
<span class="w">        </span><span class="nx">action</span><span class="o">=</span><span class="p">{</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Tooltip</span><span class="w"> </span><span class="nx">title</span><span class="o">=</span><span class="s2">"All operations are deterministic and reproducible"</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">VerifiedIcon</span><span class="w"> </span><span class="nx">color</span><span class="o">=</span><span class="s2">"success"</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Tooltip&gt;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">CardContent</span><span class="o">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="cm">/* Source Selection */</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mb</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">SourceSelector</span>
<span class="w">            </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">source</span><span class="p">}</span>
<span class="w">            </span><span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="nx">setSource</span><span class="p">}</span>
<span class="w">            </span><span class="nx">showCatalogMatches</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
<span class="w">          </span><span class="o">/&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Investigation Tabs */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">source</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Tabs</span><span class="w"> </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">investigation</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="p">}</span><span class="o">&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Tab</span>
<span class="w">                </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Light Curve"</span>
<span class="w">                </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nx">setInvestigation</span><span class="p">({</span>
<span class="w">                    </span><span class="p">...</span><span class="nx">investigation</span><span class="o">!</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="p">,</span>
<span class="w">                  </span><span class="p">});</span>
<span class="w">                </span><span class="p">}}</span>
<span class="w">              </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Tab</span>
<span class="w">                </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Catalog Comparison"</span>
<span class="w">                </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nx">setInvestigation</span><span class="p">({</span>
<span class="w">                    </span><span class="p">...</span><span class="nx">investigation</span><span class="o">!</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'catalog'</span><span class="p">,</span>
<span class="w">                  </span><span class="p">});</span>
<span class="w">                </span><span class="p">}}</span>
<span class="w">              </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Tab</span>
<span class="w">                </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Image Stack"</span>
<span class="w">                </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nx">setInvestigation</span><span class="p">({</span>
<span class="w">                    </span><span class="p">...</span><span class="nx">investigation</span><span class="o">!</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'images'</span><span class="p">,</span>
<span class="w">                  </span><span class="p">});</span>
<span class="w">                </span><span class="p">}}</span>
<span class="w">              </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="o">&lt;</span><span class="nx">Tab</span>
<span class="w">                </span><span class="nx">label</span><span class="o">=</span><span class="s2">"Profile Fitting"</span>
<span class="w">                </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nx">setInvestigation</span><span class="p">({</span>
<span class="w">                    </span><span class="p">...</span><span class="nx">investigation</span><span class="o">!</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">focus</span><span class="o">:</span><span class="w"> </span><span class="s1">'fitting'</span><span class="p">,</span>
<span class="w">                  </span><span class="p">});</span>
<span class="w">                </span><span class="p">}}</span>
<span class="w">              </span><span class="o">/&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Tabs&gt;</span>

<span class="w">            </span><span class="p">{</span><span class="cm">/* Focused View */</span><span class="p">}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="nx">investigation</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'light-curve'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">LightCurveView</span><span class="w"> </span><span class="nx">source</span><span class="o">=</span><span class="p">{</span><span class="nx">source</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">)}</span>
<span class="w">              </span><span class="p">{</span><span class="nx">investigation</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'catalog'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">CatalogComparisonView</span><span class="w"> </span><span class="nx">source</span><span class="o">=</span><span class="p">{</span><span class="nx">source</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">)}</span>
<span class="w">              </span><span class="p">{</span><span class="nx">investigation</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'images'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">ImageStackView</span><span class="w"> </span><span class="nx">source</span><span class="o">=</span><span class="p">{</span><span class="nx">source</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">)}</span>
<span class="w">              </span><span class="p">{</span><span class="nx">investigation</span><span class="o">?</span><span class="p">.</span><span class="nx">focus</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'fitting'</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">                </span><span class="o">&lt;</span><span class="nx">ProfileFittingView</span><span class="w"> </span><span class="nx">source</span><span class="o">=</span><span class="p">{</span><span class="nx">source</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">              </span><span class="p">)}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>

<span class="w">        </span><span class="p">{</span><span class="cm">/* Reproducibility Info - React Markdown */</span><span class="p">}</span>
<span class="w">        </span><span class="p">{</span><span class="nx">investigation</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">3</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="w"> </span><span class="nx">gutterBottom</span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Reproducibility</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">ReactMarkdown</span>
<span class="w">              </span><span class="nx">remarkPlugins</span><span class="o">=</span><span class="p">{[</span><span class="nx">remarkMath</span><span class="p">]}</span>
<span class="w">              </span><span class="nx">rehypePlugins</span><span class="o">=</span><span class="p">{[</span><span class="nx">rehypeKatex</span><span class="p">]}</span>
<span class="w">            </span><span class="o">&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="sb">`</span>
<span class="sb">**Analysis ID:** \`</span><span class="si">${</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">analysisId</span><span class="si">}</span><span class="sb">\`</span>

<span class="sb">**Parameters:**</span>
<span class="sb">\`\`\`json</span>
<span class="si">${</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">parameters</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="si">}</span>
<span class="sb">\`\`\`</span>

<span class="sb">**Data Versions:**</span>
<span class="sb">- Image: </span><span class="si">${</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">dataVersions</span><span class="p">.</span><span class="nx">image</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'N/A'</span><span class="si">}</span>
<span class="sb">- Catalog: </span><span class="si">${</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">dataVersions</span><span class="p">.</span><span class="nx">catalog</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'N/A'</span><span class="si">}</span>
<span class="sb">- Calibration: </span><span class="si">${</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">dataVersions</span><span class="p">.</span><span class="nx">calibration</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'N/A'</span><span class="si">}</span>

<span class="sb">**Code Version:** \`</span><span class="si">${</span><span class="nx">investigation</span><span class="p">.</span><span class="nx">codeVersion</span><span class="si">}</span><span class="sb">\`</span>
<span class="sb">              `</span><span class="p">}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/ReactMarkdown&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">              </span><span class="nx">size</span><span class="o">=</span><span class="s2">"small"</span>
<span class="w">              </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">              </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">generateReproductionScript</span><span class="p">(</span><span class="nx">tool</span><span class="p">,</span><span class="w"> </span><span class="nx">dataProducts</span><span class="p">);</span>
<span class="w">                </span><span class="nx">openReproductionScriptPanel</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">investigation</span><span class="p">.</span><span class="nx">analysisId</span><span class="p">);</span>
<span class="w">              </span><span class="p">}}</span>
<span class="w">              </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">mt</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span>
<span class="w">            </span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">View</span><span class="w"> </span><span class="nx">Reproduction</span><span class="w"> </span><span class="nx">Script</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="p">)}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/CardContent&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Card&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="reproducibility-system">Reproducibility System<a class="headerlink" href="#reproducibility-system" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/utils/reproducibility.ts</span>

<span class="k">import</span><span class="w"> </span><span class="nx">Editor</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'@monaco-editor/react'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">ReproducibilityRecord</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="w">  </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">dataVersions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">image?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">catalog?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">calibration?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="nx">codeVersion</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">unknown</span><span class="p">;</span>
<span class="w">  </span><span class="nx">script</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="c1">// Generated Python script</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">generateReproductionScript</span><span class="p">(</span>
<span class="w">  </span><span class="nx">tool</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisTool</span><span class="p">,</span>
<span class="w">  </span><span class="nx">dataProducts</span><span class="o">:</span><span class="w"> </span><span class="kt">DataProduct</span><span class="p">[]</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">script</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb"># Reproducible Analysis Script</span>
<span class="sb"># Generated: </span><span class="si">${</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span><span class="si">}</span>
<span class="sb"># Analysis ID: </span><span class="si">${</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span>

<span class="sb">import numpy as np</span>
<span class="sb">from astropy.io import fits</span>
<span class="sb">from dsa110_contimg.analysis import catalog_comparison, image_analysis, source_investigation</span>

<span class="sb"># Data Products</span>
<span class="si">${</span><span class="nx">dataProducts</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">dp</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`# </span><span class="si">${</span><span class="nx">dp</span><span class="p">.</span><span class="kr">type</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">dp</span><span class="p">.</span><span class="nx">path</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">)</span><span class="si">}</span>

<span class="sb"># Parameters</span>
<span class="sb">parameters = </span><span class="si">${</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">tool</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="si">}</span>

<span class="sb"># Run Analysis</span>
<span class="si">${</span><span class="nx">generateAnalysisCode</span><span class="p">(</span><span class="nx">tool</span><span class="p">,</span><span class="w"> </span><span class="nx">dataProducts</span><span class="p">)</span><span class="si">}</span>

<span class="sb"># Results</span>
<span class="sb"># Results saved to: results_</span><span class="si">${</span><span class="nx">tool</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">.json</span>
<span class="sb">`</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">script</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Reproduction Script Viewer Component</span>
<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ReproductionScriptViewer</span><span class="p">({</span><span class="w"> </span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">analysisId</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">script</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="s1">'100%'</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">borderBottom</span><span class="o">:</span><span class="w"> </span><span class="s1">'1px solid rgba(255, 255, 255, 0.1)'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"subtitle2"</span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Reproduction</span><span class="w"> </span><span class="nx">Script</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">analysisId</span><span class="p">}</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">flexGrow</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Editor</span>
<span class="w">          </span><span class="nx">height</span><span class="o">=</span><span class="s2">"100%"</span>
<span class="w">          </span><span class="nx">language</span><span class="o">=</span><span class="s2">"python"</span>
<span class="w">          </span><span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">script</span><span class="p">}</span>
<span class="w">          </span><span class="nx">theme</span><span class="o">=</span><span class="s2">"vs-dark"</span>
<span class="w">          </span><span class="nx">options</span><span class="o">=</span><span class="p">{{</span>
<span class="w">            </span><span class="nx">readOnly</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">minimap</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">enabled</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="nx">fontSize</span><span class="o">:</span><span class="w"> </span><span class="kt">14</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wordWrap</span><span class="o">:</span><span class="w"> </span><span class="s1">'on'</span><span class="p">,</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">borderTop</span><span class="o">:</span><span class="w"> </span><span class="s1">'1px solid rgba(255, 255, 255, 0.1)'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">size</span><span class="o">=</span><span class="s2">"small"</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">downloadScript</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span><span class="w"> </span><span class="nx">analysisId</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Download</span><span class="w"> </span><span class="nx">Script</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">          </span><span class="nx">size</span><span class="o">=</span><span class="s2">"small"</span>
<span class="w">          </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">          </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">copyToClipboard</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
<span class="w">          </span><span class="p">}}</span>
<span class="w">          </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">ml</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="w"> </span><span class="p">}}</span>
<span class="w">        </span><span class="o">&gt;</span>
<span class="w">          </span><span class="nx">Copy</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">Clipboard</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">saveReproducibilityRecord</span><span class="p">(</span>
<span class="w">  </span><span class="nx">record</span><span class="o">:</span><span class="w"> </span><span class="kt">ReproducibilityRecord</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/api/analysis/reproducibility'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'Content-Type'</span><span class="o">:</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="kt">JSON.stringify</span><span class="p">(</span><span class="nx">record</span><span class="p">),</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadReproducibilityRecord</span><span class="p">(</span>
<span class="w">  </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">ReproducibilityRecord</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/api/analysis/reproducibility/</span><span class="si">${</span><span class="nx">analysisId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">reproduceAnalysis</span><span class="p">(</span>
<span class="w">  </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">unknown</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">record</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">loadReproducibilityRecord</span><span class="p">(</span><span class="nx">analysisId</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Execute the script</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/api/analysis/reproduce'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">'Content-Type'</span><span class="o">:</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="kt">JSON.stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">script</span><span class="o">:</span><span class="w"> </span><span class="kt">record.script</span><span class="w"> </span><span class="p">}),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="deterministic-operations">Deterministic Operations<a class="headerlink" href="#deterministic-operations" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/utils/determinism.ts</span>

<span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">DeterministicOperation</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">  </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">seed?</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span><span class="w"> </span><span class="c1">// For random operations</span>
<span class="w">  </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="c1">// Code version</span>
<span class="w">  </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">markAsDeterministic</span><span class="p">(</span>
<span class="w">  </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="kt">DeterministicOperation</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Store operation parameters for reproducibility</span>
<span class="w">  </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span>
<span class="w">    </span><span class="sb">`deterministic_</span><span class="si">${</span><span class="nx">operation</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">    </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">operation</span><span class="p">)</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">verifyDeterminism</span><span class="p">(</span>
<span class="w">  </span><span class="nx">operationId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<span class="w">  </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">unknown</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">stored</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="sb">`deterministic_</span><span class="si">${</span><span class="nx">operationId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">stored</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">operation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">stored</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">DeterministicOperation</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Verify parameters match</span>
<span class="w">  </span><span class="c1">// Verify code version matches</span>
<span class="w">  </span><span class="c1">// Verify results can be reproduced</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">ensureDeterministic</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">  </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="kt">Record</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">unknown</span><span class="o">&gt;</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Set random seed if needed</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">seed</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Set seed in backend</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1">// Record operation</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deterministicOp</span><span class="o">:</span><span class="w"> </span><span class="kt">DeterministicOperation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">generateId</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">operation.name</span><span class="p">,</span>
<span class="w">    </span><span class="nx">parameters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">seed</span><span class="o">:</span><span class="w"> </span><span class="kt">parameters.seed</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kt">number</span><span class="p">,</span>
<span class="w">    </span><span class="nx">version</span><span class="o">:</span><span class="w"> </span><span class="kt">getCodeVersion</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">markAsDeterministic</span><span class="p">(</span><span class="nx">deterministicOp</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">operation</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="analysis-workspace-view">Analysis Workspace View<a class="headerlink" href="#analysis-workspace-view" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/components/views/AnalysisView.tsx</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AnalysisView</span><span class="p">({</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="kt">AnalysisState</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">workspace</span><span class="p">,</span><span class="w"> </span><span class="nx">trustIndicators</span><span class="p">,</span><span class="w"> </span><span class="nx">reproducibility</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">state</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="s1">'100vh'</span><span class="p">,</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">flexDirection</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="cm">/* Header */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="p">,</span><span class="w"> </span><span class="nx">borderBottom</span><span class="o">:</span><span class="w"> </span><span class="s1">'1px solid rgba(255, 255, 255, 0.1)'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">justifyContent</span><span class="o">:</span><span class="w"> </span><span class="s1">'space-between'</span><span class="p">,</span><span class="w"> </span><span class="nx">alignItems</span><span class="o">:</span><span class="w"> </span><span class="s1">'center'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Typography</span><span class="w"> </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"h4"</span><span class="o">&gt;</span>
<span class="w">            </span><span class="nx">Analysis</span><span class="w"> </span><span class="nx">Workspace</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">display</span><span class="o">:</span><span class="w"> </span><span class="s1">'flex'</span><span class="p">,</span><span class="w"> </span><span class="nx">gap</span><span class="o">:</span><span class="w"> </span><span class="kt">2</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">              </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">              </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">saveWorkspace</span><span class="p">(</span><span class="nx">workspace</span><span class="p">);</span>
<span class="w">              </span><span class="p">}}</span>
<span class="w">            </span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Save</span><span class="w"> </span><span class="nx">Workspace</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">            </span><span class="o">&lt;</span><span class="nx">Button</span>
<span class="w">              </span><span class="nx">variant</span><span class="o">=</span><span class="s2">"outlined"</span>
<span class="w">              </span><span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">exportWorkspace</span><span class="p">(</span><span class="nx">workspace</span><span class="p">);</span>
<span class="w">              </span><span class="p">}}</span>
<span class="w">            </span><span class="o">&gt;</span>
<span class="w">              </span><span class="nx">Export</span>
<span class="w">            </span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="w">          </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Trust Indicators */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">TrustIndicatorBar</span><span class="w"> </span><span class="nx">indicators</span><span class="o">=</span><span class="p">{</span><span class="nx">trustIndicators</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Main Workspace */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">Box</span><span class="w"> </span><span class="nx">sx</span><span class="o">=</span><span class="p">{{</span><span class="w"> </span><span class="nx">flexGrow</span><span class="o">:</span><span class="w"> </span><span class="kt">1</span><span class="p">,</span><span class="w"> </span><span class="nx">overflow</span><span class="o">:</span><span class="w"> </span><span class="s1">'hidden'</span><span class="w"> </span><span class="p">}}</span><span class="o">&gt;</span>
<span class="w">        </span><span class="o">&lt;</span><span class="nx">AnalysisWorkspace</span><span class="w"> </span><span class="nx">workspace</span><span class="o">=</span><span class="p">{</span><span class="nx">workspace</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">      </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>

<span class="w">      </span><span class="p">{</span><span class="cm">/* Toolbar */</span><span class="p">}</span>
<span class="w">      </span><span class="o">&lt;</span><span class="nx">AnalysisToolbar</span>
<span class="w">        </span><span class="nx">workspace</span><span class="o">=</span><span class="p">{</span><span class="nx">workspace</span><span class="p">}</span>
<span class="w">        </span><span class="nx">onAddTool</span><span class="o">=</span><span class="p">{(</span><span class="nx">toolType</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">addToolToWorkspace</span><span class="p">(</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">toolType</span><span class="p">);</span>
<span class="w">        </span><span class="p">}}</span>
<span class="w">      </span><span class="o">/&gt;</span>
<span class="w">    </span><span class="o">&lt;</span><span class="err">/Box&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="transition-to-analysis-mode">Transition to Analysis Mode<a class="headerlink" href="#transition-to-analysis-mode" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/hooks/useAnalysisTransition.ts</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useHotkeys</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react-hotkeys-hook'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">useAnalysisTransition</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">transitionTo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">currentState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Keyboard shortcut: Ctrl+Shift+A to enter analysis mode</span>
<span class="w">  </span><span class="nx">useHotkeys</span><span class="p">(</span><span class="s1">'ctrl+shift+a'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentState</span><span class="p">.</span><span class="nx">mode</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">'analysis'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Get available data products</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">dataProducts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getAvailableDataProducts</span><span class="p">();</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">dataProducts</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">enterAnalysisMode</span><span class="p">(</span><span class="nx">dataProducts</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">scopes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'global'</span><span class="p">]</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">enterAnalysisMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">dataProducts</span><span class="o">:</span><span class="w"> </span><span class="kt">DataProduct</span><span class="p">[])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Create new workspace with default layout</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">workspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">createAnalysisWorkspace</span><span class="p">({</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="sb">`Analysis </span><span class="si">${</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toLocaleString</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">      </span><span class="nx">dataProducts</span><span class="p">,</span>
<span class="w">      </span><span class="nx">layout</span><span class="o">:</span><span class="w"> </span><span class="kt">getDefaultWorkspaceLayout</span><span class="p">(),</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// Calculate trust indicators</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">trustIndicators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">calculateTrustIndicators</span><span class="p">(</span><span class="nx">dataProducts</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Initialize reproducibility info</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">reproducibility</span><span class="o">:</span><span class="w"> </span><span class="kt">ReproducibilityInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">analysisId</span><span class="o">:</span><span class="w"> </span><span class="kt">generateId</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">parameters</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">      </span><span class="nx">dataVersions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="kt">dataProducts.find</span><span class="p">((</span><span class="nx">dp</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dp</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'image'</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">version</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'unknown'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">catalog</span><span class="o">:</span><span class="w"> </span><span class="kt">dataProducts.find</span><span class="p">((</span><span class="nx">dp</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dp</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'catalog'</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">version</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'unknown'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">calibration</span><span class="o">:</span><span class="w"> </span><span class="kt">dataProducts.find</span><span class="p">((</span><span class="nx">dp</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">dp</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'calibration'</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="nx">version</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">'unknown'</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nx">codeVersion</span><span class="o">:</span><span class="w"> </span><span class="kt">getCodeVersion</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">canReproduce</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Transition to analysis mode</span>
<span class="w">    </span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">'analysis'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">workspace</span><span class="p">,</span>
<span class="w">      </span><span class="nx">activeTools</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">      </span><span class="nx">dataProducts</span><span class="p">,</span>
<span class="w">      </span><span class="nx">trustIndicators</span><span class="p">,</span>
<span class="w">      </span><span class="nx">reproducibility</span><span class="p">,</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="p">[</span><span class="nx">transitionTo</span><span class="p">]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">enterAnalysisMode</span><span class="w"> </span><span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">getDefaultWorkspaceLayout</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'row'</span><span class="p">,</span>
<span class="w">        </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">25</span><span class="p">,</span>
<span class="w">            </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'component'</span><span class="p">,</span><span class="w"> </span><span class="nx">componentName</span><span class="o">:</span><span class="w"> </span><span class="s1">'DataBrowser'</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">'Data Browser'</span><span class="w"> </span><span class="p">},</span>
<span class="w">              </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'component'</span><span class="p">,</span><span class="w"> </span><span class="nx">componentName</span><span class="o">:</span><span class="w"> </span><span class="s1">'ParameterForm'</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">'Parameters'</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">            </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'column'</span><span class="p">,</span>
<span class="w">            </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="kt">75</span><span class="p">,</span>
<span class="w">            </span><span class="nx">content</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">              </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s1">'component'</span><span class="p">,</span><span class="w"> </span><span class="nx">componentName</span><span class="o">:</span><span class="w"> </span><span class="s1">'MainAnalysis'</span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s1">'Analysis'</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="code-examples">Code Examples<a class="headerlink" href="#code-examples" title="Permanent link">Â¶</a></h2>
<h3 id="complete-dashboard-page">Complete Dashboard Page<a class="headerlink" href="#complete-dashboard-page" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/pages/AnticipatoryDashboardPage.tsx</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useEffect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DashboardShell</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../components/DashboardShell'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useAnticipatoryPrefetch</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../hooks/useAnticipatoryPrefetch'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useStateTransitions</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../hooks/useStateTransitions'</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">'../stores/dashboardStore'</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">AnticipatoryDashboardPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Initialize anticipatory systems</span>
<span class="w">  </span><span class="nx">useAnticipatoryPrefetch</span><span class="p">();</span>
<span class="w">  </span><span class="nx">useStateTransitions</span><span class="p">();</span>
<span class="w">  </span><span class="nx">useStreamingPipelineMonitor</span><span class="p">();</span><span class="w"> </span><span class="c1">// Monitor streaming pipeline</span>
<span class="w">  </span><span class="nx">useAutonomousOperations</span><span class="p">();</span><span class="w"> </span><span class="c1">// Track autonomous operations</span>

<span class="w">  </span><span class="c1">// Get current state</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useDashboardStore</span><span class="p">((</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">DashboardShell</span><span class="w"> </span><span class="o">/&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="pre-load-investigation-data">Pre-load Investigation Data<a class="headerlink" href="#pre-load-investigation-data" title="Permanent link">Â¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// frontend/src/utils/preloadInvestigationData.ts</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">preloadInvestigationData</span><span class="p">(</span>
<span class="w">  </span><span class="nx">candidate</span><span class="o">:</span><span class="w"> </span><span class="kt">ESECandidate</span>
<span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">PreloadedInvestigationData</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useQueryClient</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Pre-fetch all investigation data in parallel</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">lightCurve</span><span class="p">,</span><span class="w"> </span><span class="nx">calibrationQA</span><span class="p">,</span><span class="w"> </span><span class="nx">catalogComparison</span><span class="p">,</span><span class="w"> </span><span class="nx">historicalContext</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
<span class="w">    </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">fetchQuery</span><span class="p">([</span><span class="s1">'light-curve'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">    </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">fetchQuery</span><span class="p">([</span><span class="s1">'calibration-qa'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">ms_path</span><span class="p">]),</span>
<span class="w">    </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">fetchQuery</span><span class="p">([</span><span class="s1">'catalog-comparison'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">    </span><span class="nx">queryClient</span><span class="p">.</span><span class="nx">fetchQuery</span><span class="p">([</span><span class="s1">'historical-context'</span><span class="p">,</span><span class="w"> </span><span class="nx">candidate</span><span class="p">.</span><span class="nx">source_id</span><span class="p">]),</span>
<span class="w">  </span><span class="p">]);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">lightCurve</span><span class="p">,</span>
<span class="w">    </span><span class="nx">calibrationQA</span><span class="p">,</span>
<span class="w">    </span><span class="nx">catalogComparison</span><span class="p">,</span>
<span class="w">    </span><span class="nx">historicalContext</span><span class="p">,</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<hr/>
<h2 id="key-metrics-for-success">Key Metrics for Success<a class="headerlink" href="#key-metrics-for-success" title="Permanent link">Â¶</a></h2>
<ol>
<li><strong>Zero clicks for normal operation</strong> - Dashboard shows nothing when autonomous operations run smoothly</li>
<li><strong>One click for common tasks</strong> - Most actions are one click away</li>
<li><strong>Autonomous operation visibility</strong> - 100% visibility into what the pipeline is doing autonomously</li>
<li><strong>Manual override time</strong> - &lt;5 seconds from decision to manual control</li>
<li><strong>Pre-fetch hit rate</strong> - &gt;80% of user requests should be pre-fetched</li>
<li><strong>Workflow completion rate</strong> - &gt;90% of workflows completed without guidance</li>
<li><strong>Time to insight</strong> - &lt;2 seconds from discovery to investigation view</li>
<li><strong>User satisfaction</strong> - Dashboard feels "magical" and intuitive</li>
<li><strong>Control handoff</strong> - Seamless transition between autonomous and manual modes</li>
<li><strong>Analysis flexibility</strong> - Support diverse analysis workflows without constraints</li>
<li><strong>Trust indicators</strong> - 100% of analysis operations show trust indicators</li>
<li><strong>Reproducibility</strong> - 100% of analysis operations are reproducible</li>
<li><strong>Deterministic operations</strong> - All analysis operations produce consistent results</li>
</ol>
<hr/>
<h2 id="tool-dependencies-summary">Tool Dependencies Summary<a class="headerlink" href="#tool-dependencies-summary" title="Permanent link">Â¶</a></h2>
<h3 id="phase-45-foundation">Phase 4.5 (Foundation)<a class="headerlink" href="#phase-45-foundation" title="Permanent link">Â¶</a></h3>
<ul>
<li><code>golden-layout</code> - Layout system</li>
<li><code>@monaco-editor/react</code> - Code editor</li>
<li><code>@rjsf/core</code>, <code>@rjsf/mui</code>, <code>@rjsf/validator-ajv8</code> - Form generation</li>
<li><code>react-split-pane</code> - Side-by-side comparisons</li>
<li><code>react-markdown</code>, <code>remark-math</code>, <code>rehype-katex</code> - Documentation</li>
<li><code>react-hotkeys-hook</code> - Keyboard shortcuts</li>
</ul>
<h3 id="phase-46-core-tools">Phase 4.6 (Core Tools)<a class="headerlink" href="#phase-46-core-tools" title="Permanent link">Â¶</a></h3>
<ul>
<li><code>@tanstack/react-table</code> - Advanced tables</li>
<li><code>react-diff-viewer</code> - Result comparison</li>
<li><code>plotly.js</code>, <code>react-plotly.js</code> - Already installed â</li>
<li><code>d3</code> - Already installed â</li>
</ul>
<h3 id="phase-47-enhancements">Phase 4.7 (Enhancements)<a class="headerlink" href="#phase-47-enhancements" title="Permanent link">Â¶</a></h3>
<ul>
<li><code>reactflow</code> - Workflow visualization</li>
<li><code>react-contextmenu</code> - Right-click menus</li>
<li><code>@dnd-kit/core</code>, <code>@dnd-kit/sortable</code> - Drag and drop</li>
</ul>
<h3 id="already-available">Already Available<a class="headerlink" href="#already-available" title="Permanent link">Â¶</a></h3>
<ul>
<li><code>ag-grid-community</code>, <code>ag-grid-react</code> - Data grids â</li>
<li><code>plotly.js</code>, <code>react-plotly.js</code> - Visualization â</li>
<li><code>d3</code> - Custom visualizations â</li>
</ul>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">Â¶</a></h2>
<ol>
<li><strong>Review and approve</strong> this implementation plan</li>
<li><strong>Set up project structure</strong> for new components</li>
<li><strong>Install Phase 4.5 dependencies</strong> - Foundation tools</li>
<li><strong>Begin Phase 1</strong> - Foundation</li>
<li><strong>Iterate based on feedback</strong> - Adjust as we learn</li>
</ol>
<hr/>
<p><strong>This dashboard will feel magical - it will anticipate needs, eliminate steps, and guide users seamlessly through complex workflows. The complexity is hidden; the simplicity is revealed.</strong></p>
<p><strong>The streaming pipeline operates autonomously, but the dashboard provides complete visibility and control. When everything runs smoothly, the dashboard stays quiet. When intervention is needed, it anticipates what you'll want to do - seamlessly transitioning from autonomous monitoring to manual control and back again.</strong></p>
<p><strong>Once data products are ready, the analysis workspace provides flexible, trustworthy, and deterministic tools for exploration. Every analysis operation is reproducible, every result is traceable, and trust indicators ensure you know the reliability of your findings. The complexity of scientific analysis is made simple, but never at the cost of rigor.</strong></p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.indexes", "content.code.copy", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "0.1.0"}</script>
<script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../../javascripts/mermaid-zoom.js"></script>
</body>
</html>