
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://code.deepsynoptic.org/dsa110-contimg/archive/analysis/WABIFAT_ANALYSIS/" rel="canonical"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.31" name="generator"/>
<title>WABIFAT Tool Analysis - DSA-110 Continuum Imaging Pipeline</title>
<link href="../../../assets/stylesheets/main.3cba04c6.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#wabifat-tool-analysis">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DSA-110 Continuum Imaging Pipeline
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              WABIFAT Tool Analysis
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DSA-110 Continuum Imaging Pipeline
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DOCUMENTATION_QUICK_REFERENCE/">
<span class="md-ellipsis">
    Documentation Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../concepts/">
<span class="md-ellipsis">
    Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/DIRECTORY_ARCHITECTURE/">
<span class="md-ellipsis">
    Directory Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/modules/">
<span class="md-ellipsis">
    Modules
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/control-panel/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/aoflagger/">
<span class="md-ellipsis">
    AOFlagger
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/frontend_design/">
<span class="md-ellipsis">
    Frontend Design
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_8">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/dashboard_mockups/">
<span class="md-ellipsis">
    Mockups
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/GLOSSARY/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
<span class="md-ellipsis">
    Pipeline
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
            Pipeline
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_stage_architecture/">
<span class="md-ellipsis">
    Stage Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_workflow_visualization/">
<span class="md-ellipsis">
    Workflow Visualization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_production_features/">
<span class="md-ellipsis">
    Production Features
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pipeline_patterns/">
<span class="md-ellipsis">
    Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
<span class="md-ellipsis">
    Science
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
            Science
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/science/photometry_normalization/">
<span class="md-ellipsis">
    Photometry Normalization
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/mcp_browser_server_setup/">
<span class="md-ellipsis">
    Browser MCP Server
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Tutorials
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/HDF5_TO_MS_TUTORIAL/">
<span class="md-ellipsis">
    HDF5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/simulation-tutorial/">
<span class="md-ellipsis">
    Simulation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/calibrate-apply/">
<span class="md-ellipsis">
    Calibrate and Apply
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/convert-standalone/">
<span class="md-ellipsis">
    Convert Standalone
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-ellipsis">
    Notebooks
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/bandpass_calibration_test.ipynb">
<span class="md-ellipsis">
    Bandpass Calibration Test
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/calibrator_helper.py">
<span class="md-ellipsis">
    Calibrator Helper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/CalibratorSearch.ipynb">
<span class="md-ellipsis">
    Calibrator Search
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tutorials/notebooks/ms_staging_workflow.ipynb">
<span class="md-ellipsis">
    MS Staging Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    How-To Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/streaming/">
<span class="md-ellipsis">
    Streaming Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/dashboard/">
<span class="md-ellipsis">
    Dashboard Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/github_pages_walkthrough/">
<span class="md-ellipsis">
    GitHub Pages Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
<span class="md-ellipsis">
    Quickstarts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
            Quickstarts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/quickstart/">
<span class="md-ellipsis">
    General
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/control-panel-quickstart/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/LINEAR_SETUP_QUICKSTART/">
<span class="md-ellipsis">
    Linear Setup
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
<span class="md-ellipsis">
    Testing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_5">
<span class="md-nav__icon md-icon"></span>
            Testing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/FAST_TESTING/">
<span class="md-ellipsis">
    Fast Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/PIPELINE_TESTING_GUIDE/">
<span class="md-ellipsis">
    Pipeline Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/TEST_FLAG_SUBCOMMAND/">
<span class="md-ellipsis">
    Flag Subcommand
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/build-vp-from-h5/">
<span class="md-ellipsis">
    Build VP from h5
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
<span class="md-ellipsis">
    Calibration
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
            Calibration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/CALIBRATION_DETAILED_PROCEDURE/">
<span class="md-ellipsis">
    Detailed Procedure
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/FIND_CALIBRATOR_TRANSIT_DATA/">
<span class="md-ellipsis">
    Find Calibrator Transit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/IMAGE_0834_TRANSIT_5MIN/">
<span class="md-ellipsis">
    Image 0834 Transit 5min
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
<span class="md-ellipsis">
    Mosaic
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_9">
<span class="md-nav__icon md-icon"></span>
            Mosaic
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/mosaic_quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/mosaic/">
<span class="md-ellipsis">
    Complete Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
<span class="md-ellipsis">
    Quality Assurance
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_10">
<span class="md-nav__icon md-icon"></span>
            Quality Assurance
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/QUALITY_ASSURANCE_SETUP/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/quicklook/">
<span class="md-ellipsis">
    Quick Look
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/reprocess/">
<span class="md-ellipsis">
    Reprocess
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/USING_ORCHESTRATOR_CLI/">
<span class="md-ellipsis">
    Using Orchestrator CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/LINEAR_INTEGRATION/">
<span class="md-ellipsis">
    Linear Integration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/frontend-initial-setup/">
<span class="md-ellipsis">
    Frontend Initial Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/PARAMETER_OPTIMIZATION_GUIDE/">
<span class="md-ellipsis">
    AOFlagger Parameter Optimization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/downsampling_guide/">
<span class="md-ellipsis">
    Downsampling Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_17" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_17_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_17">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/uvh5_to_ms_conversion/">
<span class="md-ellipsis">
    UVH5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../how-to/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
<span class="md-ellipsis">
    API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/api-endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_1_2">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/dashboard_backend_api/">
<span class="md-ellipsis">
    API Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/dashboard_pages_and_features/">
<span class="md-ellipsis">
    Pages &amp; Features
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/backend_integration_snippets/">
<span class="md-ellipsis">
    Integration Snippets
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/calibration-overview/">
<span class="md-ellipsis">
    Calibration Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/cli/">
<span class="md-ellipsis">
    CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/control-panel-cheatsheet/">
<span class="md-ellipsis">
    Control Panel Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/database_schema/">
<span class="md-ellipsis">
    Database Schema
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/env/">
<span class="md-ellipsis">
    Environment Variables
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/CRITICAL_PYTHON_ENVIRONMENT/">
<span class="md-ellipsis">
    Critical Python Environment
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
<span class="md-ellipsis">
    Optimizations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
            Optimizations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/optimizations/OPTIMIZATION_API/">
<span class="md-ellipsis">
    API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../reference/optimizations/PROFILING_GUIDE/">
<span class="md-ellipsis">
    Profiling Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Operations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-ellipsis">
    Deployment
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/deploy-docker/">
<span class="md-ellipsis">
    Docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/deploy-systemd/">
<span class="md-ellipsis">
    systemd
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/port-management/">
<span class="md-ellipsis">
    Port Management
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/refant_quick_reference/">
<span class="md-ellipsis">
    Refant Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/service_restart_fix/">
<span class="md-ellipsis">
    Service Restart Fix
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operations/systemd-migration/">
<span class="md-ellipsis">
    Systemd Migration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Archive
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/archive/CONTRIBUTING_TODO/">
<span class="md-ellipsis">
    Contributing to TODO
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributing/archive/rules/">
<span class="md-ellipsis">
    Rules
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#executive-summary">
<span class="md-ellipsis">
      Executive Summary
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wabifat-components">
<span class="md-ellipsis">
      WABIFAT Components
    </span>
</a>
<nav aria-label="WABIFAT Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-wabifat_finalpy-adaptive-channel-binning">
<span class="md-ellipsis">
      1. WABIFAT_FINAL.py - Adaptive Channel Binning
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-ff_and_morepy-forced-fitting-with-aegean">
<span class="md-ellipsis">
      2. FF_and_more.py - Forced Fitting with Aegean
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-plotpy-fits-creation-and-plotting">
<span class="md-ellipsis">
      3. plot.py - FITS Creation and Plotting
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#comparison-wabifat-vs-dsa-110-photometry">
<span class="md-ellipsis">
      Comparison: WABIFAT vs. DSA-110 Photometry
    </span>
</a>
<nav aria-label="Comparison: WABIFAT vs. DSA-110 Photometry" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#current-dsa-110-approach-photometryforcedpy">
<span class="md-ellipsis">
      Current DSA-110 Approach (photometry/forced.py)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#wabifat-approach">
<span class="md-ellipsis">
      WABIFAT Approach
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#borrowable-techniques">
<span class="md-ellipsis">
      Borrowable Techniques
    </span>
</a>
<nav aria-label="Borrowable Techniques" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-adaptive-channel-binning-high-value">
<span class="md-ellipsis">
      1. Adaptive Channel Binning ⭐ HIGH VALUE
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-aegean-source-fitting-integration-high-value">
<span class="md-ellipsis">
      2. Aegean Source Fitting Integration ⭐ HIGH VALUE
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-polarization-analysis-medium-value">
<span class="md-ellipsis">
      3. Polarization Analysis ⭐ MEDIUM VALUE
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#4-prioritized-fitting-medium-value">
<span class="md-ellipsis">
      4. Prioritized Fitting ⭐ MEDIUM VALUE
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-recommendations">
<span class="md-ellipsis">
      Implementation Recommendations
    </span>
</a>
<nav aria-label="Implementation Recommendations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-1-adaptive-channel-binning-high-priority">
<span class="md-ellipsis">
      Phase 1: Adaptive Channel Binning (High Priority)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-2-aegean-integration-high-priority">
<span class="md-ellipsis">
      Phase 2: Aegean Integration (High Priority)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phase-3-polarization-analysis-low-priority">
<span class="md-ellipsis">
      Phase 3: Polarization Analysis (Low Priority)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#code-access-and-analysis">
<span class="md-ellipsis">
      Code Access and Analysis
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compatibility-assessment">
<span class="md-ellipsis">
      Compatibility Assessment
    </span>
</a>
<nav aria-label="Compatibility Assessment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#dependencies">
<span class="md-ellipsis">
      Dependencies
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-format-compatibility">
<span class="md-ellipsis">
      Data Format Compatibility
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telescope-specific-considerations">
<span class="md-ellipsis">
      Telescope-Specific Considerations
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#risk-assessment">
<span class="md-ellipsis">
      Risk Assessment
    </span>
</a>
<nav aria-label="Risk Assessment" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#technical-risks">
<span class="md-ellipsis">
      Technical Risks
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-risks">
<span class="md-ellipsis">
      Integration Risks
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conclusion">
<span class="md-ellipsis">
      Conclusion
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="wabifat-tool-analysis">WABIFAT Tool Analysis<a class="headerlink" href="#wabifat-tool-analysis" title="Permanent link">¶</a></h1>
<p><strong>Date:</strong> 2025-11-12<br/>
<strong>Repository:</strong> https://github.com/KasVeken/WABIFAT<br/>
<strong>Purpose:</strong> Assess borrowable techniques for DSA-110 continuum imaging pipeline</p>
<hr/>
<h2 id="executive-summary">Executive Summary<a class="headerlink" href="#executive-summary" title="Permanent link">¶</a></h2>
<p><strong>WABIFAT</strong> (WSClean, Aegean, Bane Interaction to create fluxdensity versus Frequency And Time plots) is a Python tool for creating spectra and light curves from radio observation MS files (LOFAR). While the codebase is small and "not user friendly" according to the author, it contains several techniques that could enhance the DSA-110 pipeline's photometry capabilities.</p>
<p><strong>Key Finding:</strong> WABIFAT's <strong>adaptive channel binning</strong> and <strong>Aegean source fitting integration</strong> could significantly improve the DSA-110 pipeline's forced photometry, especially for weak sources and multi-frequency analysis.</p>
<hr/>
<h2 id="wabifat-components">WABIFAT Components<a class="headerlink" href="#wabifat-components" title="Permanent link">¶</a></h2>
<h3 id="1-wabifat_finalpy-adaptive-channel-binning">1. <code>WABIFAT_FINAL.py</code> - Adaptive Channel Binning<a class="headerlink" href="#1-wabifat_finalpy-adaptive-channel-binning" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Adaptively bins frequency channels to find detections or non-detections</p>
<p><strong>Algorithm Details (from code analysis):</strong></p>
<p>The adaptive binning algorithm implements an iterative, width-increasing strategy:</p>
<ol>
<li><strong>Initialization:</strong></li>
<li>Start with <code>initial_check_width</code> (e.g., 5 channels for frequency, 325 scans for time)</li>
<li>Create list of all channels/scans to process</li>
<li>
<p>Initialize empty lists for detections, misfits, and results</p>
</li>
<li>
<p><strong>Main Loop (increasing check_width):</strong>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">check_width</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial_check_width</span><span class="p">,</span> <span class="n">max_width</span><span class="p">):</span>
    <span class="c1"># Find consecutive series of channels/scans</span>
    <span class="c1"># Split series into slices of check_width</span>
    <span class="c1"># Process each slice with WSClean + BANE + Aegean</span>
    <span class="c1"># If SNR &lt; threshold: add channels back to pool</span>
    <span class="c1"># If SNR &gt;= threshold: record as detection</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Consecutive Series Detection:</strong></p>
</li>
<li>Identifies consecutive channels/scans (e.g., [24, 25, 26, 27, ...])</li>
<li>Handles gaps by splitting into separate series</li>
<li>
<p>Uses modulo operation to handle remainder channels</p>
</li>
<li>
<p><strong>Slice Processing:</strong></p>
</li>
<li>Splits consecutive series into slices of <code>check_width</code> channels</li>
<li>
<p>Each slice processed independently:</p>
<ul>
<li>WSClean imaging with channel range</li>
<li>BANE for RMS/background estimation</li>
<li>Aegean for source detection</li>
<li>SNR check (default: 5σ threshold)</li>
</ul>
</li>
<li>
<p><strong>Misfit Handling:</strong></p>
</li>
<li>Channels that never meet SNR threshold become "misfits"</li>
<li>Final pass: tries combining adjacent misfits</li>
<li>
<p>If combined misfits meet threshold, they become detections</p>
</li>
<li>
<p><strong>Key Parameters:</strong></p>
</li>
<li><code>SNR_accept = 5.0</code> (default SNR threshold)</li>
<li><code>seedclip = 4.0</code> (Aegean seed clipping threshold)</li>
<li><code>coord_margin = 0.5*0.3*0.002777</code> (3 arcsec search radius in degrees)</li>
<li><code>misfitnumber = 2</code> (minimum misfits to retry)</li>
</ol>
<p><strong>Key Technique:</strong>
- Iterative width-increasing strategy (starts narrow, widens until detection)
- SNR-based detection threshold (5σ default)
- Misfit recovery mechanism (tries adjacent combinations)
- Works across frequency channels OR time intervals (same algorithm)</p>
<p><strong>Potential Value for DSA-110:</strong>
- <strong>Multi-frequency analysis</strong>: DSA-110 processes 16 subbands (frequency channels)
- <strong>Weak source detection</strong>: Adaptive binning could improve detection of faint sources
- <strong>SNR optimization</strong>: Better flux measurements for sources near detection threshold</p>
<p><strong>Current DSA-110 Gap:</strong>
- Current photometry (<code>photometry/forced.py</code>) uses simple peak measurement in a fixed box
- No adaptive binning or frequency-domain optimization
- No multi-frequency combination strategy</p>
<h3 id="2-ff_and_morepy-forced-fitting-with-aegean">2. <code>FF_and_more.py</code> - Forced Fitting with Aegean<a class="headerlink" href="#2-ff_and_morepy-forced-fitting-with-aegean" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> 
- Forced fitting mechanism using Aegean's prioritized fitting option
- Calculates circular polarization fraction (Stokes V)
- Plots Stokes I, Stokes V, and fraction plots</p>
<p><strong>Algorithm Details (from code analysis):</strong></p>
<ol>
<li>
<p><strong>Forced Fitting Workflow (<code>forced_fitter()</code> function):</strong>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">each</span> <span class="n">FITS</span> <span class="n">image</span> <span class="p">(</span><span class="n">detections</span> <span class="o">+</span> <span class="n">non</span><span class="o">-</span><span class="n">detections</span><span class="p">):</span>
    <span class="c1"># Run BANE for RMS/background</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'BANE '</span> <span class="o">+</span> <span class="n">fits_path</span><span class="p">)</span>

    <span class="c1"># Extract PSF parameters from FITS header</span>
    <span class="n">bmaj</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bmaj'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3600</span>  <span class="c1"># arcsec</span>
    <span class="n">bmin</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bmin'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3600</span>
    <span class="n">bpa</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bpa'</span><span class="p">]</span>

    <span class="c1"># Create Aegean input table with source position</span>
    <span class="n">create_fits_table</span><span class="p">(</span>
        <span class="n">ra</span><span class="o">=</span><span class="n">target_ra</span><span class="p">,</span>
        <span class="n">dec</span><span class="o">=</span><span class="n">target_dec</span><span class="p">,</span>
        <span class="n">peak_flux</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># dummy value</span>
        <span class="n">a</span><span class="o">=</span><span class="n">bmaj</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">bmin</span><span class="p">,</span> <span class="n">pa</span><span class="o">=</span><span class="n">bpa</span><span class="p">,</span>  <span class="c1"># PSF parameters</span>
        <span class="n">psf_a</span><span class="o">=</span><span class="n">bmaj</span><span class="p">,</span> <span class="n">psf_b</span><span class="o">=</span><span class="n">bmin</span><span class="p">,</span> <span class="n">psf_pa</span><span class="o">=</span><span class="n">bpa</span>
    <span class="p">)</span>

    <span class="c1"># Run Aegean with prioritized fitting</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">'aegean --autoload --priorized 1 '</span>
              <span class="s1">'--input input_table.fits '</span>
              <span class="s1">'--floodclip -1 '</span>
              <span class="s1">'--table output_table.fits '</span>
              <span class="s1">'--noise rms.fits '</span>
              <span class="s1">'--background bkg.fits '</span>
              <span class="s1">'image.fits'</span><span class="p">)</span>

    <span class="c1"># Extract results from Aegean output table</span>
    <span class="n">peak_flux</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s1">'peak_flux'</span><span class="p">]</span>
    <span class="n">err_peak_flux</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s1">'err_peak_flux'</span><span class="p">]</span>
    <span class="n">local_rms</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s1">'local_rms'</span><span class="p">]</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Polarization Fraction Calculation (<code>polfrac_forced_plot()</code> function):</strong></p>
</li>
<li>Combines Stokes I and Stokes V forced-fit results</li>
<li>Matches frequency/time intervals between I and V</li>
<li>Calculates fraction: <code>polfrac = abs(V/I)</code></li>
<li>Error propagation:
     <div class="highlight"><pre><span></span><code><span class="n">polfrac_err</span> <span class="o">=</span> <span class="n">polfrac</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span>
    <span class="p">(</span><span class="n">err_I</span><span class="o">/</span><span class="n">I</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">err_V</span><span class="o">/</span><span class="n">V</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span>
<span class="p">)</span>
</code></pre></div></li>
<li>Handles mismatched interval widths with scaling factors</li>
<li>
<p>Filters by SNR (requires SNR_I &gt;= 3 AND SNR_V &gt;= 3)</p>
</li>
<li>
<p><strong>Key Techniques:</strong></p>
</li>
<li><strong>Aegean integration</strong>: Uses Aegean source finder for sophisticated source fitting</li>
<li><strong>Prioritized fitting</strong>: <code>--priorized 1</code> flag for forced fitting at known positions</li>
<li><strong>PSF-aware fitting</strong>: Uses image PSF parameters in input table</li>
<li><strong>Polarization analysis</strong>: Stokes V (circular polarization) calculation with proper error propagation</li>
<li><strong>Interval matching</strong>: Complex logic to match I and V intervals with different widths</li>
</ol>
<p><strong>Potential Value for DSA-110:</strong>
- <strong>Better source fitting</strong>: Aegean provides more accurate flux measurements than simple peak
- <strong>Blended sources</strong>: Prioritized fitting handles overlapping sources better
- <strong>Polarization capability</strong>: Adds Stokes V analysis (currently DSA-110 focuses on Stokes I)
- <strong>Morphology handling</strong>: Better for extended or resolved sources</p>
<p><strong>Current DSA-110 Gap:</strong>
- Simple peak measurement (<code>measure_forced_peak</code>) - no source fitting
- No Aegean integration
- No polarization analysis (Stokes V)
- Limited handling of blended/extended sources</p>
<h3 id="3-plotpy-fits-creation-and-plotting">3. <code>plot.py</code> - FITS Creation and Plotting<a class="headerlink" href="#3-plotpy-fits-creation-and-plotting" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong>
- Creates input FITS files necessary for WABIFAT and FF_and_more
- Contains plotting functions for results</p>
<p><strong>Potential Value for DSA-110:</strong>
- Plotting utilities for spectra and light curves
- FITS file preparation utilities</p>
<p><strong>Current DSA-110 Status:</strong>
- Already has FITS export capabilities
- Has basic QA plotting (<code>qa/plotting.py</code>)
- Could benefit from enhanced light curve visualization</p>
<hr/>
<h2 id="comparison-wabifat-vs-dsa-110-photometry">Comparison: WABIFAT vs. DSA-110 Photometry<a class="headerlink" href="#comparison-wabifat-vs-dsa-110-photometry" title="Permanent link">¶</a></h2>
<h3 id="current-dsa-110-approach-photometryforcedpy">Current DSA-110 Approach (<code>photometry/forced.py</code>)<a class="headerlink" href="#current-dsa-110-approach-photometryforcedpy" title="Permanent link">¶</a></h3>
<p><strong>Strengths:</strong>
- Simple, fast peak measurement
- Well-integrated with normalization pipeline
- Robust error estimation (sigma-clipped RMS in annulus)
- Works with PB-corrected images</p>
<p><strong>Limitations:</strong>
- Fixed box size (5 pixels default)
- No adaptive binning
- No source fitting (just peak)
- No polarization analysis
- Limited handling of blended sources</p>
<h3 id="wabifat-approach">WABIFAT Approach<a class="headerlink" href="#wabifat-approach" title="Permanent link">¶</a></h3>
<p><strong>Strengths:</strong>
- Adaptive channel binning for SNR optimization
- Aegean integration for sophisticated source fitting
- Polarization analysis (Stokes V)
- Prioritized fitting for blended sources</p>
<p><strong>Limitations:</strong>
- Code quality: "not user friendly" (per author)
- Small codebase (3 files, ~5 commits)
- LOFAR-specific (may need adaptation for DSA-110)
- No normalization pipeline (DSA-110's key strength)</p>
<hr/>
<h2 id="borrowable-techniques">Borrowable Techniques<a class="headerlink" href="#borrowable-techniques" title="Permanent link">¶</a></h2>
<h3 id="1-adaptive-channel-binning-high-value">1. Adaptive Channel Binning ⭐ HIGH VALUE<a class="headerlink" href="#1-adaptive-channel-binning-high-value" title="Permanent link">¶</a></h3>
<p><strong>What it is:</strong>
- Dynamically combines frequency channels to optimize SNR
- Adapts binning strategy based on source strength and noise characteristics</p>
<p><strong>How to adapt for DSA-110:</strong>
- Apply to 16 subbands during conversion or imaging
- Create adaptive binning function that:
  - Starts with individual subbands
  - Combines adjacent subbands if SNR &lt; threshold
  - Optimizes binning per source or per field
- Integrate into <code>photometry/forced.py</code> or create new <code>photometry/adaptive.py</code></p>
<p><strong>Implementation Approach:</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">adaptive_bin_channels</span><span class="p">(</span>
    <span class="n">subband_ms_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">target_snr</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
    <span class="n">min_channels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">max_channels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">"""Determine optimal channel binning for SNR target.</span>

<span class="sd">    Returns list of (start_channel, end_channel) tuples.</span>
<span class="sd">    """</span>
    <span class="c1"># Measure SNR per subband</span>
    <span class="c1"># Combine until target SNR reached</span>
    <span class="c1"># Return binning strategy</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Better detection of weak sources
- Optimized SNR for photometry
- More robust flux measurements</p>
<p><strong>Integration Points:</strong>
- <code>conversion/strategies/hdf5_orchestrator.py</code>: Apply during conversion
- <code>imaging/cli.py</code>: Apply during imaging (frequency-dependent imaging)
- <code>photometry/forced.py</code>: Apply during photometry measurement</p>
<h3 id="2-aegean-source-fitting-integration-high-value">2. Aegean Source Fitting Integration ⭐ HIGH VALUE<a class="headerlink" href="#2-aegean-source-fitting-integration-high-value" title="Permanent link">¶</a></h3>
<p><strong>What it is:</strong>
- Uses Aegean source finder for sophisticated source fitting
- Handles extended sources, blended sources, complex morphologies
- Provides integrated flux (not just peak)</p>
<p><strong>How to adapt for DSA-110:</strong>
- Add Aegean as optional dependency
- Create <code>photometry/aegean_fitting.py</code> module
- Integrate with existing forced photometry workflow
- Use Aegean for sources where simple peak measurement is insufficient</p>
<p><strong>Implementation Approach:</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">measure_with_aegean</span><span class="p">(</span>
    <span class="n">fits_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">ra_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">dec_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">search_radius_arcsec</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="n">use_prioritized</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AegeanPhotometryResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Measure source using Aegean source finder.</span>

<span class="sd">    Returns integrated flux, peak flux, morphology parameters.</span>
<span class="sd">    """</span>
    <span class="c1"># Run Aegean on FITS image</span>
    <span class="c1"># Match source to catalog position</span>
    <span class="c1"># Extract flux and morphology</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- More accurate flux for extended sources
- Better handling of blended sources
- Morphology information (size, shape)
- Integrated flux vs. peak flux option</p>
<p><strong>Dependencies:</strong>
- Aegean source finder (Python package)
- May require additional system dependencies</p>
<p><strong>Integration Points:</strong>
- <code>photometry/forced.py</code>: Add <code>measure_with_aegean()</code> function
- <code>photometry/cli.py</code>: Add <code>--use-aegean</code> flag
- <code>photometry/normalize.py</code>: Use Aegean results for normalization</p>
<h3 id="3-polarization-analysis-medium-value">3. Polarization Analysis ⭐ MEDIUM VALUE<a class="headerlink" href="#3-polarization-analysis-medium-value" title="Permanent link">¶</a></h3>
<p><strong>What it is:</strong>
- Calculates circular polarization fraction (Stokes V)
- Plots Stokes I, Stokes V, and fraction</p>
<p><strong>How to adapt for DSA-110:</strong>
- DSA-110 currently focuses on Stokes I (total intensity)
- Add Stokes V analysis for circular polarization
- Create <code>photometry/polarization.py</code> module</p>
<p><strong>Implementation Approach:</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">measure_polarization</span><span class="p">(</span>
    <span class="n">fits_path_stokes_i</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fits_path_stokes_v</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">ra_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">dec_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PolarizationResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Measure circular polarization fraction.</span>

<span class="sd">    Returns Stokes I, Stokes V, and fraction V/I.</span>
<span class="sd">    """</span>
</code></pre></div></p>
<p><strong>Benefits:</strong>
- Additional science capability (circular polarization)
- Better source characterization
- Potential for polarization-based ESE detection</p>
<p><strong>Considerations:</strong>
- Requires Stokes V images (may need imaging pipeline changes)
- May not be priority for ESE detection (focus is on total intensity)</p>
<p><strong>Integration Points:</strong>
- <code>imaging/cli.py</code>: Add Stokes V imaging option
- <code>photometry/polarization.py</code>: New module for polarization analysis
- <code>api/routes.py</code>: Add polarization endpoints</p>
<h3 id="4-prioritized-fitting-medium-value">4. Prioritized Fitting ⭐ MEDIUM VALUE<a class="headerlink" href="#4-prioritized-fitting-medium-value" title="Permanent link">¶</a></h3>
<p><strong>What it is:</strong>
- Aegean's prioritized fitting option for handling blended sources
- Fits multiple sources simultaneously with proper deblending</p>
<p><strong>How to adapt for DSA-110:</strong>
- Use Aegean's prioritized fitting mode
- Apply to crowded fields or blended sources
- Integrate with existing photometry workflow</p>
<p><strong>Benefits:</strong>
- Better flux measurements in crowded fields
- Proper deblending of overlapping sources
- More accurate photometry for ESE detection</p>
<p><strong>Integration Points:</strong>
- <code>photometry/aegean_fitting.py</code>: Use prioritized fitting mode
- <code>photometry/cli.py</code>: Add <code>--prioritized-fitting</code> flag</p>
<hr/>
<h2 id="implementation-recommendations">Implementation Recommendations<a class="headerlink" href="#implementation-recommendations" title="Permanent link">¶</a></h2>
<h3 id="phase-1-adaptive-channel-binning-high-priority">Phase 1: Adaptive Channel Binning (High Priority)<a class="headerlink" href="#phase-1-adaptive-channel-binning-high-priority" title="Permanent link">¶</a></h3>
<p><strong>Effort:</strong> Medium (2-3 days)<br/>
<strong>Value:</strong> High<br/>
<strong>Risk:</strong> Low</p>
<p><strong>Steps:</strong>
1. ✅ Study WABIFAT's adaptive binning algorithm (code analyzed)
2. Implement <code>photometry/adaptive_binning.py</code> module with iterative width-increasing strategy
3. Integrate with <code>photometry/forced.py</code> or imaging pipeline
4. Test on DSA-110 data (16 subbands)
5. Compare SNR improvements vs. current approach</p>
<p><strong>Algorithm Implementation:</strong>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">adaptive_bin_channels</span><span class="p">(</span>
    <span class="n">subband_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">target_snr</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">,</span>
    <span class="n">initial_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
    <span class="n">coord_ra</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">coord_dec</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Detection</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">"""Adaptive channel binning following WABIFAT algorithm.</span>

<span class="sd">    Returns list of detections with optimal binning.</span>
<span class="sd">    """</span>
    <span class="n">all_channels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subband_list</span><span class="p">)))</span>
    <span class="n">misfit_channels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">detections</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">check_width</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">initial_width</span><span class="p">,</span> <span class="n">max_width</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">new_all_channels</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Find consecutive series</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">find_consecutive_series</span><span class="p">(</span><span class="n">all_channels</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">series_channels</span> <span class="ow">in</span> <span class="n">series</span><span class="p">:</span>
            <span class="c1"># Split into slices of check_width</span>
            <span class="n">slices</span> <span class="o">=</span> <span class="n">split_into_slices</span><span class="p">(</span><span class="n">series_channels</span><span class="p">,</span> <span class="n">check_width</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">slice_channels</span> <span class="ow">in</span> <span class="n">slices</span><span class="p">:</span>
                <span class="c1"># Image combined channels</span>
                <span class="n">image_path</span> <span class="o">=</span> <span class="n">image_channels</span><span class="p">(</span><span class="n">slice_channels</span><span class="p">)</span>

                <span class="c1"># Measure photometry</span>
                <span class="n">flux</span><span class="p">,</span> <span class="n">rms</span><span class="p">,</span> <span class="n">snr</span> <span class="o">=</span> <span class="n">measure_photometry</span><span class="p">(</span>
                    <span class="n">image_path</span><span class="p">,</span> <span class="n">coord_ra</span><span class="p">,</span> <span class="n">coord_dec</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">snr</span> <span class="o">&gt;=</span> <span class="n">target_snr</span><span class="p">:</span>
                    <span class="n">detections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Detection</span><span class="p">(</span>
                        <span class="n">channels</span><span class="o">=</span><span class="n">slice_channels</span><span class="p">,</span>
                        <span class="n">flux</span><span class="o">=</span><span class="n">flux</span><span class="p">,</span>
                        <span class="n">rms</span><span class="o">=</span><span class="n">rms</span><span class="p">,</span>
                        <span class="n">snr</span><span class="o">=</span><span class="n">snr</span>
                    <span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Add back to pool for next iteration</span>
                    <span class="n">new_all_channels</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">slice_channels</span><span class="p">)</span>

        <span class="n">all_channels</span> <span class="o">=</span> <span class="n">new_all_channels</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">all_channels</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="c1"># Final pass: try adjacent misfits</span>
    <span class="n">misfit_detections</span> <span class="o">=</span> <span class="n">try_adjacent_misfits</span><span class="p">(</span><span class="n">misfit_channels</span><span class="p">)</span>
    <span class="n">detections</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">misfit_detections</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">detections</span>
</code></pre></div></p>
<p><strong>Dependencies:</strong>
- ✅ WABIFAT source code analyzed (cloned to <code>/data/dsa110-contimg/archive/references/WABIFAT</code>)
- Understanding of DSA-110 subband structure</p>
<h3 id="phase-2-aegean-integration-high-priority">Phase 2: Aegean Integration (High Priority)<a class="headerlink" href="#phase-2-aegean-integration-high-priority" title="Permanent link">¶</a></h3>
<p><strong>Effort:</strong> Medium-High (3-5 days)<br/>
<strong>Value:</strong> High<br/>
<strong>Risk:</strong> Medium (dependency management)</p>
<p><strong>Steps:</strong>
1. Install Aegean source finder in casa6 environment
2. Create <code>photometry/aegean_fitting.py</code> module
3. Implement <code>measure_with_aegean()</code> function following WABIFAT pattern:
   <div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">measure_with_aegean</span><span class="p">(</span>
    <span class="n">fits_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">rms_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">bkg_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">ra_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">dec_deg</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">use_prioritized</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AegeanResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Measure source using Aegean forced fitting.</span>

<span class="sd">    Follows WABIFAT's forced_fitter() approach:</span>
<span class="sd">    1. Extract PSF from FITS header</span>
<span class="sd">    2. Create input table with source position + PSF</span>
<span class="sd">    3. Run Aegean with --priorized flag</span>
<span class="sd">    4. Extract peak_flux, err_peak_flux, local_rms</span>
<span class="sd">    """</span>
    <span class="c1"># Extract PSF parameters</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">fits</span><span class="o">.</span><span class="n">getheader</span><span class="p">(</span><span class="n">fits_path</span><span class="p">)</span>
    <span class="n">bmaj</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bmaj'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3600</span>  <span class="c1"># arcsec</span>
    <span class="n">bmin</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bmin'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3600</span>
    <span class="n">bpa</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">'bpa'</span><span class="p">]</span>

    <span class="c1"># Create input table</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">create_aegean_input_table</span><span class="p">(</span>
        <span class="n">ra</span><span class="o">=</span><span class="n">ra_deg</span><span class="p">,</span>
        <span class="n">dec</span><span class="o">=</span><span class="n">dec_deg</span><span class="p">,</span>
        <span class="n">peak_flux</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>  <span class="c1"># dummy</span>
        <span class="n">a</span><span class="o">=</span><span class="n">bmaj</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">bmin</span><span class="p">,</span> <span class="n">pa</span><span class="o">=</span><span class="n">bpa</span><span class="p">,</span>
        <span class="n">psf_a</span><span class="o">=</span><span class="n">bmaj</span><span class="p">,</span> <span class="n">psf_b</span><span class="o">=</span><span class="n">bmin</span><span class="p">,</span> <span class="n">psf_pa</span><span class="o">=</span><span class="n">bpa</span>
    <span class="p">)</span>

    <span class="c1"># Run Aegean</span>
    <span class="n">run_aegean</span><span class="p">(</span>
        <span class="n">image</span><span class="o">=</span><span class="n">fits_path</span><span class="p">,</span>
        <span class="n">noise</span><span class="o">=</span><span class="n">rms_path</span><span class="p">,</span>
        <span class="n">background</span><span class="o">=</span><span class="n">bkg_path</span><span class="p">,</span>
        <span class="n">input_table</span><span class="o">=</span><span class="n">table</span><span class="p">,</span>
        <span class="n">prioritized</span><span class="o">=</span><span class="n">use_prioritized</span><span class="p">,</span>
        <span class="n">output_table</span><span class="o">=</span><span class="s1">'aegean_output.fits'</span>
    <span class="p">)</span>

    <span class="c1"># Extract results</span>
    <span class="k">return</span> <span class="n">extract_aegean_results</span><span class="p">(</span><span class="s1">'aegean_output.fits'</span><span class="p">)</span>
</code></pre></div>
4. Add CLI flag <code>--use-aegean</code> to photometry CLI
5. Test on extended/blended sources
6. Compare flux accuracy vs. simple peak measurement</p>
<p><strong>Dependencies:</strong>
- Aegean Python package
- System dependencies (may conflict with casa6)
- Testing on real DSA-110 data</p>
<h3 id="phase-3-polarization-analysis-low-priority">Phase 3: Polarization Analysis (Low Priority)<a class="headerlink" href="#phase-3-polarization-analysis-low-priority" title="Permanent link">¶</a></h3>
<p><strong>Effort:</strong> High (5-7 days)<br/>
<strong>Value:</strong> Medium<br/>
<strong>Risk:</strong> Medium (requires imaging pipeline changes)</p>
<p><strong>Steps:</strong>
1. Add Stokes V imaging to <code>imaging/cli.py</code>
2. Create <code>photometry/polarization.py</code> module
3. Implement polarization fraction calculation
4. Add plotting utilities
5. Test on DSA-110 data</p>
<p><strong>Considerations:</strong>
- May not be priority for ESE detection
- Requires imaging pipeline modifications
- Additional storage for Stokes V images</p>
<hr/>
<h2 id="code-access-and-analysis">Code Access and Analysis<a class="headerlink" href="#code-access-and-analysis" title="Permanent link">¶</a></h2>
<p><strong>Status:</strong> ✅ <strong>COMPLETE</strong> - WABIFAT repository cloned and analyzed</p>
<p><strong>Location:</strong> <code>/data/dsa110-contimg/archive/references/WABIFAT</code></p>
<p><strong>Files Analyzed:</strong>
1. ✅ <code>WABIFAT_FINAL.py</code> (1,257 lines) - Adaptive binning algorithm fully documented
2. ✅ <code>FF_and_more.py</code> (1,377 lines) - Forced fitting and polarization analysis documented
3. ✅ <code>plot.py</code> (996 lines) - Plotting utilities reviewed
4. ✅ <code>README.md</code> - Project description reviewed</p>
<p><strong>Key Algorithms Extracted:</strong>
- ✅ Adaptive channel binning algorithm (iterative width-increasing strategy)
- ✅ Forced fitting workflow (BANE + Aegean integration)
- ✅ Polarization fraction calculation (with error propagation)
- ✅ Misfit recovery mechanism (adjacent channel combination)</p>
<p><strong>Code Quality Notes:</strong>
- Code is functional but has some quality issues (as author noted)
- Heavy use of <code>os.system()</code> calls (could be improved with subprocess)
- Hardcoded paths and parameters (needs refactoring for DSA-110)
- Good algorithm logic despite code style issues</p>
<hr/>
<h2 id="compatibility-assessment">Compatibility Assessment<a class="headerlink" href="#compatibility-assessment" title="Permanent link">¶</a></h2>
<h3 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">¶</a></h3>
<p><strong>WABIFAT Dependencies (inferred):</strong>
- WSClean (DSA-110 already uses)
- Aegean (would need to add)
- Bane (unknown - may be LOFAR-specific)
- Python standard libraries</p>
<p><strong>DSA-110 Compatibility:</strong>
- ✅ WSClean: Already integrated
- ⚠️ Aegean: Would need installation in casa6 environment
- ❓ Bane: Unknown compatibility
- ✅ Python: Compatible (Python 3.11.13 in casa6)</p>
<h3 id="data-format-compatibility">Data Format Compatibility<a class="headerlink" href="#data-format-compatibility" title="Permanent link">¶</a></h3>
<p><strong>WABIFAT Input:</strong>
- MS files (compatible)
- FITS images (compatible)</p>
<p><strong>DSA-110 Output:</strong>
- MS files ✅
- FITS images ✅
- PB-corrected images ✅</p>
<p><strong>Compatibility:</strong> ✅ High - Both use standard radio astronomy formats</p>
<h3 id="telescope-specific-considerations">Telescope-Specific Considerations<a class="headerlink" href="#telescope-specific-considerations" title="Permanent link">¶</a></h3>
<p><strong>WABIFAT:</strong>
- Designed for LOFAR (low frequencies, wide FoV)
- May have LOFAR-specific assumptions</p>
<p><strong>DSA-110:</strong>
- Higher frequencies (1.4 GHz vs. LOFAR's ~50-200 MHz)
- Different array configuration
- Different calibration approach</p>
<p><strong>Adaptation Required:</strong>
- Frequency-dependent parameters may need adjustment
- Array-specific optimizations may not apply
- Core algorithms should be adaptable</p>
<hr/>
<h2 id="risk-assessment">Risk Assessment<a class="headerlink" href="#risk-assessment" title="Permanent link">¶</a></h2>
<h3 id="technical-risks">Technical Risks<a class="headerlink" href="#technical-risks" title="Permanent link">¶</a></h3>
<ol>
<li><strong>Aegean Installation</strong>: Medium risk</li>
<li>May conflict with casa6 dependencies</li>
<li>May require system-level packages</li>
<li>
<p><strong>Mitigation</strong>: Test in isolated environment first</p>
</li>
<li>
<p><strong>Algorithm Adaptation</strong>: Low-Medium risk</p>
</li>
<li>WABIFAT algorithms may be LOFAR-specific</li>
<li>Need to verify assumptions hold for DSA-110</li>
<li>
<p><strong>Mitigation</strong>: Start with simple adaptations, test thoroughly</p>
</li>
<li>
<p><strong>Code Quality</strong>: Low risk</p>
</li>
<li>WABIFAT code is "not user friendly" (per author)</li>
<li>May need significant refactoring</li>
<li><strong>Mitigation</strong>: Extract algorithms, rewrite for DSA-110 standards</li>
</ol>
<h3 id="integration-risks">Integration Risks<a class="headerlink" href="#integration-risks" title="Permanent link">¶</a></h3>
<ol>
<li><strong>Pipeline Disruption</strong>: Low risk</li>
<li>Can add as optional features</li>
<li>Existing photometry remains unchanged</li>
<li>
<p><strong>Mitigation</strong>: Feature flags, gradual rollout</p>
</li>
<li>
<p><strong>Performance Impact</strong>: Low risk</p>
</li>
<li>Aegean fitting slower than simple peak</li>
<li>Adaptive binning may add overhead</li>
<li><strong>Mitigation</strong>: Make optional, benchmark performance</li>
</ol>
<hr/>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">¶</a></h2>
<p><strong>WABIFAT offers valuable techniques</strong> that could enhance the DSA-110 pipeline, particularly:</p>
<ol>
<li><strong>Adaptive channel binning</strong> - High value, low risk, medium effort</li>
<li><strong>Aegean source fitting</strong> - High value, medium risk, medium-high effort</li>
<li><strong>Polarization analysis</strong> - Medium value, medium risk, high effort</li>
</ol>
<p><strong>Recommended Approach:</strong>
1. <strong>Start with adaptive binning</strong> - Highest value-to-effort ratio
2. <strong>Add Aegean integration</strong> - Significant improvement for extended/blended sources
3. <strong>Consider polarization</strong> - Lower priority, evaluate science value first</p>
<p><strong>Next Steps:</strong>
1. Clone WABIFAT repository and examine code
2. Document adaptive binning algorithm
3. Implement Phase 1 (adaptive binning) as proof of concept
4. Evaluate results before proceeding to Phase 2</p>
<p><strong>Key Insight:</strong> WABIFAT's strength is in <strong>sophisticated source fitting and adaptive optimization</strong>, while DSA-110's strength is in <strong>differential normalization and systematic error removal</strong>. Combining both approaches could yield the best of both worlds.</p>
<hr/>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">¶</a></h2>
<ul>
<li><strong>WABIFAT Repository</strong>: https://github.com/KasVeken/WABIFAT</li>
<li><strong>Aegean Source Finder</strong>: https://github.com/PaulHancock/Aegean</li>
<li><strong>DSA-110 Photometry</strong>: <code>src/dsa110_contimg/photometry/</code></li>
<li><strong>DSA-110 Normalization</strong>: <code>src/dsa110_contimg/photometry/normalize.py</code></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.sections", "navigation.indexes", "content.code.copy", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "0.1.0"}</script>
<script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../../javascripts/mermaid-zoom.js"></script>
</body>
</html>