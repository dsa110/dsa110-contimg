# Logrotate configuration for DSA-110 Absurd Pipeline
# Install: sudo cp scripts/absurd/logrotate.conf /etc/logrotate.d/absurd-pipeline

/var/log/absurd_alerts.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0640 ubuntu ubuntu
    sharedscripts
    postrotate
        systemctl reload rsyslog > /dev/null 2>&1 || true
    endscript
}

/tmp/absurd_monitor.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ubuntu ubuntu
    maxsize 100M
}

# Journal logs are handled by systemd, but we can export them
/var/log/absurd_exported/*.log {
    weekly
    rotate 12
    compress
    delaycompress
    missingok
    notifempty
    create 0640 ubuntu ubuntu
    maxsize 500M
}
