
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="http://code.deepsynoptic.org/dsa110-contimg/how-to/CALIBRATION_DETAILED_PROCEDURE/" rel="canonical"/>
<link href="../build-vp-from-h5/" rel="prev"/>
<link href="../FIND_CALIBRATOR_TRANSIT_DATA/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.31" name="generator"/>
<title>Detailed Procedure - DSA-110 Continuum Imaging Pipeline</title>
<link href="../../assets/stylesheets/main.3cba04c6.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#detailed-calibration-procedure">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DSA-110 Continuum Imaging Pipeline
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Detailed Procedure
            
          </span>
</div>
</div>
</div>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DSA-110 Continuum Imaging Pipeline" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DSA-110 Continuum Imaging Pipeline">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    DSA-110 Continuum Imaging Pipeline
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/dsa110/dsa110-contimg" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../DOCUMENTATION_QUICK_REFERENCE/">
<span class="md-ellipsis">
    Documentation Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../concepts/">
<span class="md-ellipsis">
    Concepts
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/architecture/">
<span class="md-ellipsis">
    Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/DIRECTORY_ARCHITECTURE/">
<span class="md-ellipsis">
    Directory Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/modules/">
<span class="md-ellipsis">
    Modules
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/control-panel/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/aoflagger/">
<span class="md-ellipsis">
    AOFlagger
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/frontend_design/">
<span class="md-ellipsis">
    Frontend Design
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_8">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/dashboard_mockups/">
<span class="md-ellipsis">
    Mockups
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../SKYVIEW_IMPLEMENTATION_PLAN/">
<span class="md-ellipsis">
    Sky View
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/GLOSSARY/">
<span class="md-ellipsis">
    Glossary
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
<span class="md-ellipsis">
    Pipeline
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_10_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_10">
<span class="md-nav__icon md-icon"></span>
            Pipeline
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_overview/">
<span class="md-ellipsis">
    Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_stage_architecture/">
<span class="md-ellipsis">
    Stage Architecture
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_workflow_visualization/">
<span class="md-ellipsis">
    Workflow Visualization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_production_features/">
<span class="md-ellipsis">
    Production Features
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/pipeline_patterns/">
<span class="md-ellipsis">
    Patterns
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
<span class="md-ellipsis">
    Science
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
            Science
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/science/photometry_normalization/">
<span class="md-ellipsis">
    Photometry Normalization
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/mcp_browser_server_setup/">
<span class="md-ellipsis">
    Browser MCP Server
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    Tutorials
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_1">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/HDF5_TO_MS_TUTORIAL/">
<span class="md-ellipsis">
    HDF5 to MS
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/simulation-tutorial/">
<span class="md-ellipsis">
    Simulation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/calibrate-apply/">
<span class="md-ellipsis">
    Calibrate and Apply
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/convert-standalone/">
<span class="md-ellipsis">
    Convert Standalone
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/streaming/">
<span class="md-ellipsis">
    Streaming
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-ellipsis">
    Notebooks
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/bandpass_calibration_test.ipynb">
<span class="md-ellipsis">
    Bandpass Calibration Test
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/calibrator_helper.py">
<span class="md-ellipsis">
    Calibrator Helper
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/CalibratorSearch.ipynb">
<span class="md-ellipsis">
    Calibrator Search
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorials/notebooks/ms_staging_workflow.ipynb">
<span class="md-ellipsis">
    MS Staging Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    How-To Guides
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../github_pages_walkthrough/">
<span class="md-ellipsis">
    GitHub Pages Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
<span class="md-ellipsis">
    Quickstarts
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
            Quickstarts
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../quickstart/">
<span class="md-ellipsis">
    General
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../control-panel-quickstart/">
<span class="md-ellipsis">
    Control Panel
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LINEAR_SETUP_QUICKSTART/">
<span class="md-ellipsis">
    Linear Setup
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
<span class="md-ellipsis">
    Testing
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
            Testing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../FAST_TESTING/">
<span class="md-ellipsis">
    Fast Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PIPELINE_TESTING_GUIDE/">
<span class="md-ellipsis">
    Pipeline Guide
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../TEST_FLAG_SUBCOMMAND/">
<span class="md-ellipsis">
    Flag Subcommand
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../build-vp-from-h5/">
<span class="md-ellipsis">
    Build VP from h5
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
<span class="md-ellipsis">
    Calibration
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_5">
<span class="md-nav__icon md-icon"></span>
            Calibration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Detailed Procedure
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Detailed Procedure
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-calibration-steps">
<span class="md-ellipsis">
      Pre-Calibration Steps
    </span>
</a>
<nav aria-label="Pre-Calibration Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-pre-calibration-flagging">
<span class="md-ellipsis">
      Step 1: Pre-Calibration Flagging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-fast-mode-subset-creation-optional">
<span class="md-ellipsis">
      Step 2: Fast Mode Subset Creation (Optional)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-model-data-population">
<span class="md-ellipsis">
      Step 3: Model Data Population
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#calibration-solve-steps">
<span class="md-ellipsis">
      Calibration Solve Steps
    </span>
</a>
<nav aria-label="Calibration Solve Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-delay-calibration-k-optional">
<span class="md-ellipsis">
      Step 1: Delay Calibration (K) - Optional
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-bandpass-calibration-bp-standard">
<span class="md-ellipsis">
      Step 2: Bandpass Calibration (BP) - Standard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-gain-calibration-g-standard">
<span class="md-ellipsis">
      Step 3: Gain Calibration (G) - Standard
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-calibration-steps">
<span class="md-ellipsis">
      Post-Calibration Steps
    </span>
</a>
<nav aria-label="Post-Calibration Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-calibration-table-validation">
<span class="md-ellipsis">
      Step 1: Calibration Table Validation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-calibration-table-registration">
<span class="md-ellipsis">
      Step 2: Calibration Table Registration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-calibration-workflow-example">
<span class="md-ellipsis">
      Complete Calibration Workflow Example
    </span>
</a>
<nav aria-label="Complete Calibration Workflow Example" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-calibration-recommended">
<span class="md-ellipsis">
      Standard Calibration (Recommended)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fast-calibration-quick-5-minute-image">
<span class="md-ellipsis">
      Fast Calibration (Quick 5-Minute Image)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-calibration-k-bp-g">
<span class="md-ellipsis">
      Full Calibration (K + BP + G)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-parameters-summary">
<span class="md-ellipsis">
      Key Parameters Summary
    </span>
</a>
<nav aria-label="Key Parameters Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#required-parameters">
<span class="md-ellipsis">
      Required Parameters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-parameters">
<span class="md-ellipsis">
      Optional Parameters
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#troubleshooting">
<span class="md-ellipsis">
      Troubleshooting
    </span>
</a>
<nav aria-label="Troubleshooting" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#low-snr-solutions">
<span class="md-ellipsis">
      Low SNR Solutions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#missing-model_data">
<span class="md-ellipsis">
      Missing MODEL_DATA
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#insufficient-unflagged-data">
<span class="md-ellipsis">
      Insufficient Unflagged Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#calibration-tables-not-found">
<span class="md-ellipsis">
      Calibration Tables Not Found
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../FIND_CALIBRATOR_TRANSIT_DATA/">
<span class="md-ellipsis">
    Find Calibrator Transit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../IMAGE_0834_TRANSIT_5MIN/">
<span class="md-ellipsis">
    Image 0834 Transit 5min
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
<span class="md-ellipsis">
    Mosaic
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_7">
<span class="md-nav__icon md-icon"></span>
            Mosaic
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../mosaic_quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mosaic/">
<span class="md-ellipsis">
    Complete Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
<span class="md-ellipsis">
    Quality Assurance
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_8">
<span class="md-nav__icon md-icon"></span>
            Quality Assurance
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../QUALITY_ASSURANCE_SETUP/">
<span class="md-ellipsis">
    Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quicklook/">
<span class="md-ellipsis">
    Quick Look
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../reprocess/">
<span class="md-ellipsis">
    Reprocess
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../USING_ORCHESTRATOR_CLI/">
<span class="md-ellipsis">
    Using Orchestrator CLI
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_11">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../dashboard-development/">
<span class="md-ellipsis">
    Development
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dashboard-quickstart/">
<span class="md-ellipsis">
    Quickstart
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dashboard_testing/">
<span class="md-ellipsis">
    Testing
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dashboard_development_workflow/">
<span class="md-ellipsis">
    Development Workflow
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../LINEAR_INTEGRATION/">
<span class="md-ellipsis">
    Linear Integration
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../frontend-initial-setup/">
<span class="md-ellipsis">
    Frontend Initial Setup
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../PARAMETER_OPTIMIZATION_GUIDE/">
<span class="md-ellipsis">
    AOFlagger Parameter Optimization
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../downsampling_guide/">
<span class="md-ellipsis">
    Downsampling Guide
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
<span class="md-ellipsis">
    Conversion
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_16_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_16">
<span class="md-nav__icon md-icon"></span>
            Conversion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../uvh5_to_ms_conversion/">
<span class="md-ellipsis">
    UVH5 to MS
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../streaming_converter_guide/">
<span class="md-ellipsis">
    Streaming Converter
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
<span class="md-ellipsis">
    Reference
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
<span class="md-ellipsis">
    API
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_1">
<span class="md-nav__icon md-icon"></span>
            API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/api-endpoints/">
<span class="md-ellipsis">
    Endpoints
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_1_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_1_2" id="__nav_6_1_2_label" tabindex="0">
<span class="md-ellipsis">
    Dashboard
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_1_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_6_1_2">
<span class="md-nav__icon md-icon"></span>
            Dashboard
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/dashboard_backend_api/">
<span class="md-ellipsis">
    API Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/dashboard_pages_and_features/">
<span class="md-ellipsis">
    Pages &amp; Features
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/backend_integration_snippets/">
<span class="md-ellipsis">
    Integration Snippets
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/calibration-overview/">
<span class="md-ellipsis">
    Calibration Overview
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/cli/">
<span class="md-ellipsis">
    CLI
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/control-panel-cheatsheet/">
<span class="md-ellipsis">
    Control Panel Cheatsheet
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/database_schema/">
<span class="md-ellipsis">
    Database Schema
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/env/">
<span class="md-ellipsis">
    Environment Variables
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/CRITICAL_PYTHON_ENVIRONMENT/">
<span class="md-ellipsis">
    Critical Python Environment
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
<span class="md-ellipsis">
    Optimizations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_8">
<span class="md-nav__icon md-icon"></span>
            Optimizations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/optimizations/OPTIMIZATION_API/">
<span class="md-ellipsis">
    API
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/optimizations/PROFILING_GUIDE/">
<span class="md-ellipsis">
    Profiling Guide
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
<span class="md-ellipsis">
    Operations
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
<span class="md-ellipsis">
    Deployment
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_1">
<span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/deploy-docker/">
<span class="md-ellipsis">
    Docker
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/deploy-systemd/">
<span class="md-ellipsis">
    systemd
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/port-management/">
<span class="md-ellipsis">
    Port Management
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/refant_quick_reference/">
<span class="md-ellipsis">
    Refant Quick Reference
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/service_restart_fix/">
<span class="md-ellipsis">
    Service Restart Fix
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/systemd-migration/">
<span class="md-ellipsis">
    Systemd Migration
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../contributing/">
<span class="md-ellipsis">
    Contributing
  </span>
</a>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
<span class="md-ellipsis">
    Archive
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_2">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/archive/CONTRIBUTING_TODO/">
<span class="md-ellipsis">
    Contributing to TODO
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributing/archive/rules/">
<span class="md-ellipsis">
    Rules
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pre-calibration-steps">
<span class="md-ellipsis">
      Pre-Calibration Steps
    </span>
</a>
<nav aria-label="Pre-Calibration Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-pre-calibration-flagging">
<span class="md-ellipsis">
      Step 1: Pre-Calibration Flagging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-fast-mode-subset-creation-optional">
<span class="md-ellipsis">
      Step 2: Fast Mode Subset Creation (Optional)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-model-data-population">
<span class="md-ellipsis">
      Step 3: Model Data Population
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#calibration-solve-steps">
<span class="md-ellipsis">
      Calibration Solve Steps
    </span>
</a>
<nav aria-label="Calibration Solve Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-delay-calibration-k-optional">
<span class="md-ellipsis">
      Step 1: Delay Calibration (K) - Optional
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-bandpass-calibration-bp-standard">
<span class="md-ellipsis">
      Step 2: Bandpass Calibration (BP) - Standard
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-3-gain-calibration-g-standard">
<span class="md-ellipsis">
      Step 3: Gain Calibration (G) - Standard
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#post-calibration-steps">
<span class="md-ellipsis">
      Post-Calibration Steps
    </span>
</a>
<nav aria-label="Post-Calibration Steps" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#step-1-calibration-table-validation">
<span class="md-ellipsis">
      Step 1: Calibration Table Validation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#step-2-calibration-table-registration">
<span class="md-ellipsis">
      Step 2: Calibration Table Registration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-calibration-workflow-example">
<span class="md-ellipsis">
      Complete Calibration Workflow Example
    </span>
</a>
<nav aria-label="Complete Calibration Workflow Example" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-calibration-recommended">
<span class="md-ellipsis">
      Standard Calibration (Recommended)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fast-calibration-quick-5-minute-image">
<span class="md-ellipsis">
      Fast Calibration (Quick 5-Minute Image)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-calibration-k-bp-g">
<span class="md-ellipsis">
      Full Calibration (K + BP + G)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#key-parameters-summary">
<span class="md-ellipsis">
      Key Parameters Summary
    </span>
</a>
<nav aria-label="Key Parameters Summary" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#required-parameters">
<span class="md-ellipsis">
      Required Parameters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optional-parameters">
<span class="md-ellipsis">
      Optional Parameters
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#troubleshooting">
<span class="md-ellipsis">
      Troubleshooting
    </span>
</a>
<nav aria-label="Troubleshooting" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#low-snr-solutions">
<span class="md-ellipsis">
      Low SNR Solutions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#missing-model_data">
<span class="md-ellipsis">
      Missing MODEL_DATA
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#insufficient-unflagged-data">
<span class="md-ellipsis">
      Insufficient Unflagged Data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#calibration-tables-not-found">
<span class="md-ellipsis">
      Calibration Tables Not Found
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
<span class="md-ellipsis">
      References
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="detailed-calibration-procedure">Detailed Calibration Procedure<a class="headerlink" href="#detailed-calibration-procedure" title="Permanent link">¶</a></h1>
<p><strong>Purpose:</strong> This document provides a comprehensive, step-by-step explanation of the calibration procedure for DSA-110 continuum imaging pipeline.</p>
<p><strong>Location:</strong> <code>docs/howto/CALIBRATION_DETAILED_PROCEDURE.md</code></p>
<hr/>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>The calibration procedure corrects for instrumental and atmospheric effects that distort radio interferometric data. The pipeline performs <strong>bandpass (BP)</strong> and <strong>gain (G)</strong> calibration by default, with optional <strong>delay (K)</strong> calibration available.</p>
<p><strong>Calibration Order:</strong> K → BP → G (if K is enabled)</p>
<p><strong>Default Behavior:</strong> K-calibration is <strong>skipped by default</strong> for DSA-110 (connected-element array, 2.6 km max baseline), following VLA/ALMA practice.</p>
<hr/>
<h2 id="pre-calibration-steps">Pre-Calibration Steps<a class="headerlink" href="#pre-calibration-steps" title="Permanent link">¶</a></h2>
<h3 id="step-1-pre-calibration-flagging">Step 1: Pre-Calibration Flagging<a class="headerlink" href="#step-1-pre-calibration-flagging" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Remove bad data (zeros, RFI) before calibration to ensure solution integrity.</p>
<p><strong>Process:</strong></p>
<ol>
<li><strong>Reset Flags</strong> (<code>reset_flags</code>)</li>
<li>Clears any existing flags in the MS</li>
<li>
<p>Provides a clean slate for flagging operations</p>
</li>
<li>
<p><strong>Zero-Value Flagging</strong> (<code>flag_zeros</code>)</p>
</li>
<li>Flags completely zero data channels (correlator failures)</li>
<li>Uses CASA <code>flagdata</code> with <code>mode="clip"</code> and <code>clipzeros=True</code></li>
<li>
<p><strong>Required</strong> - zeros would corrupt calibration solutions</p>
</li>
<li>
<p><strong>RFI Flagging</strong> (<code>flag_rfi</code>, optional)</p>
</li>
<li>Two-stage statistical RFI detection:<ul>
<li><strong>Stage 1: tfcrop</strong> - Flags outliers in time/frequency space</li>
<li><code>timecutoff=4.0</code>, <code>freqcutoff=4.0</code></li>
<li>Fits polynomial/line models to detect deviations</li>
<li><strong>Stage 2: rflag</strong> - Flags outliers in residual space</li>
<li><code>timedevscale=4.0</code>, <code>freqdevscale=4.0</code></li>
</ul>
</li>
<li>
<p><strong>Recommended for calibrators</strong> - ensures clean solutions</p>
</li>
<li>
<p><strong>Channel-Level Flagging</strong> (<code>--auto-flag-channels</code>, default: enabled)</p>
</li>
<li><strong>Purpose</strong>: After RFI flagging, analyzes flagging statistics per channel and flags channels with high flagging rates before calibration</li>
<li><strong>How it works</strong>: <ul>
<li>Calculates flagging fraction per channel across all SPWs</li>
<li>Flags channels where &gt;50% of data is flagged (configurable via <code>--channel-flag-threshold</code>)</li>
<li>More precise than SPW-level flagging since SPWs are arbitrary subdivisions</li>
</ul>
</li>
<li><strong>When to use</strong>: Enabled by default. Use <code>--no-auto-flag-channels</code> to disable.</li>
<li><strong>Benefits</strong>: <ul>
<li>Preserves good channels even in "bad" SPWs</li>
<li>Reduces data loss compared to flagging entire SPWs</li>
<li>Improves calibration quality by using maximum available data</li>
</ul>
</li>
<li><strong>Example</strong>:
     <div class="highlight"><pre><span></span><code><span class="c1"># Use default threshold (50%)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--flagging-mode<span class="w"> </span>rfi

<span class="c1"># Custom threshold (40%)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--flagging-mode<span class="w"> </span>rfi<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--channel-flag-threshold<span class="w"> </span><span class="m">0</span>.4
</code></pre></div></li>
</ol>
<p><strong>Flagging Modes:</strong>
- <code>--flagging-mode zeros</code> (default): Only zeros flagging
- <code>--flagging-mode rfi</code>: Zeros + RFI flagging
- <code>--flagging-mode none</code>: Skip flagging (not recommended)</p>
<p><strong>Validation:</strong>
- After flagging, pipeline verifies ≥10% unflagged data remains
- Warns if &lt;30% unflagged (may affect solution quality)</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Flagging is automatic, but can be controlled:</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--flagging-mode<span class="w"> </span>rfi<span class="w">  </span><span class="c1"># Use RFI flagging</span>
</code></pre></div></p>
<h3 id="step-2-fast-mode-subset-creation-optional">Step 2: Fast Mode Subset Creation (Optional)<a class="headerlink" href="#step-2-fast-mode-subset-creation-optional" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Speed up calibration by creating a time/channel-binned subset MS.</p>
<p><strong>When Enabled:</strong> <code>--fast</code> flag with <code>--timebin</code> and <code>--chanbin</code> parameters</p>
<p><strong>Process:</strong>
1. Creates a new MS with binned data:
   - Time averaging: <code>--timebin 30s</code> (average over 30 seconds)
   - Channel binning: <code>--chanbin 4</code> (average 4 channels together)
2. Uses subset MS for all calibration solves
3. Original MS remains unchanged
4. Subset can be cleaned up with <code>--cleanup-subset</code></p>
<p><strong>Trade-offs:</strong>
- ✓ <strong>Faster</strong>: 3-5x speedup for large MS files
- ✓ <strong>Lower memory</strong>: Reduced data volume
- ⚠️ <strong>Lower resolution</strong>: Solutions have coarser time/channel resolution
- ⚠️ <strong>May miss fast variations</strong>: Time-variable effects may be averaged out</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--fast<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timebin<span class="w"> </span>30s<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--chanbin<span class="w"> </span><span class="m">4</span>
</code></pre></div></p>
<h3 id="step-3-model-data-population">Step 3: Model Data Population<a class="headerlink" href="#step-3-model-data-population" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Populate <code>MODEL_DATA</code> column with expected visibility predictions from sky model.</p>
<p><strong>CRITICAL:</strong> All calibration steps (K, BP, G) <strong>require</strong> <code>MODEL_DATA</code> to be populated. Calibration compares observed data (<code>DATA</code>) to model predictions (<code>MODEL_DATA</code>) to solve for corrections.</p>
<p><strong>Population Methods:</strong></p>
<ol>
<li><strong>Catalog Model</strong> (<code>--model-source catalog</code>, default)</li>
<li>Uses VLA calibrator catalog to find calibrator flux</li>
<li>Creates point source model at calibrator position</li>
<li>Uses Perley-Butler 2017 flux scale</li>
<li>
<p><strong>Recommended for standard calibrators</strong> (e.g., 0834+555)</p>
</li>
<li>
<p><strong>NVSS Catalog</strong> (<code>--model-source nvss</code>)</p>
</li>
<li>Uses NVSS catalog to find sources in field</li>
<li>Creates point source model for all sources ≥10 mJy</li>
<li>
<p><strong>Useful for target fields</strong> with multiple sources</p>
</li>
<li>
<p><strong>Manual Flux</strong> (<code>--cal-flux-jy</code>)</p>
</li>
<li>Specify calibrator flux manually</li>
<li>Creates point source model with specified flux</li>
<li><strong>Useful for non-standard calibrators</strong></li>
</ol>
<p><strong>Validation:</strong>
- Pipeline verifies <code>MODEL_DATA</code> exists and is populated (not all zeros)
- Raises error if <code>MODEL_DATA</code> is missing or unpopulated</p>
<p><strong>Technical Details:</strong>
- Model written via CASA <code>ft()</code> (Fourier transform) or <code>setjy()</code> (standard calibrators)
- Model stored in <code>MODEL_DATA</code> column as complex visibilities</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Use catalog model (automatic for calibrators)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model-source<span class="w"> </span>catalog

<span class="c1"># Use NVSS catalog for target fields</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model-source<span class="w"> </span>nvss<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--nvss-min-mjy<span class="w"> </span><span class="m">10</span>.0
</code></pre></div></p>
<hr/>
<h2 id="calibration-solve-steps">Calibration Solve Steps<a class="headerlink" href="#calibration-solve-steps" title="Permanent link">¶</a></h2>
<h3 id="step-1-delay-calibration-k-optional">Step 1: Delay Calibration (K) - <strong>Optional</strong><a class="headerlink" href="#step-1-delay-calibration-k-optional" title="Permanent link">¶</a></h3>
<p><strong>Status:</strong> <strong>Skipped by default</strong> for DSA-110</p>
<p><strong>Purpose:</strong> Corrects frequency-independent delays per antenna (clock offsets, cable delays).</p>
<p><strong>Rationale for Skipping:</strong>
- DSA-110 is a connected-element array (2.6 km max baseline)
- Following VLA/ALMA practice: residual delays (&lt;0.5 ns) are absorbed into complex gain calibration
- K-calibration is primarily needed for VLBI arrays (thousands of km baselines, independent atomic clocks)</p>
<p><strong>When to Enable:</strong>
- Use <code>--do-k</code> flag to explicitly enable if needed
- Typically only required for VLBI observations or explicit delay measurements</p>
<p><strong>Process (if enabled):</strong></p>
<ol>
<li><strong>Slow Solve</strong> (<code>solint='inf'</code>)</li>
<li>Solves for delays over entire scan</li>
<li>Uses entire frequency range for high SNR</li>
<li>
<p><strong>Duration:</strong> ~15-30 minutes</p>
</li>
<li>
<p><strong>Fast Solve</strong> (<code>solint='60s'</code>, optional)</p>
</li>
<li>Solves for time-variable delays</li>
<li>Uses shorter time intervals</li>
<li><strong>Duration:</strong> ~2-3 minutes</li>
<li>Can be skipped with <code>--k-fast-only</code></li>
</ol>
<p><strong>Technical Details:</strong>
- Uses CASA <code>gaincal</code> with <code>gaintype='K'</code>
- Combines across scans by default (<code>combine='scan'</code>)
- Can combine across SPWs with <code>--combine-spw</code>
- Minimum SNR threshold: <code>--bp-minsnr</code> (default: 5.0)</p>
<p><strong>Output:</strong>
- Calibration table: <code>&lt;ms_prefix&gt;_kcal</code>
- Format: CASA table directory (not a file)</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable K-calibration</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--do-k
</code></pre></div></p>
<hr/>
<h3 id="step-2-bandpass-calibration-bp-standard">Step 2: Bandpass Calibration (BP) - <strong>Standard</strong><a class="headerlink" href="#step-2-bandpass-calibration-bp-standard" title="Permanent link">¶</a></h3>
<p><strong>Status:</strong> <strong>Enabled by default</strong></p>
<p><strong>Purpose:</strong> Corrects frequency-dependent amplitude and phase variations across the observing band.</p>
<p><strong>Why Needed:</strong>
- Receivers have frequency-dependent response
- Bandpass shape varies per antenna
- Essential for accurate flux measurements</p>
<p><strong>Process:</strong></p>
<ol>
<li><strong>Pre-Bandpass Phase-Only Solve</strong> (optional, <code>--prebp-phase</code>)</li>
<li>Corrects phase drifts before bandpass solve</li>
<li>Improves SNR for bandpass solutions</li>
<li>
<p><strong>Recommended for marginal SNR cases</strong></p>
</li>
<li>
<p><strong>Bandpass Solve</strong></p>
</li>
<li>Uses CASA <code>bandpass</code> task with <code>bandtype='B'</code></li>
<li>Per-channel solution (<code>solint='inf'</code>)</li>
<li>Combines across scans by default (<code>combine='scan'</code>)</li>
<li>Optionally combines across fields (<code>--bp-combine-field</code>)</li>
<li>Optionally combines across SPWs (<code>--combine-spw</code>)</li>
</ol>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>Field Selection:</strong></li>
<li>Single field: <code>--field 0</code></li>
<li>Field range: <code>--field 0~15</code> (combines with <code>--bp-combine-field</code>)</li>
<li>Auto-select: <code>--auto-fields</code> (finds calibrator fields automatically)</li>
</ul>
<p><strong>Default Field Combining</strong> (when using <code>--auto-fields</code>):
  - After rephasing MS to calibrator position, automatically selects <strong>all fields</strong> (0~N-1) instead of just the peak field
  - Automatically enables <code>--bp-combine-field</code> to combine all fields for better SNR
  - <strong>Rationale</strong>: For drift-scan instruments like DSA-110, all fields share the same phase center after rephasing, so combining them maximizes integration time (e.g., 300 seconds vs 12.5 seconds)
  - <strong>When to use</strong>: Default behavior. Manually specify <code>--field</code> to override.
  - <strong>Example</strong>:
    <div class="highlight"><pre><span></span><code><span class="c1"># Automatically combines all fields after rephasing</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--preset<span class="w"> </span>standard
</code></pre></div></p>
<ul>
<li><strong>UV Range Cuts:</strong></li>
<li>Default: No cut (processes all baselines)</li>
<li>Speed up: <code>--uvrange '&gt;1klambda'</code> (removes short baselines)</li>
<li>
<p><strong>Warning:</strong> Too aggressive cuts may reduce SNR</p>
</li>
<li>
<p><strong>SNR Threshold:</strong></p>
</li>
<li><code>--bp-minsnr 3.0</code> (default: 3.0)</li>
<li>Solutions below threshold are flagged</li>
<li>
<p>Lower threshold (3.0) for marginal SNR cases</p>
</li>
<li>
<p><strong>Smoothing</strong> (optional):</p>
</li>
<li><code>--bp-smooth-type hanning|boxcar|gaussian</code></li>
<li><code>--bp-smooth-window &lt;channels&gt;</code></li>
<li>Smooths bandpass table after solve</li>
</ul>
<p><strong>Technical Details:</strong>
- <strong>PRECONDITION:</strong> <code>MODEL_DATA</code> must be populated
- Uses <code>MODEL_DATA</code> as source model (<code>smodel</code>)
- Reference antenna: <code>--refant</code> (must have good SNR)
- Solution normalization: <code>solnorm=True</code> (normalizes solutions)</p>
<p><strong>Validation:</strong>
- Verifies table exists and has solutions
- Checks reference antenna has solutions
- Validates table compatibility with MS</p>
<p><strong>Output:</strong>
- Calibration table: <code>&lt;ms_prefix&gt;_bpcal</code>
- Format: CASA table directory
- <strong>Plots</strong> (if <code>--plot-bandpass</code> enabled, default: True):
  - Bandpass amplitude plots: <code>{ms_dir}/calibration_plots/bandpass/{table_name}_plot_amp*.png</code>
  - Bandpass phase plots: <code>{ms_dir}/calibration_plots/bandpass/{table_name}_plot_phase*.png</code>
  - One plot per SPW, showing all antennas overlaid
  - Accessible via dashboard API endpoints</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Standard bandpass calibration</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields

<span class="c1"># Bandpass with field combination (improves SNR)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span>~15<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--bp-combine-field

<span class="c1"># Bandpass with pre-phase correction (improves SNR)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--prebp-phase
</code></pre></div></p>
<hr/>
<h3 id="step-3-gain-calibration-g-standard">Step 3: Gain Calibration (G) - <strong>Standard</strong><a class="headerlink" href="#step-3-gain-calibration-g-standard" title="Permanent link">¶</a></h3>
<p><strong>Status:</strong> <strong>Enabled by default</strong></p>
<p><strong>Purpose:</strong> Corrects time-dependent phase and amplitude variations (atmospheric effects, instrumental drifts).</p>
<p><strong>Why Needed:</strong>
- Atmospheric phase varies on timescales of seconds to minutes
- Instrumental gains drift over time
- Essential for phase coherence and accurate imaging</p>
<p><strong>Process:</strong></p>
<ol>
<li><strong>Phase-Only Gain Solve</strong> (<code>calmode='p'</code>)</li>
<li>Solves for phase-only gains after bandpass</li>
<li>Solution interval: <code>--gain-solint</code> (default: <code>'inf'</code>)</li>
<li>
<p><strong>Always performed</strong> (required for bandpass-calibrated data)</p>
</li>
<li>
<p><strong>Short-Timescale Phase-Only Solve</strong> (optional, <code>--gain-solint 60s</code>)</p>
</li>
<li>Solves for rapid phase variations</li>
<li>Uses shorter solution intervals (e.g., <code>'60s'</code>, <code>'30s'</code>, <code>'int'</code>)</li>
<li><strong>Recommended for long observations</strong> or high phase noise</li>
</ol>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong>Solution Interval:</strong></li>
<li><code>--gain-solint inf</code> (default): Entire scan</li>
<li><code>--gain-solint 60s</code>: 60-second intervals</li>
<li><code>--gain-solint 30s</code>: 30-second intervals</li>
<li>
<p><code>--gain-solint int</code>: Per integration</p>
</li>
<li>
<p><strong>Calibration Mode:</strong></p>
</li>
<li><code>--gain-calmode p</code> (default): Phase-only</li>
<li><code>--gain-calmode ap</code>: Amplitude + phase</li>
<li>
<p><code>--gain-calmode a</code>: Amplitude-only</p>
</li>
<li>
<p><strong>Field Selection:</strong></p>
</li>
<li>Same as bandpass: <code>--field 0</code> or <code>--field 0~15</code></li>
<li>
<p>Optionally combines across fields: <code>--bp-combine-field</code></p>
</li>
<li>
<p><strong>UV Range Cuts:</strong></p>
</li>
<li>
<p>Same as bandpass: <code>--uvrange '&gt;1klambda'</code> (optional)</p>
</li>
<li>
<p><strong>SNR Threshold:</strong></p>
</li>
<li><code>--gain-minsnr 3.0</code> (default: 3.0)</li>
<li>Solutions below threshold are flagged</li>
</ul>
<p><strong>Technical Details:</strong>
- <strong>PRECONDITION:</strong> <code>MODEL_DATA</code> must be populated
- <strong>PRECONDITION:</strong> Bandpass tables must exist and be validated
- Applies bandpass tables during gain solve (<code>gaintable=bptables</code>)
- Uses CASA <code>gaincal</code> with <code>gaintype='G'</code>
- Combines across scans by default
- Optionally combines across fields (<code>--bp-combine-field</code>)</p>
<p><strong>Fast Mode:</strong>
- <code>--fast</code> flag enables phase-only gains automatically
- Phase-only (<code>calmode='p'</code>) is faster than amplitude+phase</p>
<p><strong>Output:</strong>
- Calibration tables:
  - <code>&lt;ms_prefix&gt;_gpcal</code> (phase-only, <code>solint='inf'</code>)
  - <code>&lt;ms_prefix&gt;_2gcal</code> (phase-only, <code>solint='60s'</code>, if <code>--gain-solint</code> specified)
- Format: CASA table directories</p>
<p><strong>Validation:</strong>
- Verifies tables exist and have solutions
- Checks reference antenna has solutions
- Validates table compatibility with MS</p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><span class="c1"># Standard gain calibration (phase-only)</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields

<span class="c1"># Gain calibration with short-timescale solutions</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gain-solint<span class="w"> </span>60s

<span class="c1"># Gain calibration with amplitude+phase</span>
python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/path/to/ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gain-calmode<span class="w"> </span>ap
</code></pre></div></p>
<hr/>
<h2 id="post-calibration-steps">Post-Calibration Steps<a class="headerlink" href="#post-calibration-steps" title="Permanent link">¶</a></h2>
<h3 id="step-1-calibration-table-validation">Step 1: Calibration Table Validation<a class="headerlink" href="#step-1-calibration-table-validation" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Verify calibration tables are valid and compatible with MS.</p>
<p><strong>Process:</strong>
- Checks tables exist and are readable
- Verifies tables have solutions (non-empty)
- Validates reference antenna has solutions
- Checks table compatibility with MS (frequency ranges, time ranges)</p>
<p><strong>QA Validation:</strong>
- Runs <code>check_calibration_quality()</code> after each solve
- Checks solution quality metrics
- Alerts on issues (low SNR, flagged solutions, etc.)</p>
<h3 id="step-2-calibration-table-registration">Step 2: Calibration Table Registration<a class="headerlink" href="#step-2-calibration-table-registration" title="Permanent link">¶</a></h3>
<p><strong>Purpose:</strong> Register calibration tables in database for later application to target fields.</p>
<p><strong>Process:</strong>
- Tables registered in <code>cal_registry.sqlite3</code>
- Validity windows stored (MJD ranges)
- Apply order tracked (K → BP → G)</p>
<p><strong>Benefits:</strong>
- Tracks which tables are valid for which time periods
- Enables automatic table selection for target fields
- Prevents using outdated calibration tables</p>
<hr/>
<h2 id="complete-calibration-workflow-example">Complete Calibration Workflow Example<a class="headerlink" href="#complete-calibration-workflow-example" title="Permanent link">¶</a></h2>
<h3 id="standard-calibration-recommended">Standard Calibration (Recommended)<a class="headerlink" href="#standard-calibration-recommended" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/stage/dsa110-contimg/ms/2025-10-30T13:34:54.ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model-source<span class="w"> </span>catalog
</code></pre></div>
<p><strong>What Happens:</strong>
1. ✓ Flagging: Reset flags → Flag zeros → (Optional RFI)
2. ✓ Model Population: Populate <code>MODEL_DATA</code> from VLA catalog
3. ✗ K-calibration: Skipped (default)
4. ✓ Bandpass: Solve frequency-dependent gains
5. ✓ Gain: Solve time-dependent phase variations
6. ✓ Validation: Verify tables and register in database</p>
<p><strong>Output Tables:</strong>
- <code>&lt;ms_prefix&gt;_bpcal</code> (bandpass)
- <code>&lt;ms_prefix&gt;_gpcal</code> (phase-only gains)</p>
<h3 id="fast-calibration-quick-5-minute-image">Fast Calibration (Quick 5-Minute Image)<a class="headerlink" href="#fast-calibration-quick-5-minute-image" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/stage/dsa110-contimg/ms/2025-10-30T13:34:54.ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--fast<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--timebin<span class="w"> </span>30s<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--chanbin<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--uvrange<span class="w"> </span><span class="s1">'&gt;1klambda'</span>
</code></pre></div>
<p><strong>What Happens:</strong>
1. ✓ Create subset MS (time/channel binned)
2. ✓ Flagging: Reset flags → Flag zeros
3. ✓ Model Population: Populate <code>MODEL_DATA</code> from catalog
4. ✓ Bandpass: Solve on subset MS (faster)
5. ✓ Gain: Solve phase-only gains on subset MS (faster)
6. ✓ Validation: Verify tables</p>
<p><strong>Trade-offs:</strong>
- ✓ Faster: 3-5x speedup
- ⚠️ Lower resolution: Solutions averaged over bins</p>
<h3 id="full-calibration-k-bp-g">Full Calibration (K + BP + G)<a class="headerlink" href="#full-calibration-k-bp-g" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>dsa110_contimg.calibration.cli<span class="w"> </span>calibrate<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--ms<span class="w"> </span>/stage/dsa110-contimg/ms/2025-10-30T13:34:54.ms<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--refant<span class="w"> </span><span class="m">103</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--auto-fields<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--do-k<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gain-solint<span class="w"> </span>60s
</code></pre></div>
<p><strong>What Happens:</strong>
1. ✓ Flagging: Reset flags → Flag zeros → RFI
2. ✓ Model Population: Populate <code>MODEL_DATA</code> from catalog
3. ✓ K-calibration: Solve delays (slow + fast)
4. ✓ Bandpass: Solve frequency-dependent gains (uses K)
5. ✓ Gain: Solve phase-only gains (uses K + BP)
6. ✓ Validation: Verify all tables</p>
<p><strong>Output Tables:</strong>
- <code>&lt;ms_prefix&gt;_kcal</code> (delay)
- <code>&lt;ms_prefix&gt;_bpcal</code> (bandpass)
- <code>&lt;ms_prefix&gt;_gpcal</code> (phase-only gains, <code>solint='inf'</code>)
- <code>&lt;ms_prefix&gt;_2gcal</code> (phase-only gains, <code>solint='60s'</code>)</p>
<hr/>
<h2 id="key-parameters-summary">Key Parameters Summary<a class="headerlink" href="#key-parameters-summary" title="Permanent link">¶</a></h2>
<h3 id="required-parameters">Required Parameters<a class="headerlink" href="#required-parameters" title="Permanent link">¶</a></h3>
<ul>
<li><code>--ms</code>: Path to Measurement Set</li>
<li><code>--field</code>: Field selection (e.g., <code>0</code>, <code>0~15</code>)</li>
<li><code>--refant</code>: Reference antenna ID (e.g., <code>103</code>)</li>
</ul>
<h3 id="optional-parameters">Optional Parameters<a class="headerlink" href="#optional-parameters" title="Permanent link">¶</a></h3>
<p><strong>Flagging:</strong>
- <code>--flagging-mode zeros|rfi|none</code> (default: <code>zeros</code>)
- <code>--no-flagging</code>: Skip flagging (not recommended)</p>
<p><strong>Fast Mode:</strong>
- <code>--preset development</code>: Use development quality tier (⚠️ NON-SCIENCE)
- <code>--timebin &lt;interval&gt;</code>: Time averaging (e.g., <code>30s</code>)
- <code>--chanbin &lt;factor&gt;</code>: Channel binning (e.g., <code>4</code>)</p>
<p><strong>Model Population:</strong>
- <code>--model-source catalog|nvss</code> (default: <code>catalog</code>)
- <code>--cal-catalog &lt;path&gt;</code>: Calibrator catalog path
- <code>--cal-flux-jy &lt;flux&gt;</code>: Manual calibrator flux</p>
<p><strong>Bandpass:</strong>
- <code>--bp-combine-field</code>: Combine across fields
- <code>--bp-minsnr &lt;value&gt;</code>: Minimum SNR (default: 3.0)
- <code>--uvrange &lt;cut&gt;</code>: UV range selection (e.g., <code>&gt;1klambda</code>)
- <code>--prebp-phase</code>: Pre-bandpass phase correction</p>
<p><strong>Gain:</strong>
- <code>--gain-solint &lt;interval&gt;</code>: Solution interval (default: <code>inf</code>)
- <code>--gain-calmode p|ap|a</code>: Calibration mode (default: <code>p</code>)
- <code>--gain-minsnr &lt;value&gt;</code>: Minimum SNR (default: 3.0)</p>
<p><strong>K-Calibration:</strong>
- <code>--do-k</code>: Enable K-calibration (disabled by default)
- <code>--combine-spw</code>: Combine across SPWs
- <code>--k-fast-only</code>: Skip slow solve, only fast solve</p>
<hr/>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">¶</a></h2>
<h3 id="low-snr-solutions">Low SNR Solutions<a class="headerlink" href="#low-snr-solutions" title="Permanent link">¶</a></h3>
<p><strong>Symptoms:</strong> Many solutions flagged, warnings about low SNR</p>
<p><strong>Solutions:</strong>
- Use <code>--bp-combine-field</code> to combine across fields (improves SNR)
- Reduce UV range cut: <code>--uvrange ''</code> (no cut)
- Lower SNR threshold: <code>--bp-minsnr 3.0</code> (default)
- Use pre-bandpass phase: <code>--prebp-phase</code>
- Check reference antenna: <code>--auto-refant</code> or <code>--refant-ranking</code></p>
<h3 id="missing-model_data">Missing MODEL_DATA<a class="headerlink" href="#missing-model_data" title="Permanent link">¶</a></h3>
<p><strong>Symptoms:</strong> Error: "MODEL_DATA column does not exist" or "MODEL_DATA is all zeros"</p>
<p><strong>Solutions:</strong>
- Ensure <code>--model-source catalog</code> or <code>--model-source nvss</code> is specified
- Check calibrator is in catalog: <code>--cal-catalog &lt;path&gt;</code>
- Verify calibrator coordinates: <code>--cal-ra-deg</code>, <code>--cal-dec-deg</code>
- Manual flux: <code>--cal-flux-jy &lt;flux&gt;</code></p>
<h3 id="insufficient-unflagged-data">Insufficient Unflagged Data<a class="headerlink" href="#insufficient-unflagged-data" title="Permanent link">¶</a></h3>
<p><strong>Symptoms:</strong> Warning: "Only X% data remains unflagged"</p>
<p><strong>Solutions:</strong>
- Use less aggressive flagging: <code>--flagging-mode zeros</code> (skip RFI)
- Check data quality: <code>python -m dsa110_contimg.qa.ms_quality &lt;ms&gt;</code>
- Adjust flagging parameters: <code>--no-flagging</code> (not recommended)</p>
<h3 id="calibration-tables-not-found">Calibration Tables Not Found<a class="headerlink" href="#calibration-tables-not-found" title="Permanent link">¶</a></h3>
<p><strong>Symptoms:</strong> Error: "Calibration table does not exist"</p>
<p><strong>Solutions:</strong>
- Verify MS path is correct
- Check calibration completed successfully (check logs)
- Verify table names match expected pattern: <code>&lt;ms_prefix&gt;_bpcal</code>, <code>&lt;ms_prefix&gt;_gpcal</code></p>
<hr/>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">¶</a></h2>
<ul>
<li><strong>Calibration Reference</strong>: <code>docs/reference/calibration.md</code></li>
<li><strong>Calibration CLI</strong>: <code>src/dsa110_contimg/calibration/cli.py</code></li>
<li><strong>Calibration Functions</strong>: <code>src/dsa110_contimg/calibration/calibration.py</code></li>
<li><strong>Flagging Module</strong>: <code>src/dsa110_contimg/calibration/flagging.py</code></li>
<li><strong>Model Population</strong>: <code>src/dsa110_contimg/calibration/model.py</code></li>
<li><strong>Best Practices Review</strong>: <code>docs/reports/CALIBRATION_REVIEW_PERPLEXITY.md</code></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.indexes", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
<script src="../../javascripts/mathjax.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../../javascripts/mermaid-zoom.js"></script>
</body>
</html>